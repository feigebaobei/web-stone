# 基础

先出现低代码，再出现“低代码”概念。  
能够以最少的手写代码和设置快速开发应用、配置和部署业务应用程序。

## lc 平台的能力

- 可视化页面搭建
- 可视化模型设计
- 可视化流程设计
- 可视化报表及数据分析
- 可视化服务与数据开放、集成
- 权限、角色设置标准化和业务化
- 不关心技术概念与底层运维

## 概念介绍

|        |        |              |             |
| ------ | ------ | ------------ | ----------- |
| 设置器 | setter |              |             |
| -      | schema | 数据流的结构 | 与 blc 类似 |
| 设置器 | setter |              |             |
| 设置器 | setter |              |             |

## 软件开发演进

pro => low => zero => 自驱式开发

# 引擎介绍

为低码平台开发者提供一个具备强大定制扩展能力的低代码设计器研发框架。  
设计器骨架

```
|----------------------------------------|
|         顶部面板 topArea                |
|----------------------------------------|
|-----||---------------------||----------|
|     ||  工具栏 toolBar      ||          |
|  功  ||---------------------||  设置    |
|  能  ||                     ||  面板    |
|  面  ||                     ||  right  |
|  板  ||        画布         ||   Area   |
|left ||       mainArea      ||          |
|Area ||                     ||          |
|     ||                     ||          |
|-----||---------------------||----------|
```

代码设计器 = 低码引擎 + 设计器插件 _ n + 物料 _ n + 设置器 \* n

## 建设理念

|          |                                                                                                                  |                                                                                 |
| -------- | ---------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------- |
| 协议先行 | 就是数据流先行                                                                                                   | 所有的系统设计都是数据流先行。作者提出此点可能是为了统一团队意识。              |
| 最小内核 | 内核做精做深，差异部分为插件、物料、设置器扩展。例如 linux 内核与 linux 系统的关系。从现状来看，还未达到此目标。 | 分层设计的体现。详见[架构模式](/promote/systemDesign/architecturalPattern.html) |
| 最强生态 |                                                                                                                  |                                                                                 |
|          |                                                                                                                  |                                                                                 |

阿里内部有 100+个 lc 平台

# 应用篇

## setup

```
git clone https://github.com/alibaba/lowcode-demo.git
cd xxx
npm install
npm run start
# 即可看到效果
# 默认为中后台设计器
```

```js
import ReactRenderer from '@alilc/lowcode-react-renderer'
import ReactDOM from 'react-dom'
import { Button } from '@alifd/next' // 按需引入组件
let schema = {...}
let components = {
    Button
}
// 把要用到的组件+schema传入高阶组件
ReactDOM.render((<ReactRenderer
    schema={schema}
    components={components}
 />), document.getElementById('root'))
```

## 定制设计器

- 插件的功能是什么？
- 如何扩展、新增组件（物料、资产包）
- 设计器渲染的逻辑是什么？
- 设计器渲染与运行时渲染有何不同？

## 功能

- 可以加载外置物料
- 可以挂载外置插件

## 定制插件

```shell
npm init @alilc/element your-material-name
```

插件示例代码中体现了：

- 注册环境下唯一。数据中心化系统唯一键是 id.反之唯一是 name.
- exports
- hooks

## 定制设置器

内置 22 种设置器。
可开发设置器后挂载到引擎上。blc 中把设置器做成了 json。由组件的配置文件决定设置器的功能。ali 把设置器做成了 js 包。二者相较，js 包的功能更强大。
插件、设置器之间使用了`@alilc/lowcode-engine`包的`emit`对象实现。blc 中有这样的设计，但未有时间实现。它计划使用`plugin-xxx`实现。

## 定制物料

组件是最小可复用单元。
又是使用 cli 生成项目的基本结构。blc 也可以使用些方式实现自动化。在一组件的包中打包，打包结果包括搭建侧的和渲染侧的。
具体过程：

1. 使用脚本生成基本项目。
2. 编辑基本项目后打包。
3. 发布组件包。
4. 在低码平台项目中使用此组件包。

## 定制出码

- rax 适用于 m、applet
- icejs 适用于 pc
  有调试、测试。

## 宜搭

# 基础协议

协议（数据流）：系统之模块之间数据结构。
各种 json 配置文件。

# 原理篇

## 入料

经过扫描、解析源码，产出一份符合规范协议地 schema(json).然后使用动态，静态二种方式入料。
blc 不使用扫描+解析源码的方式实现。使用自动化脚本生成的组件包中就存在的配置文件。

## 编排

产生 schema 的过程

|          |                                                                  |     |     |
| -------- | ---------------------------------------------------------------- | --- | --- |
| 项目模型 | 一个引擎只有一个项目                                             |     |     |
| 文档模型 | 一个项目中有多个文档。一个文档就是一个页面。一个文档中有多个节点 |     |     |
| 节点模型 | 一个节点就是一个组件。                                           |     |     |
| 属性模型 | 一个节点中有一个 prop,它就是属性。                               |     |     |

## 渲染

schema + component => page

| 名称       | 英文名称 | 说明                                                                              | 优点                                                             | 缺点                                               |
| ---------- | -------- | --------------------------------------------------------------------------------- | ---------------------------------------------------------------- | -------------------------------------------------- |
| 运行时编译 | jit      | 加载 schema，执行 js。通过递归、计算 props 等，完成渲染。                         | 无编译时间，可在修改后短时间内看到效果。（编译时间比渲染时间长） | 首屏时间较长。当改变上下文时需要重新递归，损耗大。 |
| 预先编译   | aot      | 又称为出码渲染。产出特定语言的代码。可出特定技术栈的代码，也可出 js+html 的代码。 | 运行时性能好。                                                   | 出码不统一。实时性低。                             |

## 出码

- 需要极致的打开速度
- 老项目+新需求
- 协议不能描述部分代码逻辑

schema + solution => source code

1. 前置优化
2. 代码生成
3. 插槽
4. 代码块
5. 后置优化（prettier）

## 生态设计

- 物料生态
- 设置器生态
- 插件生态

## 设置器建设

setter

|      |     |                    |
| ---- | --- | ------------------ |
| 属性 |     | defaultValue/value |
| 样式 |     |                    |
| 事件 |     |                    |
| 高级 |     |                    |

## 插件建设

## 物料建设

# 展望

# 难点

- 定制化
- 灵活性
  lc 的风头已经盖过几年前的工程化（模块化、自动化、规范化）了

# blc 可实现的新增功能

- 出码
- 自动化创建组件基本结构
- 支持插件
- 组件版本跌代
- lc + pc

这么多年过来了。生态还是是那样。说明它做的也不好。
大家也没有基于它做出多好的 lc 平台。

低码引擎与低码平台的比例应该是 1:n。但是现在能提上名号的只有宜搭。ali 内部 100+个 lc 平台。我不相信有比宜搭做的好的平台而不公布出来的。计划是 1:n，现实是 1:1。
各插件也没做起来。给它点时间吧。
