软件匠艺

# no.31 代码和布局和风格

优秀的程序员可从代码的视觉结构优化活动中得到极大的艺术享受。
代码布局可影响理解、检查、修改代码。
代码布局把程序员分为卓越、庸常。

## 代码布局的基本原理

好的布局能够清楚地呈现程序的逻辑结构。
逻辑清晰 > 布局好看

知识结构可以帮助我们记住特定类型的信息。
团队编码的底线是：程序的结构必须保持一致。
优秀的程序员对布局风格保持开放的态度，虚心授受证明更好的做法。适当少用或不用自己惯用的。

## 好的代码布局的目标

|                                      |     |     |
| ------------------------------------ | --- | --- |
| 准确展现代码的逻辑结构               |     |     |
| 始终以一致的方式来展现代码的逻辑结构 |     |     |
| 有利于增强代码的可读性               |     |     |
| 方便对代码进行修改                   |     |     |

## 布局技术

|      |                    |     |
| ---- | ------------------ | --- |
| 空白 | 分组、空行、缩进、 |     |
| 括号 |                    |     |

## 布局风格

|                               |                                |                      |
| ----------------------------- | ------------------------------ | -------------------- |
| 纯程序块                      |                                |                      |
| 模拟程序块                    |                                |                      |
| 使用成对的开始-结束界定程序块 |                                |                      |
| 行尾布局                      | 代码缩进到行的中间或结束于行尾 | 不准确，难保存一致。 |

## 控制结构的布局

|                                            |     |     |
| ------------------------------------------ | --- | --- |
| 避免无缩进的开始-结束标记                  |     |     |
| 避免开始和结束的双重缩进                   |     |     |
| 用空行隔开不同的代码段                     |     |     |
| 单语句的格式要保持一致                     |     |     |
| 对于复杂的表达式，不同的条件放在不同的行上 |     |     |
| 避免使用 goto 语句                         |     |     |
| cas 语句不要用行尾布局                     |     |     |
| case 语句与逻辑不同行                      |     |     |

## 单条语句的布局

|                                |                                    |                       |
| ------------------------------ | ---------------------------------- | --------------------- |
| 用空行来澄清语句想要表达的意图 |                                    |                       |
| 长语句续行                     | 有意使语句显得不完整               |                       |
|                                | 相关元素放在一起                   |                       |
|                                | 子程序调用，换行后使用标准缩进     |                       |
|                                | 续行的结尾要容易查找               |                       |
|                                | 控制语句的续行，要使用标准缩进量。 |                       |
|                                | 不要对齐到赋值语句的右侧           |                       |
|                                | 赋值语句的续行，采用标准缩进量     |                       |
| 一行只放一条语句               |                                    | js 中有解构赋值的情况 |

## 数据声明的布局

|                                    |     |     |
| ---------------------------------- | --- | --- |
| 一行只一个数据声明                 |     |     |
| 变量的声明紧接在首次使用之后       |     |     |
| 如果是多条声明，要合理组织先后顺序 |     |     |
| 星号靠近变量名                     |     |     |

## 注释的布局

|                        |     |     |
| ---------------------- | --- | --- |
| 注释与对应代码对齐     |     |     |
| 每个注释，至少要空一行 |     |     |

## 子程序的布局

|                              |     |     |
| ---------------------------- | --- | --- |
| 空行隔开各部分               |     |     |
| 子程序的参数，要使用标准缩进 |     |     |

## 类的布局

|                          |     |     |
| ------------------------ | --- | --- |
| 一个文件中只放一个类     |     |     |
| 文件名要与类名相关       |     |     |
| 各子程序之间要隔开       |     |     |
| 按字母顺序排列           |     |     |
| 源文件中内容的组织很重要 |     |     |

# no.32 自文档代码

软件项目的文档由源代码内部+外部的信息组成。
详细设计文档：

- 类或子程序级别的设计决策。
- 曾考虑过的替代方案以及选择所选方案的理由。
- （明确主要变量名、数据流、模块功能）

## 高效注释的关键

简明扼要地展示内部逻辑。

注释的种类
|||||
|-|-|-|-|
|复述代码||||
|解释代码||||
|标记代码||有缺陷的代码已经够糟糕了，发布自己已知有缺陷的代码更糟糕。||
|概述代码|将若干行代码提炼成一两名话。|||
|描述代码意图||||
|传达代码自身无法表达的信息||||
|复述代码||||

高效注释
||||
|-|-|-|
|使用不会打断或打击修改积极性的注释风格|多行用 `/* */`||
|使用伪代码编程过程秋减少注释时间 |||
|把注释工作集成到开发风格里|||
|性能不是逃避注释的好借口|||

注释的数量：每 10 条语句 1 条注释的密度看起来中澄清效果最好的。

## 注释的技术

单行代码的注释

|                        |                              |                              |
| ---------------------- | ---------------------------- | ---------------------------- |
| 避免矫情型注释         |                              |                              |
| 避免单行代码的行尾注释 |                              |                              |
| 避免多行代码的行尾注释 |                              |                              |
| 使用行尾注释           | 标注数据声明                 |                              |
|                        | 避免用行尾注释来维护注解     |                              |
|                        | 使用行尾注释来标记代码块结束 | while/if/……结束的`}`后写注释 |

注释代码段落
||||
|-|-|-|
|编写代码意图层级的注释|||
|注重代码自身的文档化|||
|注重用段落注释阐述为什么而不是怎么做|||
|用溈为后续内容做好铺垫|||
|让每行注释都发挥其作用|||
|别用缩写词|防歧义||
|区分主次注释|用一行下划线分开||
|若是发现特定语言或环境下有任何错误或未记录特性，要加注释。|||
|阐明违背良好编码风格的原因|||
|玩聪明的代码不要加注释，重写。|||

源代码中注释多的地方，往往缺陷最多且消耗研发精力最多。

注释数据声明
||||
|-|-|-|
|注释数值数据的单位|||
|注释数值的有效范围|||
|注释代码寓意|kv 码值||
|注释入口数据的限制|||
|注释“位标志”|使用位运算时会用到。位域。||
|用变量名为相关注释盖戳|||
|注释全局数据|||

注释控制结构
||||
|-|-|-|
|为每个 if/case、循环或代码块前面加注释|阐明控制结构的意图||
|注释每个控制结构的结束|||
|将循环尾部溈视为复杂代码的警示征兆|只要复杂到需要繁冗注释的代码，一律重写。||

注释子程序
||||
|-|-|-|
|让注释靠近其描述的代码|||
|在子程序头部用一两名话对它进行描述|||
|在声明处对参数做说明|||
|充分利用 javadoc 等代码文档工具的优势|||
|区分输入和输出数据|||
|记录接口假设|||
|注释子程序的限制条件|||
|说明子程序的全局效果|||
|记录所用算法的来源|||
|使用注释标示程序各部分|||

注释类、文件和程序
||||
|-|-|-|
|注释类的一般原则|描述类的设计方法||
||打桩其局限性和用法假设||
||注释类的接口||
||不要在类的接口里面记录实现细节|只包含使用该类需要的信息|
|注释文档的一般原则|描述每个文件的目的和内容||
||将自己的名字、电邮和电话号码定入块注释||
||纳入版本控制标签||
||将法律声明纳入注释||
||给文件取一个跟内容相关的名称||

IEEE 标准

- 软件开发标准
- 软件质量保证标准
- 管理标准
- 标准综述

# no.33 个人性格

# no.34 title

# no.35 title
