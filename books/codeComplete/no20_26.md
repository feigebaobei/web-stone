代码改进

# no.20 软件质量概述

## 软件质量的特性

- 正确性
- 易用性
- 效率
- 可靠性
- 完整性
- 适应性
- 精确性
- 健壮性

有一部分是重叠的。质量的外部特性是用户关心的。
程序员关心内部质量特性：

- 可维护性
- 灵活性
- 可移植性
- 可重用性
- 可读性
- 可测试性
- 可理解性  
  内部特性与外部特性之间的差异不是泾渭分明的。  
  有时一个特性会损害另一个特性，有时一个特性会促进另一个特性。

|        | 正确性 | 易用性 | 效率 | 可靠性 | 完整性 | 适应性 | 精确性 | 健壮性 |
| ------ | ------ | ------ | ---- | ------ | ------ | ------ | ------ | ------ |
| 正确性 | -      |        | y    | y      |        |        | y      | n      |
| 易用性 |        | -      |      |        |        | y      | y      |        |
| 效率   | n      |        | -    | n      | n      | n      | n      |        |
| 可靠性 | y      |        |      | -      | y      |        | y      | n      |
| 完整性 |        |        | n    | y      | -      |        |        |        |
| 适应性 |        |        |      |        | n      | -      |        | y      |
| 精确性 | y      |        | n    | y      |        | n      | -      | n      |
| 健壮性 | n      | y      | n    | n      | n      | y      | n      | -      |

## 改进软件质量的技术

软件质量保证是一项需要预先计划的、系统性的活动，其目标是确保系统具有人们所期望的特性。

- 软件质量目标
- 明确的质量保证活动
- 测试策略
- 软件工程指南
- 非正式技术评审
- 正式技术评审
- 外部审计

开发过程

- 变更控制过程
- 结果的度量
- 制作原型

设置目标是实现高质量软件的一个简单、显而易见的步骤。它很容易被忽视。  
质量保证技术的相对效能  
找出缺陷的成本  
修正缺陷的成本

- 对所有需求、所有架构以及系统关键部分的设计进行正式审查
- 建模或创建原型
- 代码阅读或审查
- 执行测试

软件质量的普遍原理

- 提高生产率和改进质量的最佳方法是减少花费在代码返工上的时间，无论返回是由需求变化、设计变更还是调试引起的。（业界平均生产率大约每人每天 10-50 行最终交付代码）

# no.21 协同构建

就是多个程序员在一个写代码。目标是提高软件质量。  
协同构建：

- 结对编程
- 正式审查
- 非正式技术评审
- 文档阅读
- 集体所有制适用于所有形式的协同构建
- 在构建前后保持协作

## 结对编程

- 一个程序员在写代码
- 另一个程序员在观察是否有错误。思考是否代码是否正确以及这些代码是做了正确的事。
- 用编码规范支持结对编程
- 不要让结对编程变成旁观
- 不要强迫在简单的问题上使用结对编程
- 定期对结对人员和分配的工作任务进行轮换
- 鼓励双方跟上对方的步伐
- 确保双方都能看到显示器
- 不要强迫看不顺眼的人结对
- 避免新手组件
- 指定一个组长

好处

- 使人们在压力之下保持更好的状态
- 提升代码质量
- 缩短进度时间表

## 正式审查

在检测缺陷方面很有效。比测试省钱。

### 审查活动中的人员角色

不少于 3 人。

|        |                                                                                                                  |                                      |     |
| ------ | ---------------------------------------------------------------------------------------------------------------- | ------------------------------------ | --- |
| 主持人 | 让审查以一定速度进行。保证会议有成效。尽可能找出最多错误。必须具备技术胜任力。可以不是专家，一定要了解相关细节。 |                                      |     |
| 作者   | 解释设计、代码中不清楚的部分                                                                                     |                                      |     |
| 审查员 | 找出缺陷                                                                                                         |                                      |     |
| 记录员 | 记录审查会议中发现的错误和行动项的分配情况                                                                       | 作者和主持人不能做记录员             |     |
| 管理者 |                                                                                                                  | 邀请管理者参加审核会议一般不是好主意 |     |

### 审查的步骤

|                  |                                                                                                                                                                                                                        |                                                                 |     |
| ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------- | --- |
| 规划             | 作者向主持人提交给主持人。主持人决定由谁审查该材料以及何时何地召开审查会议。                                                                                                                                           |                                                                 |     |
| 概述             | 作者说清创建设计或代码的技术环境。不超过 1h                                                                                                                                                                            | 此阶段可掩盖设计、代码中不清楚的地方。                          |     |
| 准备             | 每人独立审查                                                                                                                                                                                                           | 基于视角审查会发现更多错误。                                    |     |
| 审查会议         | 主持人选择非作者一人阐述设计或阅读代码。说清所有逻辑。陈述进程中记录员记录发现的错误。所有讨论在确认它确实是一个错误时停止。记录员记录错误的类型、严重程度。然后继续审查。若讨论过程未保持聚集，则主持人要收加到正轨。 | 开始：150-200r/h,系统级：90r/h,应用程序：500r/h。一般不过程 2h. |     |
| 审查报告         | 主持人整理会议记录，周知相关同事。                                                                                                                                                                                     | 一天内主持人出报告                                              |     |
| 返工             | 主持人分配给相关相事错误后。由对应的人员解决错误。                                                                                                                                                                     |                                                                 |     |
| 跟进             | - 重新审查。 - 审查部分。 - 修正后不审查。                                                                                                                                                                             |                                                                 |     |
| 第三个小时的会议 | 讨论大家感兴趣的问题的解决方案。                                                                                                                                                                                       |                                                                 |     |
| 对审查进行微调   |                                                                                                                                                                                                                        |                                                                 |     |

审查无固定清单。每个团队由人员组成不同，他们容易范的错误也不同，不容易范的错误也不同。审查清单应该由多次审查后沉淀下来。

### 走查

由 2+个人讨论设计或代码。
解决错误方面，审查更有效。

### 代码阅读

发现错误的效率
||||
|-|-|-|
|代码阅读|3.3 个/h|20%-60%的错误|
|测试|1.8 个/h||
4000 行为宜。  
90%的错误在准备审查会议时发现。10%在审查过程中发现。

依靠审查、走查、代码阅读可提高软件质量。
结对编程与审查基本等效。

# no.22 title

# no.23 title

# no.24 title

# no.25 title

# no.26 title
