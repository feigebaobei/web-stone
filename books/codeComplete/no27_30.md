# no.27 程序规模对构建的影响

如果习惯于做小项目，你的第一个中大型项目可能会失控。
项目越大，沟通路径越多，产生沟通错误的可能越多。规模较大的项目需要以沟通进行精简的组织技术，或以合理方式限制沟通。

思考项目规模的一种方式是思考项目团队的规模。
随着项目的扩大，会越来越多错误被归咎于需求和设计。

小项目中，构建错误占总错误的 75%左右。
项目越大，错误密度越大。

项目越大，越注重合作（沟通）

生产力在很大程度上取决于软件类型、人员素质、编程语言、方法论、产品复杂度、编程环境、工具支持、代码行数的统计方式、如何将非编程人员的支持工作计入“每人年的代码行数”以及许多其他因素。

小项目的生产力可能是大项目的 2-3 倍。

组织对项目的成败有很大影响。

当规模达到原来的 10 倍时，
构建活动的工作量是原来 25 倍
项目规划的工作量是原来的 25-50 倍
系统集成的工作量是原来的 30 倍
架构设计和系统测试的工作量是原来的 40 倍

当项目代码<10000 行时，大约 5%的项目成本用于架构和需求上。
当 <10 万行时， 15%-20%

以下活动的工作是不是增长高于线性比率：

- 沟通
- 规划
- 管理
- 需求开发
- 系统功能设计
- 接口设计和规格
- 架构
- 集成
- 缺陷消除
- 系统测试
- 文档编写

无论项目大小，都会用到：

- 训练有素的编码实践。
- 设计审查和代码审查
- 强大的工具支持
- 使用高级语言

```
自己用     几个人用      几个部门之间合作
小项目 <-------------------> 大项目
```

为当前项目找一个适合级别的方法论。

“一个 1000 行的项目，平均约 7%的精力要花在文档工作上，而一个 10 万行代码的项目，平均约 26%的精力要花在写文档工作上。”——Capers Jones
文档只在计划和构建软件系统时所做的实际工作的一种有形的副产品。

# no.28 管理构建

架构师是精神领袖，让他定规范。
或减少项目中随性而为的差异，或灵活的指导（一系统建议而不是指导原则。）

## 促进良好编码的技术

- 结对编程
- 逐行评审代码
- 要求代码签核
- 选取优秀的代码示例作参考
- 重点强调代码是公有财产。（每人年 7500 行代码）
- 奖励好的代码
  - 奖励是程序员想要的东西
  - 获得奖励的代码应该是特别好的。
- 一个简单的标准。（以基础最弱的人是否理解为标准）

## 配置管理

使项目能随时间推移保持其完整性。（也叫“变更控制”）
scm(软件配置管理)关注程序的需求、源代码、文档、和测试数据。

需求和设计变更
||||
|-|-|-|
|遵循系统化的变更控制规程|||
|整体处理变更请求|先记录所有想法和建议，无论它们实现起来多容易，做好记录，直到有时间 才处理，从中选出最有利的来实现。||
|评估每项变更的成本|||
|提防大量的变更请求|||
|成立变更控制委员会或适合自己项目的类似组织|||

对进度的影响

- 需求开发人员的经验和能力
- 程序员和经验和能力
- 团队的动力
- 管理质量
- 重用代码量
- 人员流动性
- 需求稳定性
- 客户关系质量
- 用户对需求的参与度
- 客户对此类应用程序的经验
- 程序员对需求开发的参与度
- 计算机、程序和数据的分级安全环境
- 文档量
- 项目目标

评估与控制
评估准确不好合理安排开发资源。

进度落后了怎么办
||||
|-|-|-|
|希望参赶上|几乎不可能赶上||
|扩充团队|新手需要先花时间熟悉项目，然后才能有高生产力。培训他们要占用训练有素的人员的时间|若项目可拆分、可细化，则可以实现。|
|缩减项目范围|||

《gilb, tom, principles of software engineering management. wokingham, england: addison-wesley, 1988》no.16 章的标题：“评估软件特性的 10 个原则”，作者反对进行项目评估，赞成进行项目控制。他指出，人们并不真的想准确预测，但确实想控制最终的结果。

度量
||||
|-|-|-|
|任何项目特性都能找到一种合适的度量方法，而且肯定比完全不度量好|度量会让你掌控软件开发过程，不度量，就不可能掌控。||
|用于科学实验的数据必须量化|||
|留意度量的副使用|||
|反对度量相当于说最好不要知道项目中真正发生了什么|||

不要一开始就试图收集所有可能的度量数据，否则会淹没于过度复杂的数据中，以至于搞不清楚其中的含义。从一组简单的度量开始，然后补充。

## 以人为本，善待每一位程序员

高技术公司提供公园式的公司园区、有机的组织结构、舒适的办公室以及其他高度人性化的环境特性，以各种有时会显得枯燥的智力密集工作。最成功的技术公司结合了高科技和高接触的元素。

性能差异和质量差异
||||
|-|-|-|
|个体差异|程序员的经验与其代码质量、生产率之间有什么关系|可佐证 35 岁不是坎|
|团队差异|优秀的程序员倾向于抱团，糟糕的程序员也不例外。即使团队||
||即使团队成员的个体差异基本相同，团队差异也很大。|与组织、制度有关|
||80%的贡献来自 20%的贡献者|不要犹豫多花钱，因有了高品质和高生产力的程序员而迅速获得回报。可维持组织中其他程序员的素质和生产力。|

关于编程的信仰问题

|                                    |     |     |
| ---------------------------------- | --- | --- |
| 要清楚自己进入了敏感领域           |     |     |
| 针对这些领域采用“建议”或“指导原则” |     |     |
| 尽量不要通过强制性的规定来处理问题 |     |     |
| 让程序员自己设立标准               |     |     |

物理环境
人均 10k-30k 的投入得到了更多回报。
如果个人工作环境排名在后 25%，就可以通过工作环境改善为排名前 25%的方式，实现大约 100%的生产力提升。如果个人工作环境处于平均水平，仍然可以通过将工作环境改善为排名到前 25%的方式，从而实现 40%或更多的生产力提升。

## 向上管理

你的举止行为要让管理者以为他还是老大
||||
|-|-|-|
|向其植入自己的想法与创意。等着管理者业一场头脑风暴，跟你讨论你本来想做的事情。|||
|将正确的做事方式教给管理。|需要持之以恒|长远的解决方案|
|关注管理者的兴趣，按他们真正想要的方式做事，不要让他们注意到不必要的实现细节，想象成对个人的一种“封装”。|||
|拒绝按管理者说的做，坚持用正确的方法做事。|||
|另外找份工作|||

# no.29 集成

将多个单独软件组件整合成一个系统。
与组件的完成时间有关。

考虑周全的集成有以下好处。

- 缺陷诊断会变得更容易。
- 更少的缺陷
- 少过滤性的脚手架代码
- 花更少的时间就能得到首次可有用的产品
- 整体开发进度更短。
- 更融洽的客户关系
- 提高员工士气
- 提高完成项目的几率
- 更可靠的进度估算
- 更准确的状态报告
- 改进代码质量
- 允许使用更少的文档

集成方式：
||||
|-|-|-|
|阶段式|所有类经过自测后，在项目后期开始阶段式集成。||
|增量式|||

增量式集成的好处

- 更容易定位错误
- 系统在项目早期就获得成功
- 获得进展监控
- 改善客户关系
- 可以用更短的开发进度来完成系统构建

## 增量式集成策略

|              |                                                                                                  |                                              |                                                              |
| ------------ | ------------------------------------------------------------------------------------------------ | -------------------------------------------- | ------------------------------------------------------------ |
| 自项向下集成 | 顶可以是程序的主窗口、主方法、主业务、主领域、……                                                 |                                              |                                                              |
| 自底向上集成 |                                                                                                  | 必须先验证可行性，防止高层出现概念性设计问题 |                                                              |
| 三明治集成   | 中间层可厚可薄                                                                                   |                                              |                                                              |
| 面向风险集成 | 困难部分优先                                                                                     |                                              |                                                              |
| 面向特性集成 |                                                                                                  |                                              | 消除了除低层库类之外的几乎所有事物的脚手架代码。             |
|              |                                                                                                  |                                              | 每次集成者带来软件功能上的增长，为项目前进提供了切实的证据。 |
|              |                                                                                                  |                                              | 与面向对象设计契合。                                         |
| T 形集成     | 在一个特定的垂直切片进行早期开发和集成。让系统端到端地运行起来。有助于排队系统设计中的各种问题。 |                                              |                                                              |

## 每日构建和冒烟测试

通过每日构建和冒烟测试，不会导致系统的状态恶化到出现特别耗时的质量问题的程度。

- 每日构建
- 检查失败的构建
- 每天进行冒烟测试
- 冒烟测试需要与时俱进
- 实现每日构建和冒烟测试的自动化
- 建立专门负责构建的团队
- 只在有意义时，才向构建提交代码修订。但是不要拖太久提交一次代码修订。
- 要求开发人员在添加到系统前进行冒烟测试
- 为即将添加到构建部分的代码创建一个等待区域。
- 为破坏构建设立惩罚制度
- 早上发版
- 即使顶着压力也要进行每日构建和冒烟测试。

项目规模越大，增量式集成越重要。
技术高管认为每日集成优于持续集成。

# no.30 编程工具

好的工具是程序员最好的朋友。

- 集成开发环境
- 多文件字符串查找替换
- 差异对比工具
- 合并工具
- 源代码美化工具
- 接口文档生成工具
- 模板
- 交叉引用工具
- 类继承层次生成器

分析代码质量
重构源代码。（解释器模式）

- 重构工具
- 结构重构工具
- 代码翻译工具
  版本控制
  数据字典

可执行代码工具

- 产生目标码
- 编译器和链接器
- 构建工具
- 代码库
- 代码生成向导
- 安装
- 预处理器
- 调试
- 测试

代码调优

- 执行性能剖测器
- 汇编代码清单和反汇编器

脚本：一个可自动化重复执行例行任务的工具。
