<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>&#x8fc7;&#x6e21; &amp; &#x52a8;&#x753b;</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

/* From extension ms-toolsai.jupyter */
/* These classnames are inherited from bootstrap, but are present in most notebook renderers */

.alert {
    width: auto;
    padding: 1em;
    margin-top: 1em;
    margin-bottom: 1em;
}
.alert > *:last-child {
    margin-bottom: 0;
}
#preview > .alert:last-child {
    /* Prevent this being set to zero by the default notebook stylesheet */
    padding-bottom: 1em;
}

.alert-success {
    /* Note there is no suitable color available, so we just copy "info" */
    background-color: var(--theme-info-background);
    color: var(--theme-info-foreground);
}
.alert-info {
    background-color: var(--theme-info-background);
    color: var(--theme-info-foreground);
}
.alert-warning {
    background-color: var(--theme-warning-background);
    color: var(--theme-warning-foreground);
}
.alert-danger {
    background-color: var(--theme-error-background);
    color: var(--theme-error-foreground);
}

</style>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
        
    </head>
    <body class="vscode-body vscode-light">
        <h1 id="过渡--动画">过渡 &amp; 动画</h1>
<blockquote>
<p>vue 内置了<code>&lt;transition&gt;</code>组件。可用于处理单组件的动画。<br>
<code>transition-group</code>用于多组件的动画。<br>
设置动画使用更新 class / style 方式</p>
</blockquote>
<h2 id="基于-class-设置动画过渡">基于 class 设置动画（过渡）</h2>
<pre><code class="language-js">&lt;div :<span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;{shake: dp}&quot;</span>&gt;
.<span class="hljs-property">shake</span> {
    <span class="hljs-attr">animation</span>: shake <span class="hljs-number">0.</span>82s cubic-<span class="hljs-title function_">bezier</span>(<span class="hljs-number">0.36</span>, <span class="hljs-number">0.07</span>, <span class="hljs-number">0.19</span>, <span class="hljs-number">0.97</span>) both;
    <span class="hljs-attr">transform</span>: <span class="hljs-title function_">traslate3d</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);
    backface-<span class="hljs-attr">visibility</span>: hidden;
    <span class="hljs-attr">perspective</span>: 1000px;
}
@keyframes shake {
  <span class="hljs-number">10</span>%,
  <span class="hljs-number">90</span>% {
    <span class="hljs-attr">transform</span>: <span class="hljs-title function_">translate3d</span>(-1px, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  }

  <span class="hljs-number">20</span>%,
  <span class="hljs-number">80</span>% {
    <span class="hljs-attr">transform</span>: <span class="hljs-title function_">translate3d</span>(2px, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  }

  <span class="hljs-number">30</span>%,
  <span class="hljs-number">50</span>%,
  <span class="hljs-number">70</span>% {
    <span class="hljs-attr">transform</span>: <span class="hljs-title function_">translate3d</span>(-4px, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  }

  <span class="hljs-number">40</span>%,
  <span class="hljs-number">60</span>% {
    <span class="hljs-attr">transform</span>: <span class="hljs-title function_">translate3d</span>(4px, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  }
}
</code></pre>
<h2 id="基于-style-设置过渡">基于 style 设置过渡</h2>
<pre><code class="language-js">&lt;div :style=<span class="hljs-string">&quot;{backgroudColor: `hsl(${x}, 80%, 50%)`}&quot;</span> @mousemove=<span class="hljs-string">&quot;mmh&quot;</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;movearea&quot;</span>&gt;&lt;/div&gt;
<span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">mmh</span>(<span class="hljs-params">e</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> = e.<span class="hljs-property">clientX</span>
    }
}
.<span class="hljs-property">movearea</span> {
    <span class="hljs-attr">transition</span>: <span class="hljs-number">0.</span>2s background-color ease;
}
</code></pre>
<h2 id="单元素的过渡">单元素的过渡</h2>
<p>为其添加进入、离开的过渡效果。</p>
<pre><code class="language-js">&lt;transition name=<span class="hljs-string">&quot;fade&quot;</span>&gt;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;p&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>&lt;/transition&gt;
.<span class="hljs-property">fade</span>-enter-active,
.<span class="hljs-property">fade</span>-leave-active {
    <span class="hljs-attr">transition</span>: opacity <span class="hljs-number">0.</span>5s ease;
}
.<span class="hljs-property">fade</span>-enter-<span class="hljs-keyword">from</span>,
.<span class="hljs-property">fade</span>-leave-to {
    <span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span>;
}
</code></pre>
<h3 id="过渡-class">过渡 class</h3>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>v-enter-from</td>
<td>进入过渡的开始状态</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>v-enter-active</td>
<td>进入过渡的过渡时</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>v-enter-to</td>
<td>进入过渡的结束状态</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>v-leave-from</td>
<td>离开过渡的开始状态</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>v-leave-active</td>
<td>离开过渡的过渡时</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>v-leave-to</td>
<td>离开过渡的结束状态</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>三个进入，三个离开。<br>
过渡时使用 4 个 v-enter-from v-enter-to v-leave-from v-leave-to<br>
动画时使用 2 个 v-enter-active v-enter-active</p>
<pre><code class="language-js">.<span class="hljs-property">v</span>-enter-active {
    <span class="hljs-attr">animation</span>: an <span class="hljs-number">0.</span>25s;
}
.<span class="hljs-property">v</span>-leave-active {
    <span class="hljs-attr">animation</span>: an <span class="hljs-number">0.</span>2s; reverse;
}
@keyframes an {
    <span class="hljs-number">0</span>% {...}
    <span class="hljs-number">100</span>% {...}
}
</code></pre>
<p>其中<code>v</code>是<code>&lt;transition&gt;</code>的 name 值。</p>
<h3 id="自定义过渡-class-类名">自定义过渡 class 类名</h3>
<p>把自定义类名设置在<code>transtion</code>标签上。</p>
<ul>
<li>enter-from-class</li>
<li>enter-active-class</li>
<li>enter-to-class</li>
<li>leave-from-class</li>
<li>leave-active-class</li>
<li>leave-to-class</li>
</ul>
<h3 id="显性设置过渡时长">显性设置过渡时长</h3>
<pre><code class="language-js">&lt;transition :duration=<span class="hljs-string">&quot;250&quot;</span>&gt;...&lt;/transition&gt;
</code></pre>
<h3 id="过渡的-js-钩子">过渡的 js 钩子</h3>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>before-enter</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>enter(dom, done)</td>
<td>需要使用 done 调用回调</td>
<td></td>
<td></td>
</tr>
<tr>
<td>after-enter</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>enter-cancelled</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>before-leave</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>leave(dom, done)</td>
<td>需要使用 done 调用回调</td>
<td></td>
<td></td>
</tr>
<tr>
<td>after-leave</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>leave-cancelled</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>相较于类名多了 2 个取消</p>
<h3 id="初始渲染过渡">初始渲染过渡</h3>
<pre><code class="language-js">&lt;transition appear&gt;...&lt;/transition&gt;
</code></pre>
<h3 id="过渡模式">过渡模式</h3>
<ul>
<li>in-out 先执行进入过渡，再执行离开过渡。</li>
<li>out-in 先执行离开过渡，再执行进入过渡。<br>
若不设置 mode，则不同元素的进入、离开是同时的。</li>
</ul>
<pre><code class="language-js"><span class="hljs-comment">// 先出再进</span>
&lt;transition name=<span class="hljs-string">&quot;fade&quot;</span> mode=<span class="hljs-string">&quot;out-in&quot;</span>&gt;&lt;/transition&gt;
</code></pre>
<h3 id="多组件之间过渡">多组件之间过渡</h3>
<p>问题渲染其中一个。</p>
<pre><code class="language-js">&lt;transition name=<span class="hljs-string">&quot;fade&quot;</span> mode=<span class="hljs-string">&quot;out-in&quot;</span>&gt;
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">&quot;view&quot;</span> /&gt;</span></span>
&lt;/transition&gt;
</code></pre>
<h3 id="跳过-css-检测">跳过 css 检测</h3>
<p><code>:css=&quot;false&quot;</code></p>
<ul>
<li>可提高性能。</li>
<li>避免过渡过程中受到 css 规则的意外影响。</li>
</ul>
<h2 id="列表过渡">列表过渡</h2>
<p><code>&lt;transition-group&gt;</code></p>
<ul>
<li>使用 tag 设置元素标签。</li>
<li>内部元素需要使用 key 标明唯一性。</li>
<li>css 过渡类会应用于其内部的元素。</li>
<li>过渡模式不可用。</li>
</ul>
<pre><code class="language-js">&lt;transition-groupt name=<span class="hljs-string">&quot;list&quot;</span> tag=<span class="hljs-string">&quot;p&quot;</span>&gt;
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in items&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>
&lt;/transition-groupt&gt;
</code></pre>
<h3 id="列表的移动过渡">列表的移动过渡</h3>
<p>改变定位时使用<code>v-move</code>类设置样式</p>
<pre><code class="language-js">&lt;transition-group name=<span class="hljs-string">&quot;list&quot;</span> tag=<span class="hljs-string">&quot;ul&quot;</span>&gt;
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in items&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
&lt;/transition-group&gt;
.<span class="hljs-property">list</span>-move {
    <span class="hljs-attr">transition</span>: transform <span class="hljs-number">0.</span>8s ease;
}
</code></pre>
<h3 id="过渡钩子">过渡钩子</h3>
<p><code>&lt;transition&gt;</code>的过渡钩子函数同样适用于<code>&lt;transition-group&gt;</code></p>
<h3 id="动态过渡">动态过渡</h3>
<pre><code class="language-js">&lt;transition :name=<span class="hljs-string">&quot;transitionName&quot;</span>&gt;...&lt;/transition&gt;
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">transition-group</span> <span class="hljs-attr">:name</span>=<span class="hljs-string">&quot;transitionName&quot;</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">transition-group</span>&gt;</span></span>
</code></pre>
<h2 id="复用过渡">复用过渡</h2>
<p>把<code>&lt;transition&gt;</code>/<code>&lt;transition-group&gt;</code>做成容器组件。</p>
<pre><code class="language-js"><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;comp-name&#x27;</span>, {
    <span class="hljs-attr">template</span>: <span class="hljs-string">`
        &lt;transition
            name=&quot;tn&quot;
            mode=&quot;out-in&quot;
            @before-enter=&quot;beforeEnterHandler&quot;
            @after-enter=&quot;afterEnterHandler&quot;
        &gt;
            &lt;slot /&gt;
        &lt;/transition&gt;
    `</span>,
    <span class="hljs-attr">methods</span>: {
        <span class="hljs-title function_">beforeEnterHandler</span>(<span class="hljs-params">dom</span>) {...},
        <span class="hljs-title function_">afterEnterHandler</span>(<span class="hljs-params">dom</span>) {...}
    }
})
</code></pre>
<h2 id="状态过渡">状态过渡</h2>
<h2 id="动画性能">动画性能</h2>
<ul>
<li>transform / opacity 不会触发浏览器重绘。</li>
<li>perspective / backface-visibility / transform 会让浏览器知道需要使用硬件加速。</li>
</ul>
<h2 id="如何开发动画">如何开发动画</h2>
<ul>
<li>时长，一般使用 0.25s。结束动画比开始动画要短。</li>
</ul>
<h2 id="常用的动画库">常用的动画库</h2>
<ul>
<li>gsap (greensock)</li>
<li>title</li>
<li>title</li>
<li>title</li>
<li>title</li>
<li>title</li>
<li>title</li>
</ul>

        <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
        
    </body>
    </html>