<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>


    </style>
  </head>
  <body>
    <button onclick="btClickHandler()">click button</button>
    <script>
      let clog = console.log
      class Observable {
        constructor(fn) {
          this.fn = fn
          this.subscriber = new Subscriber(this)
        }
        subscribe(cb) {
          this.cb = cb
          this.fn(this.subscriber)
        }
      }
      class Subscriber {
        constructor(observable) {
          this.observable = observable
        }
        next(x) {
          this.observable.cb(x)
        }
      }
      let ob = new Observable((sub) => {
        sub.next('hi')
        sub.next('hi1')
        sub.next('hi2')
        sub.next('hi3')
      })
      ob.subscribe((x) => {
        clog(x)
      })
      let btClickHandler = () => {
        clog('lss')
        ob.subscribe((x) => {
          clog(x)
        })
      }
    </script>
  </body>
</html>

<!--
  后记
  自定义标签不具有默认样式。
  感觉自定义标签不好用
    样式无法做到避免冲突。若结合css-module/scope可能解决此问题。
    需要严格操作dom
    何时重新渲染
  
 -->