<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>introduction</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
        
    </head>
    <body class="vscode-body vscode-light">
        <h1 id="introduction">introduction</h1>
<h2 id="overview">overview</h2>
<blockquote>
<p>把若干小片 js 代码打包成为一个指定规范的大段 js 文件。<br>
可打包为多种规范。<br>
支持 stdin 输入（esbuild 也支持）<br>
选项级 cli &gt; rollup.config.js<br>
推荐使用 esm 规范的 rollup.config.js<br>
该团队未做随便扩张 rollup 的功能。让 rollup 只做 rollup 的事。插件做插件的事。在产品级做到了单一原则。难得呀！<br>
它的 loader 是使用 plugin 实现的。<br>
plugin 用于加载文件<br>
output.plugin 用于输出是的插件<br>
没有 loader<br>
支持 cli、js、配置文件</p>
</blockquote>
<h2 id="feature">feature</h2>
<ul>
<li>把小段代码打包成指定格式的大段代码</li>
<li>代码分割（动态引入）</li>
<li>feature2</li>
</ul>
<h2 id="install">install</h2>
<p><code>npm i -g rollup</code></p>
<h2 id="quick-start">quick start</h2>
<pre><code class="language-shell">rollup --help
</code></pre>
<p>若需求是是：入口为<code>main.js</code>，打包为<code>bundle.js</code>，规范是<code>iife</code>。则可以这样写</p>
<pre><code class="language-shell">rollup main.js -o bundle.js -f iife # 打包iife规范，方便浏览器使用。
rollup main.js -o bundle.js -f cjs  # 打包为cjs规范，方便node使用。
<span class="hljs-meta prompt_"># </span><span class="language-bash">commonjs 规范</span>
rollup main.js -o bundle.js -f umd --name &quot;myBundle&quot;
<span class="hljs-meta prompt_"># </span><span class="language-bash">umd 规范。</span>
<span class="hljs-meta prompt_"># </span><span class="language-bash">规范是umd。在browser/node.js中都可使用。</span>
</code></pre>
<p><code>-o</code>表示输出的文件。
<code>-f</code>表示输出的格式。</p>
<h2 id="为什么使用-rollup">为什么使用 rollup</h2>
<p>在 es6 前。每段 js 代码都是独立的，无法与其它 js 代码联系起来。在 es6 之后，可以使用<code>import / export</code>输入/输出。可它仍有缺点：只能运行在现代浏览器中。<strong>rollup 可以把小段代码打包成指定格式的大段代码</strong>。支持的格式：esm/commonjs/amd/umd/iife-style/system.</p>
<h2 id="tree-shaking">tree-shaking</h2>
<ul>
<li>按需引入。</li>
<li>只能用于打包 esm 规范的代码（即使用 import）</li>
<li>eg: <code>import {one} from 'pack'</code></li>
<li>rollup 支持静态分析引入的代码，</li>
<li>排除不使用的。判断出哪些方法/变量等被使用过，哪些未被使用。在打包后的代码中使用包含被使用到的。</li>
</ul>
<h2 id="rollup-的使用方式">rollup 的使用方式</h2>
<ul>
<li>cli</li>
<li>rollup.config.js</li>
<li>api</li>
</ul>
<h2 id="兼容性">兼容性</h2>
<ul>
<li>使用插件<code>@rollup/plugin-commonjs</code>引入<code>cjs</code>规范的代码。</li>
</ul>
<h1 id="command-link-interface命令行的用法">command link interface（命令行的用法）</h1>
<p>rollup 可以使用命令行功能。</p>
<h2 id="configuration-files">configuration files</h2>
<p>rollup 的配置文件是可选的。若使用配置文件会更方便，所以推荐使用配置文件。<br>
<strong>配置文件的全量字段</strong>
各字段说明，见下文。</p>
<pre><code class="language-js"><span class="hljs-comment">// rollup.config.js</span>

<span class="hljs-comment">// can be an array (for multiple inputs)</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// core input options</span>
  external,       <span class="hljs-comment">// 排除的文件</span>
  input, <span class="hljs-comment">// conditionally required    入口文件</span>
  plugins,        <span class="hljs-comment">//</span>

  <span class="hljs-comment">// advanced input options</span>
  cache,                      <span class="hljs-comment">// 是否缓存已经打好包的文件</span>
  onwarn,                     <span class="hljs-comment">// 处理warnning的方法</span>
  preserveEntrySignatures,    <span class="hljs-comment">//</span>
  strictDeprecations,

  <span class="hljs-comment">// danger zone</span>
  acorn,
  acornInjectPlugins,
  context,
  moduleContext,
  preserveSymlinks,
  shimMissingExports,
  treeshake,

  <span class="hljs-comment">// experimental</span>
  experimentalCacheExpiry,
  perf,

  <span class="hljs-comment">// required (can be an array, for multiple outputs)</span>
  <span class="hljs-attr">output</span>: {
    <span class="hljs-comment">// core output options</span>
    dir,          <span class="hljs-comment">// 指定输出目录名。当输出多个文件时必须设置此配置项。</span>
    file,         <span class="hljs-comment">// 指定输出文件名。输出单个文件时使用。</span>
    format, <span class="hljs-comment">// required</span>
    globals,       <span class="hljs-comment">// 指定变量名。format为umd/iife时必填。</span>
    name,           <span class="hljs-comment">// 指定全局变量名。iife/umd时必填。</span>
    plugins,          <span class="hljs-comment">// 指定用于输出的插件</span>
                      <span class="hljs-comment">// 用于如何写打包后的代码。</span>

    <span class="hljs-comment">// advanced output options</span>
    assetFileNames,   <span class="hljs-comment">// 定义资源的文件名。</span>
    banner,           <span class="hljs-comment">//</span>
    chunkFileNames,   <span class="hljs-comment">// 定义chunk的文件名。在代码分割时会用到</span>
    compact,          <span class="hljs-comment">// 是否压缩</span>
    entryFileNames,   <span class="hljs-comment">// 指定入口文件名</span>
    extend,           <span class="hljs-comment">// 是否扩展全局变量。</span>
    footer,           <span class="hljs-comment">//</span>
    hoistTransitiveImports,   <span class="hljs-comment">// 当打包多个chunk时，是否把引入文件提升到入口chunk中引入。</span>
    inlineDynamicImports,     <span class="hljs-comment">// 当遇到动态引入时是否打包为chunk</span>
    interop,
    intro,
    manualChunks,
    minifyInternalExports,    <span class="hljs-comment">// 允许创建自定义共享公共块。</span>
    outro,
    paths,                  <span class="hljs-comment">// 映射external的moduleId到url上。</span>
    preserveModules,
    preserveModulesRoot,
    sourcemap,
    sourcemapBaseUrl,
    sourcemapExcludeSources,
    sourcemapFile,
    sourcemapPathTransform,
    validate,

    <span class="hljs-comment">// danger zone</span>
    amd,
    esModule,
    <span class="hljs-built_in">exports</span>,
    externalLiveBindings,
    freeze,
    indent,
    namespaceToStringTag,
    noConflict,
    preferConst,
    sanitizeFileName,
    strict,
    systemNullSetters

    dynamicImportInCjs      <span class="hljs-comment">// 是否在指定输出规范为cjs时把import的引入方式改为require.</span>
    generatedCode           <span class="hljs-comment">// 指定输出的es版本</span>
      arrowFunctions        <span class="hljs-comment">// 是否允许输出时使用箭头函数</span>
      constBindings         <span class="hljs-comment">// 是否把var改变为const</span>
      objectShorthand       <span class="hljs-comment">// 是否使用短方式在对象上</span>
      preset                <span class="hljs-comment">// 设置presets</span>
      reservedNamesAsProps  <span class="hljs-comment">// 是否在对象上的保留字段上使用引号</span>
      symbols               <span class="hljs-comment">// 是否允许输出symbol</span>
  },

  <span class="hljs-attr">watch</span>: {
    buildDelay,
    chokidar,
    clearScreen,
    skipWrite,
    exclude,
    include
  },

  makeAbsoluteExternalsRelative,     <span class="hljs-comment">// 是否把绝对路径转换为相对路径。</span>
};
</code></pre>
<h3 id="demo-最基本的配置">demo 最基本的配置</h3>
<pre><code class="language-js"><span class="hljs-comment">// rollup.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">input</span>: <span class="hljs-string">&#x27;src/main.js&#x27;</span>,
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">file</span>: <span class="hljs-string">&#x27;bundle.js&#x27;</span>,
    <span class="hljs-attr">format</span>: <span class="hljs-string">&#x27;cjs&#x27;</span>,
  },
}

<span class="hljs-comment">// 在配置文件中有几个必填项</span>
<span class="hljs-comment">// export default {</span>
<span class="hljs-comment">// 	input:      // 入口</span>
<span class="hljs-comment">// 	output: {   // 出口</span>
<span class="hljs-comment">// 		file:   // 文件名 // 非必填。但是不设置会得不到打包后的文件。</span>
<span class="hljs-comment">// 		format: // 输出文件的格式</span>
<span class="hljs-comment">// 	}</span>
<span class="hljs-comment">// }</span>
</code></pre>
<h3 id="demo-多个输出">demo 多个输出</h3>
<pre><code class="language-js"><span class="hljs-comment">// rollup.config.js (building more than one bundle)</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [
  {
    <span class="hljs-attr">input</span>: <span class="hljs-string">&#x27;main-a.js&#x27;</span>,
    <span class="hljs-attr">output</span>: {
      <span class="hljs-attr">file</span>: <span class="hljs-string">&#x27;dist/bundle-a.js&#x27;</span>,
      <span class="hljs-attr">format</span>: <span class="hljs-string">&#x27;cjs&#x27;</span>,
    },
  },
  {
    <span class="hljs-attr">input</span>: <span class="hljs-string">&#x27;main-b.js&#x27;</span>,
    <span class="hljs-attr">output</span>: [
      {
        <span class="hljs-attr">file</span>: <span class="hljs-string">&#x27;dist/bundle-b1.js&#x27;</span>,
        <span class="hljs-attr">format</span>: <span class="hljs-string">&#x27;cjs&#x27;</span>,
      },
      {
        <span class="hljs-attr">file</span>: <span class="hljs-string">&#x27;dist/bundle-b2.js&#x27;</span>,
        <span class="hljs-attr">format</span>: <span class="hljs-string">&#x27;es&#x27;</span>,
      },
    ],
  },
]
</code></pre>
<h3 id="demo-异步输出配置文件">demo 异步输出配置文件</h3>
<pre><code class="language-js"><span class="hljs-comment">// rollup.config.js</span>
<span class="hljs-keyword">import</span> fetch <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;node-fetch&#x27;</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/some-remote-service-or-file-which-returns-actual-config&#x27;</span>)
<span class="hljs-comment">// or</span>
<span class="hljs-comment">// export default Promise.all([fetch(&#x27;get-config-1&#x27;), fetch(&#x27;get-config-2&#x27;)]);</span>
</code></pre>
<h3 id="demo-动态配置">demo 动态配置</h3>
<pre><code class="language-shell">rollup main.js --config --configDebug
</code></pre>
<pre><code class="language-js"><span class="hljs-comment">// rollup.config.js</span>
<span class="hljs-keyword">import</span> defaultConfig <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./rollup.default.config.js&#x27;</span>
<span class="hljs-keyword">import</span> debugConfig <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./rollup.debug.config.js&#x27;</span>
<span class="hljs-comment">// commandLineArgs可得到命令行中的数据</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> (commandLineArgs) =&gt; {
  <span class="hljs-keyword">if</span> (commandLineArgs.<span class="hljs-property">configDebug</span> === <span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">return</span> debugConfig
  }
  <span class="hljs-keyword">return</span> defaultConfig
}
</code></pre>
<ul>
<li>推荐使用 esm 规范编写配置文件。</li>
<li>一般命名为<code>rollup.config.js</code></li>
<li>当<code>output</code>是数组时，可打包出多个相应输出配置的包。</li>
<li>当使用异步配置项时，rollup 会生成一个<code>Promise&lt;object|array&gt;</code>。也可以使用<code>Promise.all([...])</code>处理成为异步的配置文件。</li>
<li>rollup 使用<code>-c</code>/<code>--config</code>指定配置文件。</li>
<li>若返回一个方法。参数是命令行中的参数组成的对象，返回值是配置文件格式的对象。</li>
</ul>
<p>配置文件的编写规范：</p>
<table>
<thead>
<tr>
<th></th>
<th>esm</th>
<th>cjs</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>推荐</td>
<td>支持</td>
<td></td>
</tr>
<tr>
<td></td>
<td>需要转换</td>
<td>不需要转换</td>
<td></td>
</tr>
<tr>
<td>命名</td>
<td><code>*.js</code></td>
<td><code>*.cjs</code></td>
<td></td>
</tr>
<tr>
<td>输出</td>
<td>输出默认对象</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>方便 esm 文件共享</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>node v13+ 且 <code>*.mjs</code>，则不转换。但是入口文件必须是 esm 规范</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Esm 比 cjs 好用这么多。请推荐使用 esm。</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="配置文件的基本结构">配置文件的基本结构</h3>
<pre><code class="language-js"><span class="hljs-comment">// 待测试</span>
<span class="hljs-keyword">import</span> { nodeResolve } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@rollup/plugin-node-resolve&#x27;</span>
<span class="hljs-keyword">import</span> commonjs <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@rollup/plugin-commonjs&#x27;</span>
<span class="hljs-keyword">import</span> { terser } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rollup-plugin-terser&#x27;</span>
<span class="hljs-comment">// import cssnano from &#x27;cssnano&#x27;</span>
<span class="hljs-keyword">import</span> postcss <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rollup-plugin-postcss&#x27;</span>
<span class="hljs-keyword">import</span> autoprefixer <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;autoprifixer&#x27;</span>
<span class="hljs-keyword">import</span> typescript <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@rollup/plugin-typescript&#x27;</span>
<span class="hljs-keyword">import</span> strip <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@rollup/plugin-strip&#x27;</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [
  {
    <span class="hljs-attr">input</span>: [<span class="hljs-string">&#x27;index.js&#x27;</span>],
    <span class="hljs-attr">output</span>: [
      {
        <span class="hljs-attr">dir</span>: <span class="hljs-string">&#x27;dist&#x27;</span>,
        <span class="hljs-comment">// entryFileNames: [name].js,</span>
        <span class="hljs-attr">assetFileNames</span>: <span class="hljs-string">&#x27;[name]-[hash][extend]&#x27;</span>,
        <span class="hljs-attr">chunkFileNames</span>: <span class="hljs-string">&#x27;[name]-[hash].js&#x27;</span>,
        <span class="hljs-attr">format</span>: <span class="hljs-string">&#x27;esm&#x27;</span>,
        <span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">compact</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">terser</span>()],
        <span class="hljs-attr">preserveModules</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 保留目录结构</span>
        <span class="hljs-attr">preserveModulesRoot</span>: <span class="hljs-string">&#x27;src&#x27;</span>, <span class="hljs-comment">// 将保留的模块目录结构放在根目录下该路径下</span>
      },
      <span class="hljs-comment">// {</span>
      <span class="hljs-comment">//   dir: &#x27;dist&#x27;,</span>
      <span class="hljs-comment">//   format: &#x27;umd&#x27;,</span>
      <span class="hljs-comment">//   name: &#x27;umdModuleName&#x27;,</span>
      <span class="hljs-comment">//   sourcemap: true,</span>
      <span class="hljs-comment">// }</span>
    ],
    <span class="hljs-attr">external</span>: [<span class="hljs-string">&#x27;react&#x27;</span>], <span class="hljs-comment">// 指定不打包的包。</span>
    <span class="hljs-attr">plugins</span>: [
      <span class="hljs-title function_">nodeResolve</span>(), <span class="hljs-comment">// 加载node_modules是的文件</span>
      <span class="hljs-title function_">commonjs</span>(), <span class="hljs-comment">// 使rollup支持打包cjs规范的代码</span>
      <span class="hljs-title function_">postcss</span>({
        <span class="hljs-comment">// v3版本的postcss插件</span>
        <span class="hljs-attr">plugins</span>: [
          <span class="hljs-title function_">autoprefixer</span>(),
          <span class="hljs-comment">// cssnano() // 压缩css文件</span>
        ],
        <span class="hljs-comment">// extract: &#x27;css/index.css&#x27; // 抽离为单独的css文件</span>
      }),
      <span class="hljs-title function_">typescript</span>(), <span class="hljs-comment">// 使其可打包ts文件</span>
      <span class="hljs-title function_">strip</span>(), <span class="hljs-comment">// 删除开发、测试代码。</span>
    ],
  },
]
</code></pre>
<h3 id="differences-to-the-javascript-api">differences to the javascript api</h3>
<p>这里没说清楚<br>
与 js api 的不同。
配置文件不能被其他打包工具去结合使用。现在可以在脚本中以编程方式调用 rollup.</p>
<table>
<thead>
<tr>
<th>config</th>
<th>js api</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><code>rollup.rollup(obj)</code>其参数必须是<code>object</code>，且不能包裹<code>promise/function</code>。</td>
<td></td>
</tr>
<tr>
<td>不再需要配置项组成的数组，需要为每一个<code>inputOptions</code>执行一次<code>rollup.rollup</code></td>
<td></td>
<td></td>
</tr>
<tr>
<td>忽略<code>output</code>，请使用<code>bundle.generate(outputOptions)</code>/<code>bundle.write(outputOptions)</code>生成每个生成项。</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="loading-a-configuration-from-a-node-package">loading a configuration from a Node package</h3>
<p>rollup 支持从<code>node_modules</code>中加载配置项文件。</p>
<pre><code>rollup --config node:my-special-config
# 先尝试加载`rollup-config-my-special-config`，若失败则加载`my-special-config`
</code></pre>
<h3 id="使用不需要转换的配置文件">使用不需要转换的配置文件</h3>
<p>默认 rollup 希望得到<code>esm</code>规范的配置文件。然后在需要它时把它转换为<code>commonjs</code>规范的文件。转换过程很快。也可以基于 esm 规范很容易分享代码。若希望使用 commonjs 规范的配置文件，请设置扩展名为<code>*.cjs</code>。</p>
<pre><code>// rollup.config.csj
module.exports = {
	input:..
	output: {...}
}
</code></pre>
<h3 id="command-line-flag">command line flag</h3>
<pre><code>-c, --config &lt;filename&gt;     Use this config file (if argument is used but value
                              is unspecified, defaults to rollup.config.js)
							指定配置文件
-d, --dir &lt;dirname&gt;         Directory for chunks (if absent, prints to stdout)
-e, --external &lt;ids&gt;        Comma-separate list of module IDs to exclude
-f, --format &lt;format&gt;       Type of output (amd, cjs, es, iife, umd, system)
-g, --globals &lt;pairs&gt;       Comma-separate list of `moduleID:Global` pairs
-h, --help                  Show this help message
-i, --input &lt;filename&gt;      Input (alternative to &lt;entry file&gt;)
							指定入口文件
-m, --sourcemap             Generate sourcemap (`-m inline` for inline map)
							生成sourcemap的方式
-n, --name &lt;name&gt;           Name for UMD export
-o, --file &lt;output&gt;         Single output file (if absent, prints to stdout)
							基于 --dir
-p, --plugin &lt;plugin&gt;       Use the plugin specified (may be repeated)
							指定插件
-v, --version               Show version number
-w, --watch                 Watch files in bundle and rebuild on changes
							启动观察模式
--amd.id &lt;id&gt;               ID for AMD module (default is anonymous)
--amd.autoId                Generate the AMD ID based off the chunk name
--amd.basePath &lt;prefix&gt;     Path to prepend to auto generated AMD ID
--amd.define &lt;name&gt;         Function to use in place of `define`
--assetFileNames &lt;pattern&gt;  Name pattern for emitted assets
--banner &lt;text&gt;             Code to insert at top of bundle (outside wrapper)
--chunkFileNames &lt;pattern&gt;  Name pattern for emitted secondary chunks
							代码块的名字的第二部分模式
--compact                   Minify wrapper code
--context &lt;variable&gt;        Specify top-level `this` value
							代码中的上下文环境变量
--entryFileNames &lt;pattern&gt;  Name pattern for emitted entry chunks
							xxx不会
--environment &lt;values&gt;      Settings passed to config file (see example)
							为process.env对象设置值
--no-esModule               Do not add __esModule property
--exports &lt;mode&gt;            Specify export mode (auto, default, named, none)
--extend                    Extend global variable defined by --name
--no-externalLiveBindings   Do not generate code to support live bindings
--failAfterWarnings         Exit with an error if the build produced warnings
							在构建时若出错警告是否当作错误处理
--footer &lt;text&gt;             Code to insert at end of bundle (outside wrapper)
--no-freeze                 Do not freeze namespace objects
--no-hoistTransitiveImports Do not hoist transitive imports into entry chunks
--no-indent                 Don't indent result
							不缩进
--no-interop                Do not include interop block
							不会
--inlineDynamicImports      Create single bundle when using dynamic imports
--intro &lt;text&gt;              Code to insert at top of bundle (inside wrapper)
--minifyInternalExports     Force or disable minification of internal exports
--namespaceToStringTag      Create proper `.toString` methods for namespaces
--noConflict                Generate a noConflict method for UMD globals
--outro &lt;text&gt;              Code to insert at end of bundle (inside wrapper)
--preferConst               Use `const` instead of `var` for exports
--no-preserveEntrySignatures Avoid facade chunks for entry points
--preserveModules           Preserve module structure
							维持模块结构
--preserveModulesRoot       Put preserved modules under this path at root level
--preserveSymlinks          Do not follow symlinks when resolving files
--shimMissingExports        Create shim variables for missing exports
--silent                    Don't print warnings
							不输出警告
--sourcemapExcludeSources   Do not include source code in source maps
--sourcemapFile &lt;file&gt;      Specify bundle position for source maps
--stdin=ext                 Specify file extension used for stdin input
              支持标准输入的扩展名
--no-stdin                  Do not read &quot;-&quot; from stdin
--no-strict                 Don't emit `&quot;use strict&quot;;` in the generated modules
--strictDeprecations        Throw errors for deprecated features
--systemNullSetters         Replace empty SystemJS setters with `null`
--no-treeshake              Disable tree-shaking optimisations
							不使用treeshake
--no-treeshake.annotations  Ignore pure call annotations
--no-treeshake.moduleSideEffects Assume modules have no side-effects
--no-treeshake.propertyReadSideEffects Ignore property access side-effects
--no-treeshake.tryCatchDeoptimization Do not turn off try-catch-tree-shaking
--no-treeshake.unknownGlobalSideEffects Assume unknown globals do not throw
--waitForBundleInput        Wait for bundle input files
							等待所有入口都可以得到时打包
--watch.buildDelay &lt;number&gt; Throttle watch rebuilds
--no-watch.clearScreen      Do not clear the screen when rebuilding
							观察模式时不清屏
--watch.skipWrite           Do not write files to disk when watching
--watch.exclude &lt;files&gt;     Exclude files from being watched
--watch.include &lt;files&gt;     Limit watching to specified files
--watch.onStart &lt;cmd&gt;       Shell command to run on `&quot;START&quot;` event
              cmd 是回调命令
--watch.onBundleStart &lt;cmd&gt; Shell command to run on `&quot;BUNDLE_START&quot;` event
--watch.onBundleEnd &lt;cmd&gt;   Shell command to run on `&quot;BUNDLE_END&quot;` event
--watch.onEnd &lt;cmd&gt;         Shell command to run on `&quot;END&quot;` event
--watch.onError &lt;cmd&gt;       Shell command to run on `&quot;ERROR&quot;` event
--validate                  Validate output


--configPlugin              可能它也是一个选项。用于指定配置文件的插件。
</code></pre>
<h3 id="demo--p---plugin">demo -p, --plugin</h3>
<pre><code class="language-shell">rollup -i input.js -f es -p ./my-plugin.js
rollup -i input.js -f es -p @rollup/plugin-node-resolve
rollup -i input.js -f es -p node-resolve
rollup -i input.js -f es -p &#x27;{transform: (c, i) =&gt; `\n${c}`}&#x27;
rollup -i input.js -f es -p commonjs,json
rollup -i input.js -f es -p &#x27;terser={output: {beautify: true, indent_level: 2}}&#x27;
</code></pre>
<h3 id="demo---configplugin">demo --configPlugin</h3>
<pre><code class="language-shell">rollup --config rollup.config.js --configPlugin @rollup/plugin-typescript
</code></pre>
<pre><code class="language-json"><span class="hljs-comment">// tsconfig.json</span>
<span class="hljs-punctuation">{</span>
	...
	<span class="hljs-attr">&quot;include&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;src/**/*&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;rollup.config.js&quot;</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h1 id="js-api">js api</h1>
<p>为 node.js 使用 rollup</p>
<pre><code class="language-ts">rollup.<span class="hljs-title function_">rollup</span>(inputOptions) =&gt; <span class="hljs-title class_">Promise</span>&lt;bundle&gt;
rollup.<span class="hljs-title function_">watch</span>(watchOptions) =&gt; watcher
watcher.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;event&#x27;</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {...})

<span class="hljs-keyword">interface</span> inputOptions {
  <span class="hljs-comment">// core input options</span>
  external;
  input; <span class="hljs-comment">// conditionally required</span>
  plugins;
  <span class="hljs-comment">// advanced input options</span>
  cache;
  onwarn;
  preserveEntrySignatures;
  strictDeprecations;
  <span class="hljs-comment">// danger zone</span>
  acorn;
  acornInjectPlugins;
  context;
  moduleContext;
  preserveSymlinks;
  shimMissingExports;
  treeshake;
  <span class="hljs-comment">// experimental</span>
  experimentalCacheExpiry;
  perf;
}
<span class="hljs-keyword">interface</span> outputOptions {
  <span class="hljs-comment">// core output options</span>
  dir,
  file,
  format, <span class="hljs-comment">// required</span>
  globals,
  name,
  plugins,
  <span class="hljs-comment">// advanced output options</span>
  assetFileNames,
  banner,
  chunkFileNames,
  compact,
  entryFileNames,
  extend,
  externalLiveBindings,
  footer,
  hoistTransitiveImports,
  inlineDynamicImports,
  interop,
  intro,
  manualChunks,
  minifyInternalExports,
  outro,
  paths,
  preserveModules,
  preserveModulesRoot,
  sourcemap,
  sourcemapExcludeSources,
  sourcemapFile,
  sourcemapPathTransform,
  validate,
  <span class="hljs-comment">// danger zone</span>
  amd,
  esModule,
  <span class="hljs-built_in">exports</span>,
  freeze,
  indent,
  namespaceToStringTag,
  noConflict,
  preferConst,
  sanitizeFileName,
  strict,
  systemNullSetters
}
<span class="hljs-keyword">interface</span> watchOptions {
}
<span class="hljs-keyword">interface</span> bundle {

}
</code></pre>
<h2 id="usage">usage</h2>
<pre><code class="language-js"><span class="hljs-keyword">import</span> { rollup } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rollup&#x27;</span>
<span class="hljs-title function_">rollup</span>(inputOptions).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">bundle</span>) =&gt;</span> {
  bundle.<span class="hljs-title function_">generate</span>(outputOptions) <span class="hljs-comment">// 在内存中生成打包结果</span>
  bundle.<span class="hljs-title function_">write</span>() <span class="hljs-comment">// 把打包结果写入硬盘</span>
})
</code></pre>
<h2 id="type-类型">type 类型</h2>
<pre><code class="language-ts">rollup.<span class="hljs-property">rollup</span>: <span class="hljs-function">(<span class="hljs-params">inputOptions</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;bundle&gt;
<span class="hljs-keyword">type</span> inputOption = {
  <span class="hljs-comment">// core input options</span>
  external,
  input, <span class="hljs-comment">// conditionally required</span>
  plugins,

  <span class="hljs-comment">// advanced input options</span>
  cache,
  onwarn,
  preserveEntrySignatures,
  strictDeprecations,

  <span class="hljs-comment">// danger zone</span>
  acorn,
  acornInjectPlugins,
  context,
  moduleContext,
  preserveSymlinks,
  shimMissingExports,
  treeshake,

  <span class="hljs-comment">// experimental</span>
  experimentalCacheExpiry,
  perf
};

<span class="hljs-keyword">type</span> outputOptions = {
  <span class="hljs-comment">// core output options</span>
  dir,
  file,
  format, <span class="hljs-comment">// required</span>
  globals,
  name,
  plugins,

  <span class="hljs-comment">// advanced output options</span>
  assetFileNames,
  banner,
  chunkFileNames,
  compact,
  entryFileNames,
  extend,
  externalLiveBindings,
  footer,
  hoistTransitiveImports,
  inlineDynamicImports,
  interop,
  intro,
  manualChunks,
  minifyInternalExports,
  outro,
  paths,
  preserveModules,
  preserveModulesRoot,
  sourcemap,
  sourcemapExcludeSources,
  sourcemapFile,
  sourcemapPathTransform,
  validate,

  <span class="hljs-comment">// danger zone</span>
  amd,
  esModule,
  <span class="hljs-built_in">exports</span>,
  freeze,
  indent,
  namespaceToStringTag,
  noConflict,
  preferConst,
  sanitizeFileName,
  strict,
  systemNullSetters
};
<span class="hljs-keyword">const</span> watchOptions = {
  ...inputOptions,
  <span class="hljs-attr">output</span>: [outputOptions],
  <span class="hljs-attr">watch</span>: {
    buildDelay,
    chokidar,
    clearScreen,
    skipWrite,
    exclude,
    include
  }
};
</code></pre>
<h2 id="watch">watch</h2>
<pre><code class="language-js"><span class="hljs-keyword">let</span> rollup = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;rollup&#x27;</span>)
<span class="hljs-keyword">let</span> watchOptions = {...}
<span class="hljs-keyword">let</span> watcher = rollup.<span class="hljs-title function_">watch</span>(watchOptions)
watcher.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;event&#x27;</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
	<span class="hljs-comment">// event.code</span>
	<span class="hljs-comment">// 	START			全部开始</span>
	<span class="hljs-comment">// 	BUNDLE_START	开始打包每个个体文件</span>
	<span class="hljs-comment">// 	BUNDLE_END		打包完每一个个体文件</span>
	<span class="hljs-comment">// 	END				全部结束</span>
	<span class="hljs-comment">// 	ERROR			打包时出现的错误</span>
})
watcher.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;event&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">{result}</span>) =&gt;</span> {
	<span class="hljs-keyword">if</span> (result) {
		result.<span class="hljs-title function_">close</span>()
	}
})
watcher.<span class="hljs-title function_">close</span>() <span class="hljs-comment">// 停止监听</span>
</code></pre>
<h1 id="es-module-syntax">es module syntax</h1>
<p>就正常使用就行。</p>
<h1 id="tutorial">tutorial</h1>
<p>示例请看 setup</p>
<h2 id="using-plugins">using plugins</h2>
<pre><code class="language-shell">npm i -D @rollup/plugin-json
</code></pre>
<pre><code class="language-js"><span class="hljs-keyword">import</span> { version } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../package.json&#x27;</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;version&#x27;</span>, version)
}
</code></pre>
<pre><code class="language-js"><span class="hljs-comment">// rollup.config.js</span>
<span class="hljs-keyword">import</span> json <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@rollup/plugin-json&#x27;</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">input</span>: <span class="hljs-string">&#x27;src/main.js&#x27;</span>,
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">file</span>: <span class="hljs-string">&#x27;bundle.js&#x27;</span>,
    <span class="hljs-attr">format</span>: <span class="hljs-string">&#x27;cjs&#x27;</span>,
  },
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">json</span>()],
}
</code></pre>
<pre><code class="language-shell">npm run build
<span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-string">&quot;build&quot;</span>: <span class="hljs-string">&quot;rollup -c&quot;</span></span>
</code></pre>
<h3 id="常用插件列表">常用插件列表</h3>
<ul>
<li><a href="https://github.com/rollup/awesome">awesome</a> 功能功能功能功能</li>
<li><a href="">@rollup/plugin-node-resolve</a> 找到外部依赖（在 node_modules 中找）</li>
<li><a href="">@rollup/plugin-commonjs</a> 把 cjs 转换为 esm。使 rollup 可以打包 cjs 规范的代码</li>
<li><a href="">@rollup/plugin-babel</a> 转换 js 代码的版本</li>
<li><a href="">@rollup/plugin-json</a> 把 json 转换为 esm</li>
<li><a href="">@rollup/plugin-data-uri</a> 以 data uri 的形式引入资源</li>
<li><a href="">@rollup/plugin-html</a> 创建一个 html 文件为 rollup 打包服务</li>
<li><a href="">@rollup/plugin-typescript</a> 使 rollup 可以打包 ts 文件。</li>
<li><a href="">@rollup/plugin-yaml</a> yarm =&gt; esm</li>
<li><a href="">@rollup/plugin-strip</a> 用于从代码中删除 debugger 语句和函数。包括 assert.equal、console.log 等等。</li>
<li><a href="">rollup-plugin-postcss</a> 默认支持 scss、less、stylus</li>
<li><a href="">autoprefixer</a> 添加样式的前缀</li>
<li><a href="">cssnano</a> css 压缩。有压缩功能的包太多了，不一定非要用它。</li>
<li><a href="">@rollup/plugin-strip</a> 删除 debugger/console.log/assert.equal 等</li>
<li><a href="">rollup-plugin-node-externals</a> 好像是排出打包项的插件</li>
<li><a href="">@rollup/plugin-node-resolve</a> 功能功能功能功能</li>
<li><a href="">@rollup/plugin-node-resolve</a> 功能功能功能功能</li>
<li><a href="">@rollup/plugin-node-resolve</a> 功能功能功能功能</li>
</ul>
<h2 id="代码分割">代码分割</h2>
<p>动态引入、多入口会触发代码分割。</p>
<ul>
<li>自动代码分割</li>
<li><code>output.manualChunks</code></li>
<li><code>output.chunkFileNames</code></li>
<li><code>output.entryFileNames</code></li>
<li>动态加载时分使用代码分割</li>
</ul>
<pre><code class="language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
  <span class="hljs-title function_">import</span>(<span class="hljs-string">&#x27;./file.js&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">{ <span class="hljs-keyword">default</span>: file }</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(file)
  })
}
</code></pre>
<h1 id="插件"><a href="/builder/rollup/plugins/index.html">插件</a></h1>
<p>插件部分的文档写的一团糟。还得让我去看 rollup 的源码、插件的源码。</p>
<ul>
<li>Rollup 的运行逻辑是什么，如何与插件合作？</li>
<li>插件 demo 的功能是什么？定出具体代码。</li>
<li>各钩子的运行顺序。</li>
<li>各钩子的 api（包括：参数、返回值）</li>
</ul>
<h1 id="plugin-development">plugin development</h1>
<h1 id="frequently-asked-questions"><a href="/builder/rollup/qas.html">frequently asked questions</a></h1>
<h1 id="integrating-rollup-with-other-tools">integrating rollup with other tools</h1>
<h2 id="同等依赖">同等依赖</h2>
<p>external 不打包</p>
<h2 id="babel">babel</h2>
<h2 id="gulp">gulp</h2>
<h2 id="deno">deno</h2>
<h1 id="big-list-of-options">big list of options</h1>
<h2 id="core-functionality">core functionality</h2>
<h3 id="external">external</h3>
<pre><code class="language-ts"><span class="hljs-title class_">Type</span>: (<span class="hljs-built_in">string</span> | <span class="hljs-title class_">RegExp</span>)[] | <span class="hljs-title class_">RegExp</span> | <span class="hljs-built_in">string</span> | <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span>, parentId: <span class="hljs-built_in">string</span>, isResolved: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> <span class="hljs-built_in">boolean</span>
<span class="hljs-attr">CLI</span>: -e/--external &lt;external-id,another-external-id,...&gt;
</code></pre>
<p>指定不打包的包</p>
<h3 id="input">input</h3>
<pre><code class="language-ts"><span class="hljs-title class_">Type</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">string</span> [] | { [<span class="hljs-attr">entryName</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span> }
<span class="hljs-attr">CLI</span>: -i/--input &lt;filename&gt;
</code></pre>
<p>指定入口文件。若为多入口，则多出口。</p>
<h3 id="outputdir">output.dir</h3>
<pre><code class="language-ts"><span class="hljs-title class_">Type</span>: <span class="hljs-built_in">string</span>
<span class="hljs-attr">CLI</span>: -d / --dir&lt;dirname&gt;
</code></pre>
<p>出口的目录</p>
<h3 id="outputfile">output.file</h3>
<pre><code class="language-ts"><span class="hljs-title class_">Type</span>: <span class="hljs-built_in">string</span>
<span class="hljs-attr">CLI</span>: -o / --file&lt;filename&gt;
</code></pre>
<p>出口的文件</p>
<h3 id="outputformat">output.format</h3>
<pre><code class="language-ts"><span class="hljs-title class_">Type</span>: <span class="hljs-built_in">string</span>
<span class="hljs-attr">CLI</span>: -f/--format &lt;formatspecifier&gt;
<span class="hljs-title class_">Default</span>: <span class="hljs-string">&quot;es&quot;</span>
<span class="hljs-attr">enum</span>: amd
      cjs
      es      适用于bundler / <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript">
        别名为 esm / <span class="hljs-variable language_">module</span>
      iife      自执行函数
      umd
      system    原生格式 <span class="hljs-title class_">Native</span> format <span class="hljs-keyword">of</span> the <span class="hljs-title class_">SystemJS</span> loader (<span class="hljs-attr">alias</span>: systemjs)
        别名为 systemjs
</span></span></code></pre>
<p>指定输出规范</p>
<h3 id="outputglobals">output.globals</h3>
<pre><code class="language-ts"><span class="hljs-title class_">Type</span>: { [<span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span> } | (<span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">string</span>)
<span class="hljs-attr">CLI</span>: -g/--globals &lt;external-<span class="hljs-attr">id</span>:variableName,another-external-<span class="hljs-attr">id</span>:anotherVariableName,...&gt;
</code></pre>
<p>指定包的全局变量名。用于 umd/iife 规范。</p>
<pre><code class="language-js"><span class="hljs-comment">// 告诉rollup全局变量是jquery，并且与全局变量$相等。</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  ...
  <span class="hljs-attr">external</span>: [<span class="hljs-string">&#x27;jquery&#x27;</span>],
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">format</span>: <span class="hljs-string">&#x27;iife&#x27;</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;myBundle&quot;</span>,
    <span class="hljs-attr">globals</span>: {
      <span class="hljs-attr">jquery</span>: <span class="hljs-string">&#x27;$&#x27;</span>
    }
  }
}
</code></pre>
<h3 id="outputname"><a href="http://output.name">output.name</a></h3>
<pre><code class="language-ts"><span class="hljs-title class_">Type</span>: <span class="hljs-built_in">string</span>
<span class="hljs-attr">CLI</span>: -n / --name&lt;variableName&gt;
</code></pre>
<p>指定全局变量名。
iife/umd 的必填项。</p>
<h3 id="outputplugins">output.plugins</h3>
<pre><code class="language-ts"><span class="hljs-title class_">Type</span>: <span class="hljs-title class_">OutputPlugin</span> | (<span class="hljs-title class_">OutputPlugin</span> | <span class="hljs-built_in">void</span>)[]
</code></pre>
<p>输出时使用的插件</p>
<h3 id="plugin">plugin</h3>
<pre><code class="language-ts"><span class="hljs-title class_">Type</span>: <span class="hljs-title class_">Plugin</span> | (<span class="hljs-title class_">Plugin</span> | <span class="hljs-built_in">void</span>)[]
</code></pre>
<p>引入时使用的插件</p>
<h2 id="advanced-funcitonality">advanced funcitonality</h2>
<h3 id="cache">cache</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: <span class="hljs-title class_">RollupCache</span> | <span class="hljs-literal">false</span>
</code></pre>
<p>在观察模式时会默认使用缓存。</p>
<h3 id="makeabsoluteexternalsrelative">makeAbsoluteExternalsRelative</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean | <span class="hljs-string">&#x27;ifRelativeSource&#x27;</span>
<span class="hljs-attr">CLI</span>: --makeAbsoluteExternalsRelative / --no - makeAbsoluteExternalsRelative
<span class="hljs-title class_">Default</span>: <span class="hljs-string">&#x27;ifRelativeSource&#x27;</span>
</code></pre>
<p>是否把绝对路径转换为相对路径。
'ifRelativeSource' 把使用相对链接引入的文件使用相对链接输出。</p>
<h3 id="maxparallelfileops">maxParallelFileOps</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: number
<span class="hljs-attr">CLI</span>: --maxParallelFileOps &lt;number&gt;
<span class="hljs-title class_">Default</span>: <span class="hljs-number">20</span>
</code></pre>
<p>最大并行打包的文件数量。</p>
<h3 id="onwarn">onwarn</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: <span class="hljs-function">(<span class="hljs-params">warning: RollupWarning, defaultHandler: (warning: string | RollupWarning) =&gt; <span class="hljs-keyword">void</span></span>) =&gt;</span> <span class="hljs-keyword">void</span>;
</code></pre>
<p>提供一个方法处理警告信息。若使用<code>--silent</code>则不显示警告。</p>
<h3 id="outputassetfilenames">output.assetFileNames</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: string | (<span class="hljs-function">(<span class="hljs-params">assetInfo: AssetInfo</span>) =&gt;</span> string)
<span class="hljs-attr">CLI</span>: --assetFileNames &lt;pattern&gt;
<span class="hljs-title class_">Default</span>: <span class="hljs-string">&quot;assets/[name]-[hash][extname]&quot;</span>
</code></pre>
<p>设置资源的文件名</p>
<ul>
<li>[extname] 有点开头的扩展名</li>
<li>[ext] 无点开头的扩展名</li>
<li>[hash] 基于文件名与内容的散列值</li>
<li>[name] 不包含扩展名的文件名</li>
</ul>
<h3 id="outputbanneroutputfooter">output.banner/output.footer</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: string | (<span class="hljs-function">() =&gt;</span> string | <span class="hljs-title class_">Promise</span>&lt;string&gt;)
<span class="hljs-attr">CLI</span>: --banner/--footer &lt;text&gt;
</code></pre>
<p>为文件内容设置前缀、后缀。</p>
<h3 id="outputchunkfilenames">output.chunkFileNames</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: string | (<span class="hljs-function">(<span class="hljs-params">chunkInfo: ChunkInfo</span>) =&gt;</span> string)
<span class="hljs-attr">CLI</span>: --chunkFileNames &lt;pattern&gt;
<span class="hljs-title class_">Default</span>: <span class="hljs-string">&quot;[name]-[hash].js&quot;</span>
</code></pre>
<p>指定使用代码分割时文件的模板。</p>
<ul>
<li>[format] 在 output 指定渲染格式</li>
<li>[hash] 基于内容和内容的依赖的散列值</li>
<li>[name] chuck 的名字</li>
</ul>
<h3 id="outputcompact">output.compact</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --compact / --no - compact
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<p>是否压缩</p>
<h3 id="outputdynamicimportincjs">output.dynamicImportInCjs</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --dynamicImportInCjs / --no - dynamicImportInCjs
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<p>现在的 node 版本已经支持 import 引入方式了。<br>
是否在指定输出规范为 cjs 时把 import 的引入方式改为 require</p>
<h3 id="outputentryfilenames">output.entryFileNames</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: string | (<span class="hljs-function">(<span class="hljs-params">chunkInfo: ChunkInfo</span>) =&gt;</span> string)
<span class="hljs-attr">CLI</span>: --entryFileNames &lt;pattern&gt;
<span class="hljs-title class_">Default</span>: <span class="hljs-string">&quot;[name].js&quot;</span>
</code></pre>
<p>指定入口文件的文件名模板</p>
<ul>
<li>[format]</li>
<li>[hash]</li>
<li>[name]</li>
</ul>
<h3 id="outputextend">output.extend</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --extend / --no - extend
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<p>是否扩展全局变量。</p>
<pre><code class="language-js"><span class="hljs-comment">// true</span>
<span class="hljs-variable language_">global</span>.<span class="hljs-property">name</span> = <span class="hljs-variable language_">global</span>.<span class="hljs-property">name</span> || {}
<span class="hljs-comment">// false</span>
<span class="hljs-variable language_">global</span>.<span class="hljs-property">name</span> = {} <span class="hljs-comment">// 可能被覆盖（重写）</span>
</code></pre>
<h3 id="outputexternalimportassertions">output.externalImportAssertions</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --externalImportAssertions / --no - externalImportAssertions
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<p>当输出格式为 esm 时，是否添加引入断言。</p>
<h3 id="outputgeneratedcode">output.generatedCode</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: <span class="hljs-string">&quot;es5&quot;</span> | <span class="hljs-string">&quot;es2015&quot;</span> | { arrowFunctions?: boolean, constBindings?: boolean, objectShorthand?: boolean, preset?: <span class="hljs-string">&quot;es5&quot;</span> | <span class="hljs-string">&quot;es2015&quot;</span>, reservedNamesAsProps?: boolean, symbols?: boolean }
<span class="hljs-attr">CLI</span>: --generatedCode &lt;preset&gt;
<span class="hljs-title class_">Default</span>: <span class="hljs-string">&quot;es5&quot;</span>
</code></pre>
<p>设置生成代码的版本</p>
<ul>
<li>es5 不使用 es2015+的功能。如箭头函数。</li>
<li>es2015 使用 es2015 版本</li>
</ul>
<h3 id="outputgeneratedcodearrowfunctions">output.generatedCode.arrowFunctions</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --generatedCode.<span class="hljs-property">arrowFunctions</span> / --no - generatedCode.<span class="hljs-property">arrowFunctions</span>
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<h3 id="outputgeneratedcodeconstbindings">output.generatedCode.constBindings</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --generatedCode.<span class="hljs-property">constBindings</span> / --no - generatedCode.<span class="hljs-property">constBindings</span>
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<h3 id="outputgeneratedcodeobjectshorthand">output.generatedCode.objectShorthand</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --generatedCode.<span class="hljs-property">objectShorthand</span> / --no - generatedCode.<span class="hljs-property">objectShorthand</span>
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<p>是否使用对象短赋值。</p>
<h3 id="outputgeneratedcodepreset">output.generatedCode.preset</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: <span class="hljs-string">&quot;es5&quot;</span> | <span class="hljs-string">&quot;es2015&quot;</span>
<span class="hljs-attr">CLI</span>: --generatedCode &lt;value&gt;
</code></pre>
<h3 id="outputgeneratedcodereservednamesasprops">output.generatedCode.reservedNamesAsProps</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --generatedCode.<span class="hljs-property">reservedNamesAsProps</span> / --no -
  generatedCode.<span class="hljs-property">reservedNamesAsProps</span>
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<h3 id="outputgeneratedcodesymbols">output.generatedCode.symbols</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --generatedCode.<span class="hljs-property">symbols</span> / --no - generatedCode.<span class="hljs-property">symbols</span>
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<p>是否可以使用 symbol</p>
<h3 id="outputhoisttransitiveimports">output.hoistTransitiveImports</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --hoistTransitiveImports / --no - hoistTransitiveImports
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<p>当打包多个 chunk 时，是否把引入文件提升到入口 chunk 中引入。</p>
<h3 id="outputinlinedynamicimports">output.inlineDynamicImports</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --inlineDynamicImports/--no-inlineDynamicImports <span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<p>当遇到动态引入时是否打包为 chunk</p>
<h3 id="outputinterop">output.interop</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: <span class="hljs-string">&quot;auto&quot;</span> | <span class="hljs-string">&quot;esModule&quot;</span> | <span class="hljs-string">&quot;default&quot;</span> | <span class="hljs-string">&quot;defaultOnly&quot;</span> | boolean | (<span class="hljs-function">(<span class="hljs-params">id: string</span>) =&gt;</span> <span class="hljs-string">&quot;auto&quot;</span> | <span class="hljs-string">&quot;esModule&quot;</span> | <span class="hljs-string">&quot;default&quot;</span> | <span class="hljs-string">&quot;defaultOnly&quot;</span> | boolean)
<span class="hljs-attr">CLI</span>: --interop &lt;value&gt;
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<p>不会</p>
<h3 id="outputintrooutputoutro">output.intro/output.outro</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: string | (<span class="hljs-function">() =&gt;</span> string | <span class="hljs-title class_">Promise</span>&lt;string&gt;)
<span class="hljs-attr">CLI</span>: --intro/--outro &lt;text&gt;
</code></pre>
<p>设置代码。</p>
<h3 id="outputmanualchunks">output.manualChunks</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: { [<span class="hljs-attr">chunkAlias</span>: string]: string[] } | (<span class="hljs-function">(<span class="hljs-params">id: string, {getModuleInfo, getModuleIds}</span>) =&gt;</span> string | <span class="hljs-keyword">void</span>)
</code></pre>
<p>允许创建自定义共享公共块。</p>
<h3 id="outputminifyinternalexports">output.minifyInternalExports</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --minifyInternalExports/--no-minifyInternalExports
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span> <span class="hljs-keyword">for</span> formats es and system or <span class="hljs-keyword">if</span> output.<span class="hljs-property">compact</span> is <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span> otherwise
</code></pre>
<p>es / system / output.compact: true 时使用一个字母输出变量。</p>
<h3 id="outputpaths">output.paths</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: { [<span class="hljs-attr">id</span>: string]: string } | (<span class="hljs-function">(<span class="hljs-params">id: string</span>) =&gt;</span> string)
</code></pre>
<p>映射 external 的 moduleId 到 url 上。</p>
<pre><code class="language-js"><span class="hljs-attr">external</span>: [<span class="hljs-string">&#x27;d3&#x27;</span>],
<span class="hljs-attr">output</span>: {
  ...
  <span class="hljs-attr">paths</span>: {
    <span class="hljs-attr">d3</span>: <span class="hljs-string">&#x27;https://d3js.org/d3.v4.min&#x27;</span>
  }
}
</code></pre>
<h3 id="outputpreservemodules">output.preserveModules</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --preserveModules / --no - preserveModules
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<p>尽量使用原本文件名。保持原来的目录结构。（rollup 默认会创建较小数量的 chunck）</p>
<h3 id="outputpreservemodulesroot">output.preserveModulesRoot</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: string
<span class="hljs-attr">CLI</span>: --preserveModulesRoot &lt;directory-name&gt;
</code></pre>
<p>保留目录结构的所有模块在的目录。</p>
<h3 id="outputsourcemap">output.sourcemap</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean | <span class="hljs-string">&#x27;inline&#x27;</span> | <span class="hljs-string">&#x27;hidden&#x27;</span>
<span class="hljs-attr">CLI</span>: -m / --sourcemap / --no - sourcemap
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<h3 id="outputsourcemapbaseurl">output.sourcemapBaseUrl</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: string
<span class="hljs-attr">CLI</span>: --sourcemapBaseUrl &lt;url&gt;
</code></pre>
<p>默认生成 sourcemap 的相对 url.</p>
<h3 id="outputsourcemapexcludesources">output.sourcemapExcludeSources</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --sourcemapExcludeSources / --no - sourcemapExcludeSources
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<h3 id="outputsourcemapfile">output.sourcemapFile</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: string
<span class="hljs-attr">CLI</span>: --sourcemapFile &lt;file-name-<span class="hljs-keyword">with</span>-path&gt;
</code></pre>
<h3 id="outputsourcemappathtransform">output.sourcemapPathTransform</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: <span class="hljs-function">(<span class="hljs-params">relativeSourcePath: string, sourcemapPath: string</span>) =&gt;</span> string
</code></pre>
<h3 id="outputvalidate">output.validate</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --validate / --no - validate
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<h3 id="preserveentrysignatures">preserveEntrySignatures</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: <span class="hljs-string">&quot;strict&quot;</span> | <span class="hljs-string">&quot;allow-extension&quot;</span> | <span class="hljs-string">&quot;exports-only&quot;</span> | <span class="hljs-literal">false</span>
<span class="hljs-attr">CLI</span>: --preserveEntrySignatures &lt;strict|allow-extension&gt;/--no-preserveEntrySignatures
<span class="hljs-title class_">Default</span>: <span class="hljs-string">&quot;strict&quot;</span>
</code></pre>
<h3 id="strictdeprecations">strictDeprecations</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --strictDeprecations / --no - strictDeprecations
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<h2 id="danger-zone">danger zone</h2>
<h3 id="acorn">acorn</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: <span class="hljs-title class_">AcornOptions</span>
</code></pre>
<h3 id="acorninjectplugins">acornInjectPlugins</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: <span class="hljs-title class_">AcornPluginFunction</span> | <span class="hljs-title class_">AcornPluginFunction</span>[]
</code></pre>
<h3 id="context">context</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: string
<span class="hljs-attr">CLI</span>: --context &lt;contextVariable&gt;
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">undefined</span>
</code></pre>
<h3 id="modulecontext">moduleContext</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: (<span class="hljs-function">(<span class="hljs-params">id: string</span>) =&gt;</span> string) | { [<span class="hljs-attr">id</span>: string]: string }
</code></pre>
<h3 id="outputamd">output.amd</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: { id?: string, autoId?: boolean, basePath?: string, define?: string }
</code></pre>
<h3 id="outputamdid"><a href="http://output.amd.id">output.amd.id</a></h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: string
<span class="hljs-attr">CLI</span>: --amd.<span class="hljs-property">id</span> &lt;amdId&gt;
</code></pre>
<h3 id="outputamdautoid">output.amd.autoId</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --amd.<span class="hljs-property">autoId</span>
</code></pre>
<h3 id="outputamdbasepath">output.amd.basePath</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: string
<span class="hljs-attr">CLI</span>: --amd.<span class="hljs-property">basePath</span>
</code></pre>
<h3 id="outputamddefine">output.amd.define</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: string
<span class="hljs-attr">CLI</span>: --amd.<span class="hljs-property">define</span> &lt;defineFunctionName&gt;
</code></pre>
<h3 id="outputesmodule">output.esModule</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --esModule / --no - esModule
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<h3 id="outputexports">output.exports</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: string
<span class="hljs-attr">CLI</span>: --<span class="hljs-built_in">exports</span> &lt;exportMode&gt;
<span class="hljs-title class_">Default</span>: <span class="hljs-string">&#x27;auto&#x27;</span>
</code></pre>
<h3 id="outputexternallivebindings">output.externalLiveBindings</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --externalLiveBindings / --no - externalLiveBindings
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<h3 id="outputfreeze">output.freeze</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --freeze / --no - freeze
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<h3 id="outputindent">output.indent</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean | string
<span class="hljs-attr">CLI</span>: --indent / --no - indent
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<h3 id="outputnoconflict">output.noConflict</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --noConflict / --no - noConflict
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<h3 id="outputpreferconst">output.preferConst</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --preferConst / --no - preferConst
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<h3 id="outputsanitizefilename">output.sanitizeFileName</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean | <span class="hljs-function">(<span class="hljs-params">string</span>) =&gt;</span> string
<span class="hljs-attr">CLI</span>: --sanitizeFileName/no-sanitizeFileName <span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<h3 id="outputstrict">output.strict</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --strict / --no - strict
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<h3 id="outputsystemnullsetters">output.systemNullSetters</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --systemNullSetters / --no - systemNullSetters
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<h3 id="preservesymlinks">preserveSymlinks</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --preserveSymlinks
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<h3 id="shimmissingexports">shimMissingExports</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --shimMissingExports / --no - shimMissingExports
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<h3 id="treeshake">treeshake</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean | <span class="hljs-string">&quot;smallest&quot;</span> | <span class="hljs-string">&quot;safest&quot;</span> | <span class="hljs-string">&quot;recommended&quot;</span> | { annotations?: boolean, correctVarValueBeforeDeclaration?: boolean, moduleSideEffects?: <span class="hljs-title class_">ModuleSideEffectsOption</span>, preset?: <span class="hljs-string">&quot;smallest&quot;</span> | <span class="hljs-string">&quot;safest&quot;</span> | <span class="hljs-string">&quot;recommended&quot;</span>, propertyReadSideEffects?: boolean | <span class="hljs-string">&#x27;always&#x27;</span>, tryCatchDeoptimization?: boolean, unknownGlobalSideEffects?: boolean }
<span class="hljs-attr">CLI</span>: --treeshake/--no-treeshake
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<h3 id="treeshakeannotations">treeshake.annotations</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --treeshake.<span class="hljs-property">annotations</span> / --no - treeshake.<span class="hljs-property">annotations</span>
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<h3 id="treeshakecorrectvarvaluebeforedeclaration">treeshake.correctVarValueBeforeDeclaration</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --treeshake.<span class="hljs-property">correctVarValueBeforeDeclaration</span> / --no -
  treeshake.<span class="hljs-property">correctVarValueBeforeDeclaration</span>
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<h3 id="treeshakemodulesideeffects">treeshake.moduleSideEffects</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean | <span class="hljs-string">&quot;no-external&quot;</span> | string[] | <span class="hljs-function">(<span class="hljs-params">id: string, external: boolean</span>) =&gt;</span> boolean
<span class="hljs-attr">CLI</span>: --treeshake.<span class="hljs-property">moduleSideEffects</span>/--no-treeshake.<span class="hljs-property">moduleSideEffects</span>/--treeshake.<span class="hljs-property">moduleSideEffects</span> no-external
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<h3 id="treeshakepreset">treeshake.preset</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: <span class="hljs-string">&quot;smallest&quot;</span> | <span class="hljs-string">&quot;safest&quot;</span> | <span class="hljs-string">&quot;recommended&quot;</span>
<span class="hljs-attr">CLI</span>: --treeshake &lt;value&gt;
</code></pre>
<h3 id="treeshakepropertyreadsideeffects">treeshake.propertyReadSideEffects</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean | <span class="hljs-string">&#x27;always&#x27;</span>
<span class="hljs-attr">CLI</span>: --treeshake.<span class="hljs-property">propertyReadSideEffects</span> / --no -
  treeshake.<span class="hljs-property">propertyReadSideEffects</span>
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<h3 id="treeshaketrycatchdeoptimization">treeshake.tryCatchDeoptimization</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --treeshake.<span class="hljs-property">tryCatchDeoptimization</span> / --no -
  treeshake.<span class="hljs-property">tryCatchDeoptimization</span>
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<h3 id="treeshakeunknownglobalsideeffects">treeshake.unknownGlobalSideEffects</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --treeshake.<span class="hljs-property">unknownGlobalSideEffects</span> / --no -
  treeshake.<span class="hljs-property">unknownGlobalSideEffects</span>
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<h2 id="experimental-options">experimental options</h2>
<h3 id="experimentalcacheexpiry">experimentalCacheExpiry</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: number
<span class="hljs-attr">CLI</span>: --experimentalCacheExpiry &lt;numberOfRuns&gt;
<span class="hljs-title class_">Default</span>: <span class="hljs-number">10</span>
</code></pre>
<h3 id="perf">perf</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --perf / --no - perf
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>
<h2 id="watch-options">Watch options</h2>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: { buildDelay?: number, chokidar?: <span class="hljs-title class_">ChokidarOptions</span>, clearScreen?: boolean, exclude?: string, include?: string, skipWrite?: boolean } | <span class="hljs-literal">false</span>
<span class="hljs-title class_">Default</span>: {}
</code></pre>
<h3 id="watchbuilddelay">watch.buildDelay</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: number
<span class="hljs-attr">CLI</span>: --watch.<span class="hljs-property">buildDelay</span> &lt;number&gt;
<span class="hljs-title class_">Default</span>: <span class="hljs-number">0</span>
</code></pre>
<h3 id="watchchokidar">watch.chokidar</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: <span class="hljs-title class_">ChokidarOptions</span>
</code></pre>
<h3 id="watchclearscreen">watch.clearScreen</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --watch.<span class="hljs-property">clearScreen</span> / --no - watch.<span class="hljs-property">clearScreen</span>
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">true</span>
</code></pre>
<h3 id="watchexclude">watch.exclude</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: string | <span class="hljs-title class_">RegExp</span> | (string | <span class="hljs-title class_">RegExp</span>)[]
<span class="hljs-attr">CLI</span>: --watch.<span class="hljs-property">exclude</span> &lt;files&gt;
</code></pre>
<h3 id="watchinclude">watch.include</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: string | <span class="hljs-title class_">RegExp</span> | (string | <span class="hljs-title class_">RegExp</span>)[]
<span class="hljs-attr">CLI</span>: --watch.<span class="hljs-property">include</span> &lt;files&gt;
</code></pre>
<h3 id="watchskipwrite">watch.skipWrite</h3>
<pre><code class="language-js"><span class="hljs-title class_">Type</span>: boolean
<span class="hljs-attr">CLI</span>: --watch.<span class="hljs-property">skipWrite</span> / --no - watch.<span class="hljs-property">skipWrite</span>
<span class="hljs-title class_">Default</span>: <span class="hljs-literal">false</span>
</code></pre>

        <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
        
    </body>
    </html>