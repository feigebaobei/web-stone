<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><style>body {
  max-width: 980px;
  border: 1px solid #ddd;
  outline: 1300px solid #fff;
  margin: 16px auto;
}

body .markdown-body
{
  padding: 45px;
}

@font-face {
  font-family: fontawesome-mini;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

.markdown-body {
  font-family: sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #333333;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  word-wrap: break-word;
}

.markdown-body a {
  background: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline: 0;
}

.markdown-body b,
.markdown-body strong {
  font-weight: bold;
}

.markdown-body mark {
  background: #ff0;
  color: #000;
  font-style: italic;
  font-weight: bold;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
.markdown-body sup {
  top: -0.5em;
}
.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

.markdown-body img {
  border: 0;
}

.markdown-body hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

.markdown-body pre {
  overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

.markdown-body input {
  color: inherit;
  font: inherit;
  margin: 0;
}

.markdown-body html input[disabled] {
  cursor: default;
}

.markdown-body input {
  line-height: normal;
}

.markdown-body input[type="checkbox"] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body .codehilitetable,
.markdown-body .highlighttable {
  border: 0;
  border-spacing: 0;
}

.markdown-body .codehilitetable tr,
.markdown-body .highlighttable {
  border: 0;
}

.markdown-body .codehilitetable pre,
.markdown-body .codehilitetable div.codehilite,
.markdown-body .highlighttable pre,
.markdown-body .highlighttable div.highlight {
  margin: 0;
}

.markdown-body .linenos,
.markdown-body .code,
.markdown-body .codehilitetable td,
.markdown-body .highlighttable td {
  border: 0;
  padding: 0;
}

.markdown-body td:not(.linenos) .linenodiv {
  padding: 0 !important;
}

.markdown-body .code {
  width: 100%;
}

.markdown-body .linenos div pre,
.markdown-body .linenodiv pre,
.markdown-body .linenodiv {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-left-radius: 3px;
  -webkit-border-bottom-left-radius: 3px;
  -moz-border-radius-topleft: 3px;
  -moz-border-radius-bottomleft: 3px;
  border-top-left-radius: 3px;
  border-bottom-left-radius: 3px;
}

.markdown-body .code div pre,
.markdown-body .code div {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 3px;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 3px;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 3px;
}

.markdown-body * {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body input {
  font: 13px Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
  line-height: 1.4;
}

.markdown-body a {
  color: #4183c4;
  text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:focus,
.markdown-body a:active {
  text-decoration: underline;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #ddd;
}

.markdown-body hr:before,
.markdown-body hr:after {
  display: table;
  content: " ";
}

.markdown-body hr:after {
  clear: both;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 15px;
  margin-bottom: 15px;
  line-height: 1.1;
}

.markdown-body h1 {
  font-size: 30px;
}

.markdown-body h2 {
  font-size: 21px;
}

.markdown-body h3 {
  font-size: 16px;
}

.markdown-body h4 {
  font-size: 14px;
}

.markdown-body h5 {
  font-size: 12px;
}

.markdown-body h6 {
  font-size: 11px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ul,
.markdown-body ol {
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre,
.markdown-body samp {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body kbd {
  background-color: #e7e7e7;
  background-image: -moz-linear-gradient(#fefefe, #e7e7e7);
  background-image: -webkit-linear-gradient(#fefefe, #e7e7e7);
  background-image: linear-gradient(#fefefe, #e7e7e7);
  background-repeat: repeat-x;
  border-radius: 2px;
  border: 1px solid #cfcfcf;
  color: #000;
  padding: 3px 5px;
  line-height: 10px;
  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  display: inline-block;
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body .headerlink {
  font: normal 400 16px fontawesome-mini;
  vertical-align: middle;
  margin-left: -16px;
  float: left;
  display: inline-block;
  text-decoration: none;
  opacity: 0;
  color: #333;
}

.markdown-body .headerlink:focus {
  outline: none;
}

.markdown-body h1 .headerlink {
  margin-top: 0.8rem;
}

.markdown-body h2 .headerlink,
.markdown-body h3 .headerlink {
  margin-top: 0.6rem;
}

.markdown-body h4 .headerlink {
  margin-top: 0.2rem;
}

.markdown-body h5 .headerlink,
.markdown-body h6 .headerlink {
  margin-top: 0;
}

.markdown-body .headerlink:hover,
.markdown-body h1:hover .headerlink,
.markdown-body h2:hover .headerlink,
.markdown-body h3:hover .headerlink,
.markdown-body h4:hover .headerlink,
.markdown-body h5:hover .headerlink,
.markdown-body h6:hover .headerlink {
  opacity: 1;
  text-decoration: none;
}

.markdown-body h1 {
  padding-bottom: 0.3em;
  font-size: 2.25em;
  line-height: 1.2;
  border-bottom: 1px solid #eee;
}

.markdown-body h2 {
  padding-bottom: 0.3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

.markdown-body h3 {
  font-size: 1.5em;
  line-height: 1.43;
}

.markdown-body h4 {
  font-size: 1.25em;
}

.markdown-body h5 {
  font-size: 1em;
}

.markdown-body h6 {
  font-size: 1em;
  color: #777;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body .admonition {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: 4px;
  padding: 0;
  margin: 16px 0;
  background-color: #e7e7e7;
  border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body blockquote {
  padding: 0 15px;
  color: #777;
  border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}

.markdown-body table th {
  font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #ddd;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

.markdown-body img {
  max-width: 100%;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body code,
.markdown-body samp {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .codehilite,
.markdown-body .highlight {
  margin-bottom: 16px;
}

.markdown-body .codehilite pre,
.markdown-body .highlight pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border-radius: 3px;
}

.markdown-body .codehilite pre,
.markdown-body .highlight pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
  content: normal;
}

/* Admonition */
.markdown-body .admonition {
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  position: relative;
  border-radius: 3px;
  border: 1px solid #e0e0e0;
  border-left: 6px solid #333;
  padding: 10px 10px 10px 30px;
}

.markdown-body .admonition table {
  color: #333;
}

.markdown-body .admonition p {
  padding: 0;
}

.markdown-body .admonition-title {
  font-weight: bold;
  margin: 0;
}

.markdown-body .admonition>.admonition-title {
  color: #333;
}

.markdown-body .attention>.admonition-title {
  color: #a6d796;
}

.markdown-body .caution>.admonition-title {
  color: #d7a796;
}

.markdown-body .hint>.admonition-title {
  color: #96c6d7;
}

.markdown-body .danger>.admonition-title {
  color: #c25f77;
}

.markdown-body .question>.admonition-title {
  color: #96a6d7;
}

.markdown-body .note>.admonition-title {
  color: #d7c896;
}

.markdown-body .admonition:before,
.markdown-body .attention:before,
.markdown-body .caution:before,
.markdown-body .hint:before,
.markdown-body .danger:before,
.markdown-body .question:before,
.markdown-body .note:before {
  font: normal normal 16px fontawesome-mini;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  line-height: 1.5;
  color: #333;
  position: absolute;
  left: 0;
  top: 0;
  padding-top: 10px;
  padding-left: 10px;
}

.markdown-body .admonition:before {
  content: "\f056\00a0";
  color: 333;
}

.markdown-body .attention:before {
  content: "\f058\00a0";
  color: #a6d796;
}

.markdown-body .caution:before {
  content: "\f06a\00a0";
  color: #d7a796;
}

.markdown-body .hint:before {
  content: "\f05a\00a0";
  color: #96c6d7;
}

.markdown-body .danger:before {
  content: "\f057\00a0";
  color: #c25f77;
}

.markdown-body .question:before {
  content: "\f059\00a0";
  color: #96a6d7;
}

.markdown-body .note:before {
  content: "\f040\00a0";
  color: #d7c896;
}

.markdown-body .admonition::after {
  content: normal;
}

.markdown-body .attention {
  border-left: 6px solid #a6d796;
}

.markdown-body .caution {
  border-left: 6px solid #d7a796;
}

.markdown-body .hint {
  border-left: 6px solid #96c6d7;
}

.markdown-body .danger {
  border-left: 6px solid #c25f77;
}

.markdown-body .question {
  border-left: 6px solid #96a6d7;
}

.markdown-body .note {
  border-left: 6px solid #d7c896;
}

.markdown-body .admonition>*:first-child {
  margin-top: 0 !important;
}

.markdown-body .admonition>*:last-child {
  margin-bottom: 0 !important;
}

/* progress bar*/
.markdown-body .progress {
  display: block;
  width: 300px;
  margin: 10px 0;
  height: 24px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #ededed;
  position: relative;
  box-shadow: inset -1px 1px 3px rgba(0, 0, 0, .1);
}

.markdown-body .progress-label {
  position: absolute;
  text-align: center;
  font-weight: bold;
  width: 100%; margin: 0;
  line-height: 24px;
  color: #333;
  text-shadow: 1px 1px 0 #fefefe, -1px -1px 0 #fefefe, -1px 1px 0 #fefefe, 1px -1px 0 #fefefe, 0 1px 0 #fefefe, 0 -1px 0 #fefefe, 1px 0 0 #fefefe, -1px 0 0 #fefefe, 1px 1px 2px #000;
  -webkit-font-smoothing: antialiased !important;
  white-space: nowrap;
  overflow: hidden;
}

.markdown-body .progress-bar {
  height: 24px;
  float: left;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #96c6d7;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .5), inset 0 -1px 0 rgba(0, 0, 0, .1);
  background-size: 30px 30px;
  background-image: -webkit-linear-gradient(
    135deg, rgba(255, 255, 255, .4) 27%,
    transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%,
    transparent 77%, transparent
  );
  background-image: -moz-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -ms-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -o-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
}

.markdown-body .progress-100plus .progress-bar {
  background-color: #a6d796;
}

.markdown-body .progress-80plus .progress-bar {
  background-color: #c6d796;
}

.markdown-body .progress-60plus .progress-bar {
  background-color: #d7c896;
}

.markdown-body .progress-40plus .progress-bar {
  background-color: #d7a796;
}

.markdown-body .progress-20plus .progress-bar {
  background-color: #d796a6;
}

.markdown-body .progress-0plus .progress-bar {
  background-color: #c25f77;
}

.markdown-body .candystripe-animate .progress-bar{
  -webkit-animation: animate-stripes 3s linear infinite;
  -moz-animation: animate-stripes 3s linear infinite;
  animation: animate-stripes 3s linear infinite;
}

@-webkit-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@-moz-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

.markdown-body .gloss .progress-bar {
  box-shadow:
    inset 0 4px 12px rgba(255, 255, 255, .7),
    inset 0 -12px 0 rgba(0, 0, 0, .05);
}

/* MultiMarkdown Critic Blocks */
.markdown-body .critic_mark {
  background: #ff0;
}

.markdown-body .critic_delete {
  color: #c82829;
  text-decoration: line-through;
}

.markdown-body .critic_insert {
  color: #718c00 ;
  text-decoration: underline;
}

.markdown-body .critic_comment {
  color: #8e908c;
  font-style: italic;
}

.markdown-body .headeranchor {
  font: normal normal 16px fontawesome-mini;
  line-height: 1;
  display: inline-block;
  text-decoration: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.headeranchor:before {
  content: '\e157';
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 4px 0.25em -20px;
  vertical-align: middle;
}

/* Media */
@media only screen and (min-width: 480px) {
  .markdown-body {
    font-size:14px;
  }
}

@media only screen and (min-width: 768px) {
  .markdown-body {
    font-size:16px;
  }
}

@media print {
  .markdown-body * {
    background: transparent !important;
    color: black !important;
    filter:none !important;
    -ms-filter: none !important;
  }

  .markdown-body {
    font-size:12pt;
    max-width:100%;
    outline:none;
    border: 0;
  }

  .markdown-body a,
  .markdown-body a:visited {
    text-decoration: underline;
  }

  .markdown-body .headeranchor-link {
    display: none;
  }

  .markdown-body a[href]:after {
    content: " (" attr(href) ")";
  }

  .markdown-body abbr[title]:after {
    content: " (" attr(title) ")";
  }

  .markdown-body .ir a:after,
  .markdown-body a[href^="javascript:"]:after,
  .markdown-body a[href^="#"]:after {
    content: "";
  }

  .markdown-body pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .markdown-body pre,
  .markdown-body blockquote {
    border: 1px solid #999;
    padding-right: 1em;
    page-break-inside: avoid;
  }

  .markdown-body .progress,
  .markdown-body .progress-bar {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .markdown-body .progress {
    border: 1px solid #ddd;
  }

  .markdown-body .progress-bar {
    height: 22px;
    border-right: 1px solid #ddd;
  }

  .markdown-body tr,
  .markdown-body img {
    page-break-inside: avoid;
  }

  .markdown-body img {
    max-width: 100% !important;
  }

  .markdown-body p,
  .markdown-body h2,
  .markdown-body h3 {
    orphans: 3;
    widows: 3;
  }

  .markdown-body h2,
  .markdown-body h3 {
    page-break-after: avoid;
  }
}
</style><style>/*GitHub*/
.highlight {background-color:#fff;color:#333333;}
.highlight .hll {background-color:#ffffcc;}
.highlight .c{color:#999988;font-style:italic}
.highlight .err{color:#a61717;background-color:#e3d2d2}
.highlight .k{font-weight:bold}
.highlight .o{font-weight:bold}
.highlight .cm{color:#999988;font-style:italic}
.highlight .cp{color:#999999;font-weight:bold}
.highlight .c1{color:#999988;font-style:italic}
.highlight .cs{color:#999999;font-weight:bold;font-style:italic}
.highlight .gd{color:#000000;background-color:#ffdddd}
.highlight .ge{font-style:italic}
.highlight .gr{color:#aa0000}
.highlight .gh{color:#999999}
.highlight .gi{color:#000000;background-color:#ddffdd}
.highlight .go{color:#888888}
.highlight .gp{color:#555555}
.highlight .gs{font-weight:bold}
.highlight .gu{color:#800080;font-weight:bold}
.highlight .gt{color:#aa0000}
.highlight .kc{font-weight:bold}
.highlight .kd{font-weight:bold}
.highlight .kn{font-weight:bold}
.highlight .kp{font-weight:bold}
.highlight .kr{font-weight:bold}
.highlight .kt{color:#445588;font-weight:bold}
.highlight .m{color:#009999}
.highlight .s{color:#dd1144}
.highlight .n{color:#333333}
.highlight .na{color:teal}
.highlight .nb{color:#0086b3}
.highlight .nc{color:#445588;font-weight:bold}
.highlight .no{color:teal}
.highlight .ni{color:purple}
.highlight .ne{color:#990000;font-weight:bold}
.highlight .nf{color:#990000;font-weight:bold}
.highlight .nn{color:#555555}
.highlight .nt{color:navy}
.highlight .nv{color:teal}
.highlight .ow{font-weight:bold}
.highlight .w{color:#bbbbbb}
.highlight .mf{color:#009999}
.highlight .mh{color:#009999}
.highlight .mi{color:#009999}
.highlight .mo{color:#009999}
.highlight .sb{color:#dd1144}
.highlight .sc{color:#dd1144}
.highlight .sd{color:#dd1144}
.highlight .s2{color:#dd1144}
.highlight .se{color:#dd1144}
.highlight .sh{color:#dd1144}
.highlight .si{color:#dd1144}
.highlight .sx{color:#dd1144}
.highlight .sr{color:#009926}
.highlight .s1{color:#dd1144}
.highlight .ss{color:#990073}
.highlight .bp{color:#999999}
.highlight .vc{color:teal}
.highlight .vg{color:teal}
.highlight .vi{color:teal}
.highlight .il{color:#009999}
.highlight .gc{color:#999;background-color:#EAF2F5}
</style><title>design-pattern</title></head><body><article class="markdown-body"><h1 id="_1">设计模式<a class="headerlink" href="#_1" title="Permanent link"></a></h1>
<p>创建型
  工厂模式
  单例模式
  原型模式
结构型
  适配器模式
  装饰器模式
  代理模式
  外观模式
  桥接模式
  组合模式
  享元模式
行为型
  策略模式
  模板方法模式
  观察者模式
  迭代器模式
  职责链模式
  模块模式
  命令模式
  备忘录模式
  发布订阅模式
  状态模式
  访问者模式
  中介模式
  解释器模式
  金子模式（可扩展插件的模式）（可插件模式）</p>
<h2 id="_2"><a href="/engineered/design-principle.html">设计模式的六大原则</a><a class="headerlink" href="#_2" title="Permanent link"></a></h2>
<h2 id="_3">工厂模式<a class="headerlink" href="#_3" title="Permanent link"></a></h2>
<p>抽象了创建具体对象的过程。就是使用工厂函数。</p>
<div class="highlight"><pre>function createPerson (name, age, job) {
    var o = new Object()
    o.name = name
    o.age = age
    o.job = job
    o.sayName = function () {
        console.log(this.name)
    }
    return o
}
</pre></div>

<h2 id="_4">单例模式<a class="headerlink" href="#_4" title="Permanent link"></a></h2>
<p>也叫单体模式，核心思想是确保一个类只对应一个实例。即使多次实例化。其实例结果是相同的。
在实现中只能有一个的事物。如：一个公司只能有一个会计系统，一个超市只能有一个收银系统。</p>
<div class="highlight"><pre>var Singleton = function () {
    let instance = null
    function init () {
        var o = Object.create(null)
        o.name = &#39;top&#39;
        o.admin = true
        o.sayHi = () =&gt; {
            console.log(&#39;hi&#39;)
        }
        return o
    }
    return {
        getInstance: function () {
            if (!instance) {
                instance = init()
            }
            return instance
        }
    }
}()
var a = Singleton.getInstance()
var b = Singleton.getInstance()
a === b
</pre></div>

<h2 id="_5">原型模式<a class="headerlink" href="#_5" title="Permanent link"></a></h2>
<div class="highlight"><pre>function Foo () {}
Foo.prototype.hi = () =&gt; {}
var foo = new Foo()
</pre></div>

<h2 id="_6">适配器模式<a class="headerlink" href="#_6" title="Permanent link"></a></h2>
<p>把不合适的接口从一个合适的接口输出。
<div class="highlight"><pre>// 若
var hong = {
  say: () =&gt; {
    console.log(&#39;hi&#39;)
  }
}
var ming = {
  speak: () =&gt; {
    console.log(&#39;hi&#39;)
  }
}
var mingAdapter = {
  say: ming.speak
}
// 则可以这样使用
var friend = [hong, mingAdapter]
friend.forEach(item =&gt; {
  console.log(item)
  item.say()
})
</pre></div></p>
<h2 id="_7">装饰器模式<a class="headerlink" href="#_7" title="Permanent link"></a></h2>
<div class="highlight"><pre>let dfn = () =&gt; {
  // 
}
class MyClass {
}
// use
@dfn
class MyClass {
  constructor () {}
  fire () {}
}
// es5方法，会修改原来的属性。
</pre></div>

<h2 id="_8">代理模式<a class="headerlink" href="#_8" title="Permanent link"></a></h2>
<p>用来控制访问本体对象。在模块模式的基础上开发出来的模式。先写一个单一原则的方法。再写一个控制触发该方法的方法（代理）
是把一些开销很大的对象，延迟到真正需要它的时候才去创建执行
一般用于：隔离、保护、验证、阻隔、缓冲、代理等。</p>
<div class="highlight"><pre>class User {
  constructor (name, age) {
    this.name = name
    this.age = age
  }
}
var handler = {
  set: (target, key, value, receiver) =&gt; {
    console.log(target, key, value, receiver)
    target[kye] = value
  },
  construct: (target, args, newTarget) =&gt; {
    console.log(target, args, newTarget)
    if (200 &lt; args[1]) {
      return {error: new Error(&#39;age is invalid&#39;)}
    } else {
      var a = Array.prototype.slice.call(args, 0)
      return new target(...a)
    }
  }
}
var proxy = new Proxy(User, handler)
var u = new proxy(&#39;u&#39;, 33)
let {proxy: p, revoke} = Proxy.revocable(User, handler)
revoke() // 解除代理
var a = new p(&#39;a&#39;, 23) // Uncaught TypeError: Cannot perform &#39;construct&#39; on a proxy that has been revoked
</pre></div>

<h2 id="_9">外观模式（门面模式）<a class="headerlink" href="#_9" title="Permanent link"></a></h2>
<p>对外提供一个大接口，在大接口的方法体时调用模块（或定义域）内的子方法。
如此可省去用户调用多个小接口的麻烦。让模块更内聚。
<div class="highlight"><pre>// demo0
function a () {...}
function b () {...}
function ab () {
  a()
  b()
}
ab()

// demo1
stopEvent()
function stopEvent () {
  stopPropagation()
  preventDefault()
}
function stopPropagation() {}
function preventDefault() {}
</pre></div></p>
<h2 id="_10">桥接模式<a class="headerlink" href="#_10" title="Permanent link"></a></h2>
<p>类的嵌套。
可利用常用的基本类。
<div class="highlight"><pre>class Base0 {}
class Base1 {}
class Super {
  constructor () {
    this.base0 = new Base0()
    this.base1 = new Base1()
  }
}
</pre></div></p>
<h2 id="_11">组合模式<a class="headerlink" href="#_11" title="Permanent link"></a></h2>
<p>把多个命令（或方法）组合起来。可追加命令，再依次执行。
与门面模式类似。</p>
<div class="highlight"><pre>class MacroCommand {
  constructor () {
    this.commandList = []
  }
  add (fn) {
    this.commandList.push(fn)
  }
  execute () {
    this.commandList.forEach(cb =&gt; cb())
  }
}
let macroCommand = new MacroCommand()
macroCommand.add(firstCommand)
macroCommand.add(secondCommand)
macroCommand.add(threeCommand)
macroCommand.execute()
</pre></div>

<h2 id="_12">享元模式（共享模式）<a class="headerlink" href="#_12" title="Permanent link"></a></h2>
<p>该模式是创建一个类，把相同的属性定义在该类中，把不同的属性定义在该类外面。
当需要类的实例需要某些属性时，保持相同属性不变，改变不同属性为希望的属性。再返回该实例。
当需要很多具有若干相同属性与不同属性的对象时，可以使用享元模式。
// 该模式下的实例是共享的一个对象。</p>
<div class="highlight"><pre>function Circle (color) {
  this.color = color
  this.x
  this.y
  this.r
  this.setAttr = (x, y, r) =&gt; {
    this.x = x
    this.y = y
    this.r = r
  }
  this.draw = () =&gt; console.log(&#39;draw&#39;)
}
let shapeFactory = (function () {
  let store = {}
  return {
    getCircle: (color) =&gt; {
      if (!store[color]) {
        store[color] = new Circle(color)
      }
      return store[color]
    }
  }
})()
let circle0 = shapeFactory.getCircle(&#39;red&#39;)
circle.setAttr(1, 2, 3)
circle.draw()
</pre></div>

<h2 id="_13">策略模式<a class="headerlink" href="#_13" title="Permanent link"></a></h2>
<p>策略模式可看作为if/else判断的另一种表现形式，在达到相同目的的同时，极大的减少了代码量以及代码维护成本。
分离算法的使用、算法的实现。
<div class="highlight"><pre>// demo0
var realize = {
    first: () =&gt; {},
    second: () =&gt; {},
    third: () =&gt; {}
}
let result = realize[param] ? realize[param]() : null

// demo1
// html
&lt;form&gt;
// js
document.getElementById(&#39;submit&#39;).on(&#39;click&#39;, (event) =&gt; {
  event.preventDefault()
  var validator = new Validator()
  var result = validator.test({
    &#39;userName&#39;: [
      {rule: &#39;isRequired&#39;, value: this.userName.value, message: &#39;string&#39;},
      ...
    ],
    ...
  })
})

function Validator () {}
Validator.prototype.rules = {
  isRequired: (value) =&gt; {
    return value.replace(/(^\s*)|(\s*$)/g, &#39;&#39;)
  },
  ...
}
Validator.prototype.test = (rules) =&gt; {
  var that = this
  var valid = null
  for (let key in rules) {
    for(let i = 0; i &lt; rules[key].length; i++) {
      let {rule, value, message} = rules[key][i]
      let result = that.rules[rule](value)
      // let result = that.rules[rule].apply(this, value)
      if (!result) {
        valid = {
          errValue: key,
          errMsg: message
        }
        break
      }
    }
    if (valid) {
      break
    }
  }
  return valid
}
</pre></div></p>
<h2 id="_14">模板方法模式<a class="headerlink" href="#_14" title="Permanent link"></a></h2>
<p>模板方法模式由二部分组成，第一部分是抽象父类，第二部分是具体实现的子类。
在子类中的方法修改父类中的方法。
基本实践过程如下：
<div class="highlight"><pre>function SaveData () {}
SaveData.prototype.check = () =&gt; {
  console.log(&#39;check data format&#39;)
}
SaveData.prototype.store = () =&gt; {
  console.log(&#39;store to db&#39;)
}
SaveData.prototype.feedback = () =&gt; {
  console.log(&#39;success save&#39;)
}
function SaveUser () {}
SaveUser.prototype = new SaveData()
SaveUser.prototype.check = (name) =&gt; {
  if (typeof name === &#39;string&#39;) {
    return name !== &#39;&#39;
  } else {
    return new Error(&#39;name is invalid&#39;)
  }
}
</pre></div></p>
<h2 id="_15">观察者模式<a class="headerlink" href="#_15" title="Permanent link"></a></h2>
<p>也叫发布订阅模式</p>
<div class="highlight"><pre>                 subject
                  ^   |
                  |   |
                  |   |
                  |   |
       subscribe  |   |  fire event
                  |   |
                  |   |
                  |   V
                 observer
</pre></div>

<div class="highlight"><pre>// use function
function Public () {
  this.subs = []
  this.addSub = (item) =&gt; {
    this.subs.push(item)
  }
  this.notice = () =&gt; {
    this.subs.map(itme =&gt; item.compile())
  }
}
function Sub () {
  this.compile () {
    //
  }
}

// use class format
class Subject {
  constructor () {
    this.observers = []
  }
  add(...observer) {
    this.observers.push(...observer)
  }
  remove(observer) {
    let index = -1
    this.observers.some((item, i) =&gt; {
      if (item === observer) { // 这里可能需要优化
        index = i
        return true
      }
    })
    if (index &gt; -1) {
      this.observers.splice(index, 1)
    }
  }
  notify() {
    this.observers.forEach(item =&gt; item.update())
  }
}
class Observer {
  constructor () {
    // ...
  }
  update () {
    console.log(&#39;update&#39;)
  }
}
let [o0, o1] = [new Observer(), new Observer()]
let sub = new Subject()
sub.add(o0, o1)
sub.notify()
</pre></div>

<h2 id="_16">迭代器模式<a class="headerlink" href="#_16" title="Permanent link"></a></h2>
<p>实现统一遍历接口。
内部迭代器
$.each([&lsquo;a&rsquo;, &lsquo;b&rsquo;, &lsquo;c&rsquo;], function (index,value) {
  console.log(index, value)
})
外部迭代器
function * gen (arr) {
  for (let [index, value] of arr.entries()) {
    yield console.log([index, value])
  }
}
let ite = gen([&lsquo;a&rsquo;, &lsquo;b&rsquo;, &lsquo;c&rsquo;])
ite.next()
ite.next()
ite.next()
es6中Iterator接口部署在Symbol.iterator属性上。
当执行<code>[Symbol.iterator]()</code>会返回一个遍历器对象。
<div class="highlight"><pre>var a = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]
var ite = arr[Symbol.iterator]()
// arr[Symbol.iterator]   是遍历器生成函数
// arr[Symbol.iterator]() 是遍历器对象
ite.next() // {value: &#39;a&#39;, done: false}
ite.next() // {value: &#39;b&#39;, done: false}
ite.next() // {value: &#39;c&#39;, done: false}
ite.next() // {value: undefined, done: true}
</pre></div></p>
<h2 id="_17">职责链模式<a class="headerlink" href="#_17" title="Permanent link"></a></h2>
<p>消除请求的发送者与接收者的耦合。</p>
<ol>
<li>发送者知道链中的第一个接收者，它向这个接收者发送该请求。</li>
<li>每一个接收者都对请求进行分析，然后要么处理它，要么它往下传递。</li>
<li>每一个接收者知道其他的对象只有一个，即它在链中的下家(successor)。</li>
<li>如果没有任何接收者处理请求，那么请求会从链中离开。</li>
</ol>
<div class="highlight"><pre>function order500(orderType,isPay,count){
    if(orderType == 1 &amp;&amp; isPay == true)    {
        console.log(&quot;亲爱的用户，您中奖了100元红包了&quot;);
    }else {
        //我不知道下一个节点是谁,反正把请求往后面传递
        return &quot;nextSuccessor&quot;;
    }
};
function order200(orderType,isPay,count) {
    if(orderType == 2 &amp;&amp; isPay == true) {
        console.log(&quot;亲爱的用户，您中奖了20元红包了&quot;);
    }else {
        //我不知道下一个节点是谁,反正把请求往后面传递
        return &quot;nextSuccessor&quot;;
    }
};
function orderNormal(orderType,isPay,count){
    // 普通用户来处理中奖信息
    if(count &gt; 0) {
        console.log(&quot;亲爱的用户，您已抽到10元优惠卷&quot;);
    }else {
        console.log(&quot;亲爱的用户，请再接再厉哦&quot;);
    }
}
// 下面需要编写职责链模式的封装构造函数方法
var Chain = function(fn){
    this.fn = fn;
    this.successor = null;
};
Chain.prototype.setNextSuccessor = function(successor){
    return this.successor = successor;
}
// 把请求往下传递
Chain.prototype.passRequest = function(){
    var ret = this.fn.apply(this, arguments);
    if(ret === &#39;nextSuccessor&#39;) {
        return this.successor &amp;&amp; this.successor.passRequest.apply(this.successor, arguments);
    }
    return ret;
}
//现在我们把3个函数分别包装成职责链节点：
var chainOrder500 = new Chain(order500);
var chainOrder200 = new Chain(order200);
var chainOrderNormal = new Chain(orderNormal);

// 然后指定节点在职责链中的顺序
chainOrder500.setNextSuccessor(chainOrder200);
chainOrder200.setNextSuccessor(chainOrderNormal);

//最后把请求传递给第一个节点：
chainOrder500.passRequest(1,true,500);  // 亲爱的用户，您中奖了100元红包了
chainOrder500.passRequest(2,true,500);  // 亲爱的用户，您中奖了20元红包了
chainOrder500.passRequest(3,true,500);  // 亲爱的用户，您已抽到10元优惠卷 
chainOrder500.passRequest(1,false,0);   // 亲爱的用户，请再接再厉哦
</pre></div>

<div class="highlight"><pre>function Fn1() {
    console.log(1);
    return &quot;nextSuccessor&quot;;
}
function Fn2() {
    console.log(2);
    var self = this;
    setTimeout(function(){
        self.next();
    },1000);
}
function Fn3() {
    console.log(3);
}
// 下面需要编写职责链模式的封装构造函数方法
var Chain = function(fn){
    this.fn = fn;
    this.successor = null;
};
Chain.prototype.setNextSuccessor = function(successor){
    return this.successor = successor;
}
// 把请求往下传递
Chain.prototype.passRequest = function(){
    var ret = this.fn.apply(this,arguments);
    if(ret === &#39;nextSuccessor&#39;) {
        return this.successor &amp;&amp; this.successor.passRequest.apply(this.successor,arguments);
    }
    return ret;
}
Chain.prototype.next = function(){
    return this.successor &amp;&amp; this.successor.passRequest.apply(this.successor,arguments);
}
//现在我们把3个函数分别包装成职责链节点：
var chainFn1 = new Chain(Fn1);
var chainFn2 = new Chain(Fn2);
var chainFn3 = new Chain(Fn3);

// 然后指定节点在职责链中的顺序
chainFn1.setNextSuccessor(chainFn2);
chainFn2.setNextSuccessor(chainFn3);

chainFn1.passRequest();  // 打印出1，2 过1秒后 会打印出3
</pre></div>

<h2 id="_18">模块模式<a class="headerlink" href="#_18" title="Permanent link"></a></h2>
<p>利用闭包把方法、属性分为分开的与私有的。</p>
<div class="highlight"><pre>var ModuleFn = (function () {
  var privateVar  = 0;
  var privateFn = () =&gt; {
    console.log(&#39;privateFn&#39;)
  }
  return {
    publicFn0: () =&gt; {
      console.log(&#39;publicFn0&#39;)
      console.log(&#39;privateVar&#39;, privateVar)
    },
    publicFn1: () =&gt; {
      console.log(&#39;publicFn1&#39;)
      privateFn()
    }
  }
})()
ModuleFn.publicFn0()
ModuleFn.publicFn1()
</pre></div>

<h2 id="_19">命令模式<a class="headerlink" href="#_19" title="Permanent link"></a></h2>
<p>执行一个执行某些特定事情的指令。</p>
<div class="highlight"><pre>// 如下代码上的四个按钮 点击事件
var b1 = document.getElementById(&quot;button1&quot;),
    b2 = document.getElementById(&quot;button2&quot;),
    b3 = document.getElementById(&quot;button3&quot;),
    b4 = document.getElementById(&quot;button4&quot;);
/*
 bindEnv函数负责往按钮上面安装点击命令。点击按钮后，会调用
 函数
 */
var bindEnv = function(button,func) {
    button.onclick = function(){
        func();
    }
};
// 现在我们来编写具体处理业务逻辑代码
var Todo1 = {
    test1: function(){
        alert(&quot;我是来做第一个测试的&quot;);
    }    
};
// 实现业务中的增删改操作
var Menu = {
    add: function(){
        alert(&quot;我是来处理一些增加操作的&quot;);
    },
    del: function(){
        alert(&quot;我是来处理一些删除操作的&quot;);
    },
    update: function(){
        alert(&quot;我是来处理一些更新操作的&quot;);
    }
};
// 调用函数
bindEnv(b1,Todo1.test1);
// 增加按钮
bindEnv(b2,Menu.add);
// 删除按钮
bindEnv(b3,Menu.del);
// 更改按钮
bindEnv(b4,Menu.update);
</pre></div>

<div class="highlight"><pre>var command1 = {
    execute: function(){
        console.log(1);
    }
}; 
var command2 = {
    execute: function(){
        console.log(2);
    }
};
var command3 = {
    execute: function(){
        console.log(3);
    }
};
// 定义宏命令，command.add方法把子命令添加进宏命令对象，
// 当调用宏命令对象的execute方法时，会迭代这一组命令对象，
// 并且依次执行他们的execute方法。
var command = function(){
    return {
        commandsList: [],
        add: function(command){
            this.commandsList.push(command);
        },
        execute: function(){
            for(var i = 0,commands = this.commandsList.length; i &lt; commands; i+=1) {
                this.commandsList[i].execute();
            }
        }
    }
};
// 初始化宏命令
var c = command();
c.add(command1);
c.add(command2);
c.add(command3);
</pre></div>

<h2 id="_20">备忘录模式<a class="headerlink" href="#_20" title="Permanent link"></a></h2>
<p>也叫缓存模式。在一个栈中保存多个状态。当需要返回前一个状态时，从栈中弹出一状态。直到栈为空。</p>
<div class="highlight"><pre>class Memo {
  constructor () {
    this.state = new Map()
    this.stateKeyList = []
  }
  // 保存状态
  push (key, state) {
    this.stateKeyList.push(key)
    let KEY = Symbol.for(key)
    this.state.set(KEY, state)
  }
  // 查看所有状态
  peek (key) {
    return this.state.get(Symbol.for(key))
  }
  // 弹出最后一个状态
  pop () {
    let lastKey = this.stateKeyList[this.stateKeyList.length - 1]
    let state = this.peek(lastKey)
    this.delState(lastKey)
    return state
  }
  // 删除指定的状态
  delState (key) {
    this.stateKeyList.splice(this.stateKeyList.findIndex(item =&gt; item === key), 1)
    this.state.delete(Symbol.for(key))
  }
  // 查看所有状态
  allState () {
    // [[k, v], [k0, v0], ...]
    return this.stateKeyList.reduce((r, c) =&gt; {
      r.push([c, this.state.get(Symbol.for(c))])
      return r
    }, [])
  }
}
</pre></div>

<h2 id="_21">状态模式<a class="headerlink" href="#_21" title="Permanent link"></a></h2>
<p>定义一个对象。这个对象里定义了很多状态及对应的方法，再暴露一个改变状态的接口，再暴露一个调用的接口。</p>
<div class="highlight"><pre>class user {
  constructor () {
    this.currentState = []
    this.states = {
      move: () =&gt; {console.log(&#39;move&#39;)},
      stop: () =&gt; {console.log(&#39;stop&#39;)},
      speak: () =&gt; {console.log(&#39;speak&#39;)}
    }
  }
  changeStatus (...state) {
    this.currentState = state
    return this
  }
  goAhead () {
    this.currentState.forEach(item =&gt; this.states[item] &amp;&amp; this.states[item]())
    return this
  }
}
</pre></div>

<h2 id="_22">访问者模式<a class="headerlink" href="#_22" title="Permanent link"></a></h2>
<p>在js这种弱类型语言里，很多方法里都不做对象的类型检测，而是只关心这些对象能做什么。</p>
<div class="highlight"><pre>function Chicken (name) {
  this.name = name
}
Chicken.prototype.kind = &#39;chicken&#39;
Chicken.prototype.speak = function () {
  console.log(`${this.name}: ji ji`)
}
function Duck (name) {
  this.name = name
}
Duck.prototype.kind = &#39;duck&#39;
Duck.prototype.speak = function () {
  console.log(`${this.name}: ga ga`)
}
var Visitor = {
  speak: function (...rest) {
    let [that, ...params] = rest
    // console.log(that, params, this)
    return Chicken.prototype.speak.apply(this, params)
  }
}
var c = new Chicken(&#39;c&#39;)
var d = new Duck(&#39;d&#39;)
// console.log(d)
d.speak = Visitor.speak
d.speak()
</pre></div>

<h2 id="_23">中介模式<a class="headerlink" href="#_23" title="Permanent link"></a></h2>
<p>解耦对象与对象（数据与数据）之间关系。使二者间尽可能解耦。</p>
<div class="highlight"><pre>let playerDirector = (function () {
  let players = {}, operations = {}
  operations.addPlayer = function (player) {
    var teamColor = player.teamColer
    players[teamColor] = players[teamColor] || []
    players[teamColor].push(player)
  }
  operations.removePlayer = function (player) {
    var teamColor = player.teamColer
    players[teamColor] = players[teamColor] || []
    let index = -1
    players.some((item, i) =&gt; {
      if (item.name === player.name) {
        index = i
        return true
      }
    })
    if (index !== -1) {
      players.splice(index, 1)
    }
  }
  options.playerDead = function (player) {
    let teamPlayers = players[player.teamColor]
    let allDead = teamPlayers.some(item =&gt; item.state)
    if (allDead) {
      players.forEech(item =&gt; {
        item.color === player.color ? item.win() : item.lose()
      })
    }
  }
  let reciveMessage: function () {
    let [msgType, ...rest] = arguments
    options[msgType].apply(this, rest) // 这样比`options[msgType](rest)`更安全。
  }
  return {reciveMessage}
})()
class Player (name, teamColor) {
  constructor () {
    this.name = name
    this.teamColor = teamColor
    this.state = true
  }
  win () {
    console.log(&#39;win&#39;)
  }
  lose () {
    console.log(&#39;lose&#39;)
  }
  die () {
    playerDirector.reciveMessage(&#39;playerDead&#39;, this)
  }
}
</pre></div>

<h2 id="_24">解释器模式<a class="headerlink" href="#_24" title="Permanent link"></a></h2>
<p>解释器模式(Interpreter) : 定义一种文法的表示,并定义一种解释器, 通过这个解释器类解析对应的文法内容.</p>
<ol>
<li>利用解释器类解析文法中表示的想要的意图,解决并实现对应的需求.</li>
<li>将一些特定类型的问题, 提供一种更简单的文法表示, 来解决对应的问题.</li>
<li>将一些重复出现的问题,用一种简单的语言来进行表达.</li>
</ol></article></body></html>