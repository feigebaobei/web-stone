<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>&#x8bbe;&#x8ba1;&#x6a21;&#x5f0f;</title>
    <style>
      /* From extension vscode.github */
      /*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

      .vscode-dark img[src$='\#gh-light-mode-only'],
      .vscode-light img[src$='\#gh-dark-mode-only'] {
        display: none;
      }

      /* From extension vscode.markdown-math */
      @font-face {
        font-family: KaTeX_AMS;
        font-style: normal;
        font-weight: 400;
        src: url(fonts/KaTeX_AMS-Regular.woff2) format('woff2'),
          url(fonts/KaTeX_AMS-Regular.woff) format('woff'),
          url(fonts/KaTeX_AMS-Regular.ttf) format('truetype');
      }
      @font-face {
        font-family: KaTeX_Caligraphic;
        font-style: normal;
        font-weight: 700;
        src: url(fonts/KaTeX_Caligraphic-Bold.woff2) format('woff2'),
          url(fonts/KaTeX_Caligraphic-Bold.woff) format('woff'),
          url(fonts/KaTeX_Caligraphic-Bold.ttf) format('truetype');
      }
      @font-face {
        font-family: KaTeX_Caligraphic;
        font-style: normal;
        font-weight: 400;
        src: url(fonts/KaTeX_Caligraphic-Regular.woff2) format('woff2'),
          url(fonts/KaTeX_Caligraphic-Regular.woff) format('woff'),
          url(fonts/KaTeX_Caligraphic-Regular.ttf) format('truetype');
      }
      @font-face {
        font-family: KaTeX_Fraktur;
        font-style: normal;
        font-weight: 700;
        src: url(fonts/KaTeX_Fraktur-Bold.woff2) format('woff2'),
          url(fonts/KaTeX_Fraktur-Bold.woff) format('woff'),
          url(fonts/KaTeX_Fraktur-Bold.ttf) format('truetype');
      }
      @font-face {
        font-family: KaTeX_Fraktur;
        font-style: normal;
        font-weight: 400;
        src: url(fonts/KaTeX_Fraktur-Regular.woff2) format('woff2'),
          url(fonts/KaTeX_Fraktur-Regular.woff) format('woff'),
          url(fonts/KaTeX_Fraktur-Regular.ttf) format('truetype');
      }
      @font-face {
        font-family: KaTeX_Main;
        font-style: normal;
        font-weight: 700;
        src: url(fonts/KaTeX_Main-Bold.woff2) format('woff2'),
          url(fonts/KaTeX_Main-Bold.woff) format('woff'),
          url(fonts/KaTeX_Main-Bold.ttf) format('truetype');
      }
      @font-face {
        font-family: KaTeX_Main;
        font-style: italic;
        font-weight: 700;
        src: url(fonts/KaTeX_Main-BoldItalic.woff2) format('woff2'),
          url(fonts/KaTeX_Main-BoldItalic.woff) format('woff'),
          url(fonts/KaTeX_Main-BoldItalic.ttf) format('truetype');
      }
      @font-face {
        font-family: KaTeX_Main;
        font-style: italic;
        font-weight: 400;
        src: url(fonts/KaTeX_Main-Italic.woff2) format('woff2'),
          url(fonts/KaTeX_Main-Italic.woff) format('woff'),
          url(fonts/KaTeX_Main-Italic.ttf) format('truetype');
      }
      @font-face {
        font-family: KaTeX_Main;
        font-style: normal;
        font-weight: 400;
        src: url(fonts/KaTeX_Main-Regular.woff2) format('woff2'),
          url(fonts/KaTeX_Main-Regular.woff) format('woff'),
          url(fonts/KaTeX_Main-Regular.ttf) format('truetype');
      }
      @font-face {
        font-family: KaTeX_Math;
        font-style: italic;
        font-weight: 700;
        src: url(fonts/KaTeX_Math-BoldItalic.woff2) format('woff2'),
          url(fonts/KaTeX_Math-BoldItalic.woff) format('woff'),
          url(fonts/KaTeX_Math-BoldItalic.ttf) format('truetype');
      }
      @font-face {
        font-family: KaTeX_Math;
        font-style: italic;
        font-weight: 400;
        src: url(fonts/KaTeX_Math-Italic.woff2) format('woff2'),
          url(fonts/KaTeX_Math-Italic.woff) format('woff'),
          url(fonts/KaTeX_Math-Italic.ttf) format('truetype');
      }
      @font-face {
        font-family: 'KaTeX_SansSerif';
        font-style: normal;
        font-weight: 700;
        src: url(fonts/KaTeX_SansSerif-Bold.woff2) format('woff2'),
          url(fonts/KaTeX_SansSerif-Bold.woff) format('woff'),
          url(fonts/KaTeX_SansSerif-Bold.ttf) format('truetype');
      }
      @font-face {
        font-family: 'KaTeX_SansSerif';
        font-style: italic;
        font-weight: 400;
        src: url(fonts/KaTeX_SansSerif-Italic.woff2) format('woff2'),
          url(fonts/KaTeX_SansSerif-Italic.woff) format('woff'),
          url(fonts/KaTeX_SansSerif-Italic.ttf) format('truetype');
      }
      @font-face {
        font-family: 'KaTeX_SansSerif';
        font-style: normal;
        font-weight: 400;
        src: url(fonts/KaTeX_SansSerif-Regular.woff2) format('woff2'),
          url(fonts/KaTeX_SansSerif-Regular.woff) format('woff'),
          url(fonts/KaTeX_SansSerif-Regular.ttf) format('truetype');
      }
      @font-face {
        font-family: KaTeX_Script;
        font-style: normal;
        font-weight: 400;
        src: url(fonts/KaTeX_Script-Regular.woff2) format('woff2'),
          url(fonts/KaTeX_Script-Regular.woff) format('woff'),
          url(fonts/KaTeX_Script-Regular.ttf) format('truetype');
      }
      @font-face {
        font-family: KaTeX_Size1;
        font-style: normal;
        font-weight: 400;
        src: url(fonts/KaTeX_Size1-Regular.woff2) format('woff2'),
          url(fonts/KaTeX_Size1-Regular.woff) format('woff'),
          url(fonts/KaTeX_Size1-Regular.ttf) format('truetype');
      }
      @font-face {
        font-family: KaTeX_Size2;
        font-style: normal;
        font-weight: 400;
        src: url(fonts/KaTeX_Size2-Regular.woff2) format('woff2'),
          url(fonts/KaTeX_Size2-Regular.woff) format('woff'),
          url(fonts/KaTeX_Size2-Regular.ttf) format('truetype');
      }
      @font-face {
        font-family: KaTeX_Size3;
        font-style: normal;
        font-weight: 400;
        src: url(fonts/KaTeX_Size3-Regular.woff2) format('woff2'),
          url(fonts/KaTeX_Size3-Regular.woff) format('woff'),
          url(fonts/KaTeX_Size3-Regular.ttf) format('truetype');
      }
      @font-face {
        font-family: KaTeX_Size4;
        font-style: normal;
        font-weight: 400;
        src: url(fonts/KaTeX_Size4-Regular.woff2) format('woff2'),
          url(fonts/KaTeX_Size4-Regular.woff) format('woff'),
          url(fonts/KaTeX_Size4-Regular.ttf) format('truetype');
      }
      @font-face {
        font-family: KaTeX_Typewriter;
        font-style: normal;
        font-weight: 400;
        src: url(fonts/KaTeX_Typewriter-Regular.woff2) format('woff2'),
          url(fonts/KaTeX_Typewriter-Regular.woff) format('woff'),
          url(fonts/KaTeX_Typewriter-Regular.ttf) format('truetype');
      }
      .katex {
        text-rendering: auto;
        font: normal 1.21em KaTeX_Main, Times New Roman, serif;
        line-height: 1.2;
        text-indent: 0;
      }
      .katex * {
        -ms-high-contrast-adjust: none !important;
        border-color: currentColor;
      }
      .katex .katex-version:after {
        content: '0.13.24';
      }
      .katex .katex-mathml {
        clip: rect(1px, 1px, 1px, 1px);
        border: 0;
        height: 1px;
        overflow: hidden;
        padding: 0;
        position: absolute;
        width: 1px;
      }
      .katex .katex-html > .newline {
        display: block;
      }
      .katex .base {
        position: relative;
        white-space: nowrap;
        width: -webkit-min-content;
        width: -moz-min-content;
        width: min-content;
      }
      .katex .base,
      .katex .strut {
        display: inline-block;
      }
      .katex .textbf {
        font-weight: 700;
      }
      .katex .textit {
        font-style: italic;
      }
      .katex .textrm {
        font-family: KaTeX_Main;
      }
      .katex .textsf {
        font-family: KaTeX_SansSerif;
      }
      .katex .texttt {
        font-family: KaTeX_Typewriter;
      }
      .katex .mathnormal {
        font-family: KaTeX_Math;
        font-style: italic;
      }
      .katex .mathit {
        font-family: KaTeX_Main;
        font-style: italic;
      }
      .katex .mathrm {
        font-style: normal;
      }
      .katex .mathbf {
        font-family: KaTeX_Main;
        font-weight: 700;
      }
      .katex .boldsymbol {
        font-family: KaTeX_Math;
        font-style: italic;
        font-weight: 700;
      }
      .katex .amsrm,
      .katex .mathbb,
      .katex .textbb {
        font-family: KaTeX_AMS;
      }
      .katex .mathcal {
        font-family: KaTeX_Caligraphic;
      }
      .katex .mathfrak,
      .katex .textfrak {
        font-family: KaTeX_Fraktur;
      }
      .katex .mathtt {
        font-family: KaTeX_Typewriter;
      }
      .katex .mathscr,
      .katex .textscr {
        font-family: KaTeX_Script;
      }
      .katex .mathsf,
      .katex .textsf {
        font-family: KaTeX_SansSerif;
      }
      .katex .mathboldsf,
      .katex .textboldsf {
        font-family: KaTeX_SansSerif;
        font-weight: 700;
      }
      .katex .mathitsf,
      .katex .textitsf {
        font-family: KaTeX_SansSerif;
        font-style: italic;
      }
      .katex .mainrm {
        font-family: KaTeX_Main;
        font-style: normal;
      }
      .katex .vlist-t {
        border-collapse: collapse;
        display: inline-table;
        table-layout: fixed;
      }
      .katex .vlist-r {
        display: table-row;
      }
      .katex .vlist {
        display: table-cell;
        position: relative;
        vertical-align: bottom;
      }
      .katex .vlist > span {
        display: block;
        height: 0;
        position: relative;
      }
      .katex .vlist > span > span {
        display: inline-block;
      }
      .katex .vlist > span > .pstrut {
        overflow: hidden;
        width: 0;
      }
      .katex .vlist-t2 {
        margin-right: -2px;
      }
      .katex .vlist-s {
        display: table-cell;
        font-size: 1px;
        min-width: 2px;
        vertical-align: bottom;
        width: 2px;
      }
      .katex .vbox {
        align-items: baseline;
        display: inline-flex;
        flex-direction: column;
      }
      .katex .hbox {
        width: 100%;
      }
      .katex .hbox,
      .katex .thinbox {
        display: inline-flex;
        flex-direction: row;
      }
      .katex .thinbox {
        max-width: 0;
        width: 0;
      }
      .katex .msupsub {
        text-align: left;
      }
      .katex .mfrac > span > span {
        text-align: center;
      }
      .katex .mfrac .frac-line {
        border-bottom-style: solid;
        display: inline-block;
        width: 100%;
      }
      .katex .hdashline,
      .katex .hline,
      .katex .mfrac .frac-line,
      .katex .overline .overline-line,
      .katex .rule,
      .katex .underline .underline-line {
        min-height: 1px;
      }
      .katex .mspace {
        display: inline-block;
      }
      .katex .clap,
      .katex .llap,
      .katex .rlap {
        position: relative;
        width: 0;
      }
      .katex .clap > .inner,
      .katex .llap > .inner,
      .katex .rlap > .inner {
        position: absolute;
      }
      .katex .clap > .fix,
      .katex .llap > .fix,
      .katex .rlap > .fix {
        display: inline-block;
      }
      .katex .llap > .inner {
        right: 0;
      }
      .katex .clap > .inner,
      .katex .rlap > .inner {
        left: 0;
      }
      .katex .clap > .inner > span {
        margin-left: -50%;
        margin-right: 50%;
      }
      .katex .rule {
        border: 0 solid;
        display: inline-block;
        position: relative;
      }
      .katex .hline,
      .katex .overline .overline-line,
      .katex .underline .underline-line {
        border-bottom-style: solid;
        display: inline-block;
        width: 100%;
      }
      .katex .hdashline {
        border-bottom-style: dashed;
        display: inline-block;
        width: 100%;
      }
      .katex .sqrt > .root {
        margin-left: 0.27777778em;
        margin-right: -0.55555556em;
      }
      .katex .fontsize-ensurer.reset-size1.size1,
      .katex .sizing.reset-size1.size1 {
        font-size: 1em;
      }
      .katex .fontsize-ensurer.reset-size1.size2,
      .katex .sizing.reset-size1.size2 {
        font-size: 1.2em;
      }
      .katex .fontsize-ensurer.reset-size1.size3,
      .katex .sizing.reset-size1.size3 {
        font-size: 1.4em;
      }
      .katex .fontsize-ensurer.reset-size1.size4,
      .katex .sizing.reset-size1.size4 {
        font-size: 1.6em;
      }
      .katex .fontsize-ensurer.reset-size1.size5,
      .katex .sizing.reset-size1.size5 {
        font-size: 1.8em;
      }
      .katex .fontsize-ensurer.reset-size1.size6,
      .katex .sizing.reset-size1.size6 {
        font-size: 2em;
      }
      .katex .fontsize-ensurer.reset-size1.size7,
      .katex .sizing.reset-size1.size7 {
        font-size: 2.4em;
      }
      .katex .fontsize-ensurer.reset-size1.size8,
      .katex .sizing.reset-size1.size8 {
        font-size: 2.88em;
      }
      .katex .fontsize-ensurer.reset-size1.size9,
      .katex .sizing.reset-size1.size9 {
        font-size: 3.456em;
      }
      .katex .fontsize-ensurer.reset-size1.size10,
      .katex .sizing.reset-size1.size10 {
        font-size: 4.148em;
      }
      .katex .fontsize-ensurer.reset-size1.size11,
      .katex .sizing.reset-size1.size11 {
        font-size: 4.976em;
      }
      .katex .fontsize-ensurer.reset-size2.size1,
      .katex .sizing.reset-size2.size1 {
        font-size: 0.83333333em;
      }
      .katex .fontsize-ensurer.reset-size2.size2,
      .katex .sizing.reset-size2.size2 {
        font-size: 1em;
      }
      .katex .fontsize-ensurer.reset-size2.size3,
      .katex .sizing.reset-size2.size3 {
        font-size: 1.16666667em;
      }
      .katex .fontsize-ensurer.reset-size2.size4,
      .katex .sizing.reset-size2.size4 {
        font-size: 1.33333333em;
      }
      .katex .fontsize-ensurer.reset-size2.size5,
      .katex .sizing.reset-size2.size5 {
        font-size: 1.5em;
      }
      .katex .fontsize-ensurer.reset-size2.size6,
      .katex .sizing.reset-size2.size6 {
        font-size: 1.66666667em;
      }
      .katex .fontsize-ensurer.reset-size2.size7,
      .katex .sizing.reset-size2.size7 {
        font-size: 2em;
      }
      .katex .fontsize-ensurer.reset-size2.size8,
      .katex .sizing.reset-size2.size8 {
        font-size: 2.4em;
      }
      .katex .fontsize-ensurer.reset-size2.size9,
      .katex .sizing.reset-size2.size9 {
        font-size: 2.88em;
      }
      .katex .fontsize-ensurer.reset-size2.size10,
      .katex .sizing.reset-size2.size10 {
        font-size: 3.45666667em;
      }
      .katex .fontsize-ensurer.reset-size2.size11,
      .katex .sizing.reset-size2.size11 {
        font-size: 4.14666667em;
      }
      .katex .fontsize-ensurer.reset-size3.size1,
      .katex .sizing.reset-size3.size1 {
        font-size: 0.71428571em;
      }
      .katex .fontsize-ensurer.reset-size3.size2,
      .katex .sizing.reset-size3.size2 {
        font-size: 0.85714286em;
      }
      .katex .fontsize-ensurer.reset-size3.size3,
      .katex .sizing.reset-size3.size3 {
        font-size: 1em;
      }
      .katex .fontsize-ensurer.reset-size3.size4,
      .katex .sizing.reset-size3.size4 {
        font-size: 1.14285714em;
      }
      .katex .fontsize-ensurer.reset-size3.size5,
      .katex .sizing.reset-size3.size5 {
        font-size: 1.28571429em;
      }
      .katex .fontsize-ensurer.reset-size3.size6,
      .katex .sizing.reset-size3.size6 {
        font-size: 1.42857143em;
      }
      .katex .fontsize-ensurer.reset-size3.size7,
      .katex .sizing.reset-size3.size7 {
        font-size: 1.71428571em;
      }
      .katex .fontsize-ensurer.reset-size3.size8,
      .katex .sizing.reset-size3.size8 {
        font-size: 2.05714286em;
      }
      .katex .fontsize-ensurer.reset-size3.size9,
      .katex .sizing.reset-size3.size9 {
        font-size: 2.46857143em;
      }
      .katex .fontsize-ensurer.reset-size3.size10,
      .katex .sizing.reset-size3.size10 {
        font-size: 2.96285714em;
      }
      .katex .fontsize-ensurer.reset-size3.size11,
      .katex .sizing.reset-size3.size11 {
        font-size: 3.55428571em;
      }
      .katex .fontsize-ensurer.reset-size4.size1,
      .katex .sizing.reset-size4.size1 {
        font-size: 0.625em;
      }
      .katex .fontsize-ensurer.reset-size4.size2,
      .katex .sizing.reset-size4.size2 {
        font-size: 0.75em;
      }
      .katex .fontsize-ensurer.reset-size4.size3,
      .katex .sizing.reset-size4.size3 {
        font-size: 0.875em;
      }
      .katex .fontsize-ensurer.reset-size4.size4,
      .katex .sizing.reset-size4.size4 {
        font-size: 1em;
      }
      .katex .fontsize-ensurer.reset-size4.size5,
      .katex .sizing.reset-size4.size5 {
        font-size: 1.125em;
      }
      .katex .fontsize-ensurer.reset-size4.size6,
      .katex .sizing.reset-size4.size6 {
        font-size: 1.25em;
      }
      .katex .fontsize-ensurer.reset-size4.size7,
      .katex .sizing.reset-size4.size7 {
        font-size: 1.5em;
      }
      .katex .fontsize-ensurer.reset-size4.size8,
      .katex .sizing.reset-size4.size8 {
        font-size: 1.8em;
      }
      .katex .fontsize-ensurer.reset-size4.size9,
      .katex .sizing.reset-size4.size9 {
        font-size: 2.16em;
      }
      .katex .fontsize-ensurer.reset-size4.size10,
      .katex .sizing.reset-size4.size10 {
        font-size: 2.5925em;
      }
      .katex .fontsize-ensurer.reset-size4.size11,
      .katex .sizing.reset-size4.size11 {
        font-size: 3.11em;
      }
      .katex .fontsize-ensurer.reset-size5.size1,
      .katex .sizing.reset-size5.size1 {
        font-size: 0.55555556em;
      }
      .katex .fontsize-ensurer.reset-size5.size2,
      .katex .sizing.reset-size5.size2 {
        font-size: 0.66666667em;
      }
      .katex .fontsize-ensurer.reset-size5.size3,
      .katex .sizing.reset-size5.size3 {
        font-size: 0.77777778em;
      }
      .katex .fontsize-ensurer.reset-size5.size4,
      .katex .sizing.reset-size5.size4 {
        font-size: 0.88888889em;
      }
      .katex .fontsize-ensurer.reset-size5.size5,
      .katex .sizing.reset-size5.size5 {
        font-size: 1em;
      }
      .katex .fontsize-ensurer.reset-size5.size6,
      .katex .sizing.reset-size5.size6 {
        font-size: 1.11111111em;
      }
      .katex .fontsize-ensurer.reset-size5.size7,
      .katex .sizing.reset-size5.size7 {
        font-size: 1.33333333em;
      }
      .katex .fontsize-ensurer.reset-size5.size8,
      .katex .sizing.reset-size5.size8 {
        font-size: 1.6em;
      }
      .katex .fontsize-ensurer.reset-size5.size9,
      .katex .sizing.reset-size5.size9 {
        font-size: 1.92em;
      }
      .katex .fontsize-ensurer.reset-size5.size10,
      .katex .sizing.reset-size5.size10 {
        font-size: 2.30444444em;
      }
      .katex .fontsize-ensurer.reset-size5.size11,
      .katex .sizing.reset-size5.size11 {
        font-size: 2.76444444em;
      }
      .katex .fontsize-ensurer.reset-size6.size1,
      .katex .sizing.reset-size6.size1 {
        font-size: 0.5em;
      }
      .katex .fontsize-ensurer.reset-size6.size2,
      .katex .sizing.reset-size6.size2 {
        font-size: 0.6em;
      }
      .katex .fontsize-ensurer.reset-size6.size3,
      .katex .sizing.reset-size6.size3 {
        font-size: 0.7em;
      }
      .katex .fontsize-ensurer.reset-size6.size4,
      .katex .sizing.reset-size6.size4 {
        font-size: 0.8em;
      }
      .katex .fontsize-ensurer.reset-size6.size5,
      .katex .sizing.reset-size6.size5 {
        font-size: 0.9em;
      }
      .katex .fontsize-ensurer.reset-size6.size6,
      .katex .sizing.reset-size6.size6 {
        font-size: 1em;
      }
      .katex .fontsize-ensurer.reset-size6.size7,
      .katex .sizing.reset-size6.size7 {
        font-size: 1.2em;
      }
      .katex .fontsize-ensurer.reset-size6.size8,
      .katex .sizing.reset-size6.size8 {
        font-size: 1.44em;
      }
      .katex .fontsize-ensurer.reset-size6.size9,
      .katex .sizing.reset-size6.size9 {
        font-size: 1.728em;
      }
      .katex .fontsize-ensurer.reset-size6.size10,
      .katex .sizing.reset-size6.size10 {
        font-size: 2.074em;
      }
      .katex .fontsize-ensurer.reset-size6.size11,
      .katex .sizing.reset-size6.size11 {
        font-size: 2.488em;
      }
      .katex .fontsize-ensurer.reset-size7.size1,
      .katex .sizing.reset-size7.size1 {
        font-size: 0.41666667em;
      }
      .katex .fontsize-ensurer.reset-size7.size2,
      .katex .sizing.reset-size7.size2 {
        font-size: 0.5em;
      }
      .katex .fontsize-ensurer.reset-size7.size3,
      .katex .sizing.reset-size7.size3 {
        font-size: 0.58333333em;
      }
      .katex .fontsize-ensurer.reset-size7.size4,
      .katex .sizing.reset-size7.size4 {
        font-size: 0.66666667em;
      }
      .katex .fontsize-ensurer.reset-size7.size5,
      .katex .sizing.reset-size7.size5 {
        font-size: 0.75em;
      }
      .katex .fontsize-ensurer.reset-size7.size6,
      .katex .sizing.reset-size7.size6 {
        font-size: 0.83333333em;
      }
      .katex .fontsize-ensurer.reset-size7.size7,
      .katex .sizing.reset-size7.size7 {
        font-size: 1em;
      }
      .katex .fontsize-ensurer.reset-size7.size8,
      .katex .sizing.reset-size7.size8 {
        font-size: 1.2em;
      }
      .katex .fontsize-ensurer.reset-size7.size9,
      .katex .sizing.reset-size7.size9 {
        font-size: 1.44em;
      }
      .katex .fontsize-ensurer.reset-size7.size10,
      .katex .sizing.reset-size7.size10 {
        font-size: 1.72833333em;
      }
      .katex .fontsize-ensurer.reset-size7.size11,
      .katex .sizing.reset-size7.size11 {
        font-size: 2.07333333em;
      }
      .katex .fontsize-ensurer.reset-size8.size1,
      .katex .sizing.reset-size8.size1 {
        font-size: 0.34722222em;
      }
      .katex .fontsize-ensurer.reset-size8.size2,
      .katex .sizing.reset-size8.size2 {
        font-size: 0.41666667em;
      }
      .katex .fontsize-ensurer.reset-size8.size3,
      .katex .sizing.reset-size8.size3 {
        font-size: 0.48611111em;
      }
      .katex .fontsize-ensurer.reset-size8.size4,
      .katex .sizing.reset-size8.size4 {
        font-size: 0.55555556em;
      }
      .katex .fontsize-ensurer.reset-size8.size5,
      .katex .sizing.reset-size8.size5 {
        font-size: 0.625em;
      }
      .katex .fontsize-ensurer.reset-size8.size6,
      .katex .sizing.reset-size8.size6 {
        font-size: 0.69444444em;
      }
      .katex .fontsize-ensurer.reset-size8.size7,
      .katex .sizing.reset-size8.size7 {
        font-size: 0.83333333em;
      }
      .katex .fontsize-ensurer.reset-size8.size8,
      .katex .sizing.reset-size8.size8 {
        font-size: 1em;
      }
      .katex .fontsize-ensurer.reset-size8.size9,
      .katex .sizing.reset-size8.size9 {
        font-size: 1.2em;
      }
      .katex .fontsize-ensurer.reset-size8.size10,
      .katex .sizing.reset-size8.size10 {
        font-size: 1.44027778em;
      }
      .katex .fontsize-ensurer.reset-size8.size11,
      .katex .sizing.reset-size8.size11 {
        font-size: 1.72777778em;
      }
      .katex .fontsize-ensurer.reset-size9.size1,
      .katex .sizing.reset-size9.size1 {
        font-size: 0.28935185em;
      }
      .katex .fontsize-ensurer.reset-size9.size2,
      .katex .sizing.reset-size9.size2 {
        font-size: 0.34722222em;
      }
      .katex .fontsize-ensurer.reset-size9.size3,
      .katex .sizing.reset-size9.size3 {
        font-size: 0.40509259em;
      }
      .katex .fontsize-ensurer.reset-size9.size4,
      .katex .sizing.reset-size9.size4 {
        font-size: 0.46296296em;
      }
      .katex .fontsize-ensurer.reset-size9.size5,
      .katex .sizing.reset-size9.size5 {
        font-size: 0.52083333em;
      }
      .katex .fontsize-ensurer.reset-size9.size6,
      .katex .sizing.reset-size9.size6 {
        font-size: 0.5787037em;
      }
      .katex .fontsize-ensurer.reset-size9.size7,
      .katex .sizing.reset-size9.size7 {
        font-size: 0.69444444em;
      }
      .katex .fontsize-ensurer.reset-size9.size8,
      .katex .sizing.reset-size9.size8 {
        font-size: 0.83333333em;
      }
      .katex .fontsize-ensurer.reset-size9.size9,
      .katex .sizing.reset-size9.size9 {
        font-size: 1em;
      }
      .katex .fontsize-ensurer.reset-size9.size10,
      .katex .sizing.reset-size9.size10 {
        font-size: 1.20023148em;
      }
      .katex .fontsize-ensurer.reset-size9.size11,
      .katex .sizing.reset-size9.size11 {
        font-size: 1.43981481em;
      }
      .katex .fontsize-ensurer.reset-size10.size1,
      .katex .sizing.reset-size10.size1 {
        font-size: 0.24108004em;
      }
      .katex .fontsize-ensurer.reset-size10.size2,
      .katex .sizing.reset-size10.size2 {
        font-size: 0.28929605em;
      }
      .katex .fontsize-ensurer.reset-size10.size3,
      .katex .sizing.reset-size10.size3 {
        font-size: 0.33751205em;
      }
      .katex .fontsize-ensurer.reset-size10.size4,
      .katex .sizing.reset-size10.size4 {
        font-size: 0.38572806em;
      }
      .katex .fontsize-ensurer.reset-size10.size5,
      .katex .sizing.reset-size10.size5 {
        font-size: 0.43394407em;
      }
      .katex .fontsize-ensurer.reset-size10.size6,
      .katex .sizing.reset-size10.size6 {
        font-size: 0.48216008em;
      }
      .katex .fontsize-ensurer.reset-size10.size7,
      .katex .sizing.reset-size10.size7 {
        font-size: 0.57859209em;
      }
      .katex .fontsize-ensurer.reset-size10.size8,
      .katex .sizing.reset-size10.size8 {
        font-size: 0.69431051em;
      }
      .katex .fontsize-ensurer.reset-size10.size9,
      .katex .sizing.reset-size10.size9 {
        font-size: 0.83317261em;
      }
      .katex .fontsize-ensurer.reset-size10.size10,
      .katex .sizing.reset-size10.size10 {
        font-size: 1em;
      }
      .katex .fontsize-ensurer.reset-size10.size11,
      .katex .sizing.reset-size10.size11 {
        font-size: 1.19961427em;
      }
      .katex .fontsize-ensurer.reset-size11.size1,
      .katex .sizing.reset-size11.size1 {
        font-size: 0.20096463em;
      }
      .katex .fontsize-ensurer.reset-size11.size2,
      .katex .sizing.reset-size11.size2 {
        font-size: 0.24115756em;
      }
      .katex .fontsize-ensurer.reset-size11.size3,
      .katex .sizing.reset-size11.size3 {
        font-size: 0.28135048em;
      }
      .katex .fontsize-ensurer.reset-size11.size4,
      .katex .sizing.reset-size11.size4 {
        font-size: 0.32154341em;
      }
      .katex .fontsize-ensurer.reset-size11.size5,
      .katex .sizing.reset-size11.size5 {
        font-size: 0.36173633em;
      }
      .katex .fontsize-ensurer.reset-size11.size6,
      .katex .sizing.reset-size11.size6 {
        font-size: 0.40192926em;
      }
      .katex .fontsize-ensurer.reset-size11.size7,
      .katex .sizing.reset-size11.size7 {
        font-size: 0.48231511em;
      }
      .katex .fontsize-ensurer.reset-size11.size8,
      .katex .sizing.reset-size11.size8 {
        font-size: 0.57877814em;
      }
      .katex .fontsize-ensurer.reset-size11.size9,
      .katex .sizing.reset-size11.size9 {
        font-size: 0.69453376em;
      }
      .katex .fontsize-ensurer.reset-size11.size10,
      .katex .sizing.reset-size11.size10 {
        font-size: 0.83360129em;
      }
      .katex .fontsize-ensurer.reset-size11.size11,
      .katex .sizing.reset-size11.size11 {
        font-size: 1em;
      }
      .katex .delimsizing.size1 {
        font-family: KaTeX_Size1;
      }
      .katex .delimsizing.size2 {
        font-family: KaTeX_Size2;
      }
      .katex .delimsizing.size3 {
        font-family: KaTeX_Size3;
      }
      .katex .delimsizing.size4 {
        font-family: KaTeX_Size4;
      }
      .katex .delimsizing.mult .delim-size1 > span {
        font-family: KaTeX_Size1;
      }
      .katex .delimsizing.mult .delim-size4 > span {
        font-family: KaTeX_Size4;
      }
      .katex .nulldelimiter {
        display: inline-block;
        width: 0.12em;
      }
      .katex .delimcenter,
      .katex .op-symbol {
        position: relative;
      }
      .katex .op-symbol.small-op {
        font-family: KaTeX_Size1;
      }
      .katex .op-symbol.large-op {
        font-family: KaTeX_Size2;
      }
      .katex .accent > .vlist-t,
      .katex .op-limits > .vlist-t {
        text-align: center;
      }
      .katex .accent .accent-body {
        position: relative;
      }
      .katex .accent .accent-body:not(.accent-full) {
        width: 0;
      }
      .katex .overlay {
        display: block;
      }
      .katex .mtable .vertical-separator {
        display: inline-block;
        min-width: 1px;
      }
      .katex .mtable .arraycolsep {
        display: inline-block;
      }
      .katex .mtable .col-align-c > .vlist-t {
        text-align: center;
      }
      .katex .mtable .col-align-l > .vlist-t {
        text-align: left;
      }
      .katex .mtable .col-align-r > .vlist-t {
        text-align: right;
      }
      .katex .svg-align {
        text-align: left;
      }
      .katex svg {
        fill: currentColor;
        stroke: currentColor;
        fill-rule: nonzero;
        fill-opacity: 1;
        stroke-width: 1;
        stroke-linecap: butt;
        stroke-linejoin: miter;
        stroke-miterlimit: 4;
        stroke-dasharray: none;
        stroke-dashoffset: 0;
        stroke-opacity: 1;
        display: block;
        height: inherit;
        position: absolute;
        width: 100%;
      }
      .katex svg path {
        stroke: none;
      }
      .katex img {
        border-style: none;
        max-height: none;
        max-width: none;
        min-height: 0;
        min-width: 0;
      }
      .katex .stretchy {
        display: block;
        overflow: hidden;
        position: relative;
        width: 100%;
      }
      .katex .stretchy:after,
      .katex .stretchy:before {
        content: '';
      }
      .katex .hide-tail {
        overflow: hidden;
        position: relative;
        width: 100%;
      }
      .katex .halfarrow-left {
        left: 0;
        overflow: hidden;
        position: absolute;
        width: 50.2%;
      }
      .katex .halfarrow-right {
        overflow: hidden;
        position: absolute;
        right: 0;
        width: 50.2%;
      }
      .katex .brace-left {
        left: 0;
        overflow: hidden;
        position: absolute;
        width: 25.1%;
      }
      .katex .brace-center {
        left: 25%;
        overflow: hidden;
        position: absolute;
        width: 50%;
      }
      .katex .brace-right {
        overflow: hidden;
        position: absolute;
        right: 0;
        width: 25.1%;
      }
      .katex .x-arrow-pad {
        padding: 0 0.5em;
      }
      .katex .cd-arrow-pad {
        padding: 0 0.55556em 0 0.27778em;
      }
      .katex .mover,
      .katex .munder,
      .katex .x-arrow {
        text-align: center;
      }
      .katex .boxpad {
        padding: 0 0.3em;
      }
      .katex .fbox,
      .katex .fcolorbox {
        border: 0.04em solid;
        box-sizing: border-box;
      }
      .katex .cancel-pad {
        padding: 0 0.2em;
      }
      .katex .cancel-lap {
        margin-left: -0.2em;
        margin-right: -0.2em;
      }
      .katex .sout {
        border-bottom-style: solid;
        border-bottom-width: 0.08em;
      }
      .katex .angl {
        border-right: 0.049em solid;
        border-top: 0.049em solid;
        box-sizing: border-box;
        margin-right: 0.03889em;
      }
      .katex .anglpad {
        padding: 0 0.03889em;
      }
      .katex .eqn-num:before {
        content: '(' counter(katexEqnNo) ')';
        counter-increment: katexEqnNo;
      }
      .katex .mml-eqn-num:before {
        content: '(' counter(mmlEqnNo) ')';
        counter-increment: mmlEqnNo;
      }
      .katex .mtr-glue {
        width: 50%;
      }
      .katex .cd-vert-arrow {
        display: inline-block;
        position: relative;
      }
      .katex .cd-label-left {
        display: inline-block;
        position: absolute;
        right: calc(50% + 0.3em);
        text-align: left;
      }
      .katex .cd-label-right {
        display: inline-block;
        left: calc(50% + 0.3em);
        position: absolute;
        text-align: right;
      }
      .katex-display {
        display: block;
        margin: 1em 0;
        text-align: center;
      }
      .katex-display > .katex {
        display: block;
        text-align: center;
        white-space: nowrap;
      }
      .katex-display > .katex > .katex-html {
        display: block;
        position: relative;
      }
      .katex-display > .katex > .katex-html > .tag {
        position: absolute;
        right: 0;
      }
      .katex-display.leqno > .katex > .katex-html > .tag {
        left: 0;
        right: auto;
      }
      .katex-display.fleqn > .katex {
        padding-left: 2em;
        text-align: left;
      }
      body {
        counter-reset: katexEqnNo mmlEqnNo;
      }

      /*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

      .katex-error {
        color: var(--vscode-editorError-foreground);
      }

      /* From extension ms-toolsai.jupyter */
      /* These classnames are inherited from bootstrap, but are present in most notebook renderers */

      .alert {
        width: auto;
        padding: 1em;
        margin-top: 1em;
        margin-bottom: 1em;
      }
      .alert > *:last-child {
        margin-bottom: 0;
      }
      #preview > .alert:last-child {
        /* Prevent this being set to zero by the default notebook stylesheet */
        padding-bottom: 1em;
      }

      .alert-success {
        /* Note there is no suitable color available, so we just copy "info" */
        background-color: var(--theme-info-background);
        color: var(--theme-info-foreground);
      }
      .alert-info {
        background-color: var(--theme-info-background);
        color: var(--theme-info-foreground);
      }
      .alert-warning {
        background-color: var(--theme-warning-background);
        color: var(--theme-warning-foreground);
      }
      .alert-danger {
        background-color: var(--theme-error-background);
        color: var(--theme-error-foreground);
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css"
      integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j"
      crossorigin="anonymous"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css"
    />
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI',
          system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
        font-size: 14px;
        line-height: 1.6;
      }
    </style>
    <style>
      .task-list-item {
        list-style-type: none;
      }
      .task-list-item-checkbox {
        margin-left: -20px;
        vertical-align: middle;
      }
    </style>
  </head>
  <body class="vscode-body vscode-light">
    <h1 id="设计模式">设计模式</h1>
    <p>
      创建型 工厂模式 单例模式 原型模式 结构型 适配器模式 装饰器模式 代理模式
      外观模式 桥接模式 组合模式 享元模式 行为型 策略模式 模板方法模式
      观察者模式 迭代器模式 职责链模式 模块模式 命令模式 备忘录模式 发布订阅模式
      状态模式 访问者模式 中介模式 解释器模式
      金子模式（可扩展插件的模式）（可插件模式）
    </p>
    <h2 id="设计模式的六大原则">
      <a href="/engineered/design-principle.html">设计模式的六大原则</a>
    </h2>
    <h2 id="工厂模式">工厂模式</h2>
    <p>
      抽象了创建具体对象的过程。就是使用工厂函数。<br />
      该模式就是为了创建对象。
    </p>
    <pre><code><code><div>function createPerson (name, age, job) {
    var o = new Object()
    o.name = name
    o.age = age
    o.job = job
    o.sayName = function () {
        console.log(this.name)
    }
    return o
}
</div></code></code></pre>
    <h2 id="单例模式">单例模式</h2>
    <p>
      也叫单体模式，核心思想是确保一个类只对应一个实例。即使多次实例化。其实例结果是相同的。
      在实现中只能有一个的事物。如：一个公司只能有一个会计系统，一个超市只能有一个收银系统。
    </p>
    <pre><code><code><div>var Singleton = function () {
    let instance = null
    function init () {
        var o = Object.create(null)
        o.name = 'top'
        o.admin = true
        o.sayHi = () =&gt; {
            console.log('hi')
        }
        return o
    }
    return {
        getInstance: function () {
            if (!instance) {
                instance = init()
            }
            return instance
        }
    }
}()
var a = Singleton.getInstance()
var b = Singleton.getInstance()
a === b
</div></code></code></pre>
    <h2 id="原型模式">原型模式</h2>
    <pre><code><code><div>function Foo () {}
Foo.prototype.hi = () =&gt; {}
var foo = new Foo()
</div></code></code></pre>
    <h2 id="适配器模式">适配器模式</h2>
    <p>把不合适的接口从一个合适的接口输出。</p>
    <pre><code><code><div>// 若
var hong = {
  say: () =&gt; {
    console.log('hi')
  }
}
var ming = {
  speak: () =&gt; {
    console.log('hi')
  }
}
var mingAdapter = {
  say: ming.speak
}
// 则可以这样使用
var friend = [hong, mingAdapter]
friend.forEach(item =&gt; {
  console.log(item)
  item.say()
})
</div></code></code></pre>
    <h2 id="装饰器模式">装饰器模式</h2>
    <pre><code><code><div>let dfn = () =&gt; {
  // 
}
class MyClass {
}
// use
@dfn
class MyClass {
  constructor () {}
  fire () {}
}
// es5方法，会修改原来的属性。
</div></code></code></pre>
    <h2 id="代理模式">代理模式</h2>
    <p>
      用来控制访问本体对象。在模块模式的基础上开发出来的模式。先写一个单一原则的方法。再写一个控制触发该方法的方法（代理）
      是把一些开销很大的对象，延迟到真正需要它的时候才去创建执行
      一般用于：隔离、保护、验证、阻隔、缓冲、代理等。
    </p>
    <pre><code><code><div>class User {
  constructor (name, age) {
    this.name = name
    this.age = age
  }
}
var handler = {
  set: (target, key, value, receiver) =&gt; {
    console.log(target, key, value, receiver)
    target[kye] = value
  },
  construct: (target, args, newTarget) =&gt; {
    console.log(target, args, newTarget)
    if (200 &lt; args[1]) {
      return {error: new Error('age is invalid')}
    } else {
      var a = Array.prototype.slice.call(args, 0)
      return new target(...a)
    }
  }
}
var proxy = new Proxy(User, handler)
var u = new proxy('u', 33)
let {proxy: p, revoke} = Proxy.revocable(User, handler)
revoke() // 解除代理
var a = new p('a', 23) // Uncaught TypeError: Cannot perform 'construct' on a proxy that has been revoked
</div></code></code></pre>
    <h2 id="外观模式门面模式">外观模式（门面模式）</h2>
    <p>
      对外提供一个大接口，在大接口的方法体时调用模块（或定义域）内的子方法。
      如此可省去用户调用多个小接口的麻烦。让模块更内聚。<br />
      <code>compose</code>方法就是一种体现。
    </p>
    <pre><code><code><div>// demo0
function a () {...}
function b () {...}
function ab () {
  a()
  b()
}
ab()

// demo1
stopEvent()
function stopEvent () {
  stopPropagation()
  preventDefault()
}
function stopPropagation() {}
function preventDefault() {}
</div></code></code></pre>
    <h2 id="桥接模式">桥接模式</h2>
    <p>类的嵌套。 可利用常用的基本类。</p>
    <pre><code><code><div>class Base0 {}
class Base1 {}
class Super {
  constructor () {
    this.base0 = new Base0()
    this.base1 = new Base1()
  }
}
</div></code></code></pre>
    <h2 id="组合模式">组合模式</h2>
    <p>
      把多个命令（或方法）组合起来。可追加命令，再依次执行。 与门面模式类似。
    </p>
    <pre><code><code><div>class MacroCommand {
  constructor () {
    this.commandList = []
  }
  add (fn) {
    this.commandList.push(fn)
  }
  execute () {
    this.commandList.forEach(cb =&gt; cb())
  }
}
let macroCommand = new MacroCommand()
macroCommand.add(firstCommand)
macroCommand.add(secondCommand)
macroCommand.add(threeCommand)
macroCommand.execute()
</div></code></code></pre>
    <h2 id="享元模式共享模式">享元模式（共享模式）</h2>
    <p>
      该模式是创建一个类，把相同的属性定义在该类中，把不同的属性定义在该类外面。<br />
      当需要类的实例需要某些属性时，保持相同属性不变，改变不同属性为希望的属性。再返回该实例。<br />
      当需要很多具有若干相同属性与不同属性的对象时，可以使用享元模式。<br />
      // 该模式下的实例是共享的一个对象。
    </p>
    <pre><code><code><div>function Circle (color) {
  this.color = color
  this.x
  this.y
  this.r
  this.setAttr = (x, y, r) =&gt; {
    this.x = x
    this.y = y
    this.r = r
  }
  this.draw = () =&gt; console.log('draw')
}
let shapeFactory = (function () {
  let store = {}
  return {
    getCircle: (color) =&gt; {
      if (!store[color]) {
        store[color] = new Circle(color)
      }
      return store[color]
    }
  }
})()
let circle0 = shapeFactory.getCircle('red')
circle.setAttr(1, 2, 3)
circle.draw()
</div></code></code></pre>
    <h2 id="策略模式">策略模式</h2>
    <p>
      策略模式可看作为if/else判断的另一种表现形式，在达到相同目的的同时，减少了代码量以及代码维护成本。<br />
      分离算法的使用、算法的实现。
    </p>
    <pre><code class="language-js"><div><span class="hljs-comment">// demo0</span>
<span class="hljs-keyword">var</span> realize = {
    <span class="hljs-attr">first</span>: <span class="hljs-function">() =&gt;</span> {},
    <span class="hljs-attr">second</span>: <span class="hljs-function">() =&gt;</span> {},
    <span class="hljs-attr">third</span>: <span class="hljs-function">() =&gt;</span> {}
}
<span class="hljs-keyword">let</span> result = realize[param] ? realize[param]() : <span class="hljs-literal">null</span>

<span class="hljs-comment">// demo1</span>
<span class="hljs-comment">// html</span>
&lt;form&gt;
<span class="hljs-comment">// js</span>
<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;submit&#x27;</span>).on(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  event.preventDefault()
  <span class="hljs-keyword">var</span> validator = <span class="hljs-keyword">new</span> Validator()
  <span class="hljs-keyword">var</span> result = validator.test({
    <span class="hljs-string">&#x27;userName&#x27;</span>: [
      {<span class="hljs-attr">rule</span>: <span class="hljs-string">&#x27;isRequired&#x27;</span>, <span class="hljs-attr">value</span>: <span class="hljs-built_in">this</span>.userName.value, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;string&#x27;</span>},
      ...
    ],
    ...
  })
})

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Validator</span> (<span class="hljs-params"></span>) </span>{}
Validator.prototype.rules = {
  <span class="hljs-attr">isRequired</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> value.replace(<span class="hljs-regexp">/(^\s*)|(\s*$)/g</span>, <span class="hljs-string">&#x27;&#x27;</span>)
  },
  ...
}
Validator.prototype.test = <span class="hljs-function">(<span class="hljs-params">rules</span>) =&gt;</span> {
  <span class="hljs-keyword">var</span> that = <span class="hljs-built_in">this</span>
  <span class="hljs-keyword">var</span> valid = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> rules) {
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; rules[key].length; i++) {
      <span class="hljs-keyword">let</span> {rule, value, message} = rules[key][i]
      <span class="hljs-keyword">let</span> result = that.rules[rule](value)
      <span class="hljs-comment">// let result = that.rules[rule].apply(this, value)</span>
      <span class="hljs-keyword">if</span> (!result) {
        valid = {
          <span class="hljs-attr">errValue</span>: key,
          <span class="hljs-attr">errMsg</span>: message
        }
        <span class="hljs-keyword">break</span>
      }
    }
    <span class="hljs-keyword">if</span> (valid) {
      <span class="hljs-keyword">break</span>
    }
  }
  <span class="hljs-keyword">return</span> valid
}

<span class="hljs-comment">// 重写demo1</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Validator</span> </span>{
  <span class="hljs-title">constructor</span> (<span class="hljs-params"></span>) {
    <span class="hljs-built_in">this</span>.rulesMap = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()
    <span class="hljs-built_in">this</span>.rulesMap.set(<span class="hljs-string">&#x27;required&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value, options</span>) </span>{
      <span class="hljs-keyword">let</span> reg = <span class="hljs-regexp">/^\s*|\s*$/g</span>
      <span class="hljs-keyword">let</span> res = <span class="hljs-literal">null</span>
      <span class="hljs-keyword">if</span> (value.replace(reg, <span class="hljs-string">&#x27;&#x27;</span>)) {
        <span class="hljs-keyword">return</span> res
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">rule</span>: <span class="hljs-string">&#x27;inquired&#x27;</span>,
          <span class="hljs-attr">message</span>: options.message
        }
      }
    })
  }
  <span class="hljs-function"><span class="hljs-title">addRule</span>(<span class="hljs-params">ruleKey, fn</span>)</span> {
    <span class="hljs-built_in">this</span>.rulesMap.set(ruleKey, fn)
  }
  <span class="hljs-function"><span class="hljs-title">validate</span>(<span class="hljs-params">value, useRules = []</span>)</span> {
    <span class="hljs-keyword">let</span> vRes = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; useRules.length; i++) {
      <span class="hljs-keyword">let</span> curRule = useRules[i] <span class="hljs-comment">// {rule, message}</span>
      <span class="hljs-keyword">let</span> vF = <span class="hljs-built_in">this</span>.rulesMap(curRule.rule)
      <span class="hljs-keyword">if</span> (vF) {
        vRes = vF(value, curRule)
      }
      <span class="hljs-keyword">break</span>
    }
    <span class="hljs-keyword">return</span> vRes
  }
}
<span class="hljs-comment">// 使用</span>
<span class="hljs-keyword">let</span> validator = <span class="hljs-keyword">new</span> Validator()
validator(value, useRules) <span class="hljs-comment">// result</span>
</div></code></pre>
    <h2 id="模板方法模式">模板方法模式</h2>
    <p>
      模板方法模式由二部分组成，第一部分是抽象父类，第二部分是具体实现的子类。
      在子类中的方法修改父类中的方法。 很像抽象类。 基本实践过程如下：
    </p>
    <pre><code><code><div>function SaveData () {}
SaveData.prototype.check = () =&gt; {
  console.log('check data format')
}
SaveData.prototype.store = () =&gt; {
  console.log('store to db')
}
SaveData.prototype.feedback = () =&gt; {
  console.log('success save')
}
function SaveUser () {}
SaveUser.prototype = new SaveData()
SaveUser.prototype.check = (name) =&gt; {
  if (typeof name === 'string') {
    return name !== ''
  } else {
    return new Error('name is invalid')
  }
}
</div></code></code></pre>
    <h2 id="观察者模式">观察者模式</h2>
    <p>也叫发布订阅模式</p>
    <pre><code><code><div>                 subject
                  ^   |
                  |   |
                  |   |
                  |   |
       subscribe  |   |  fire event
                  |   |
                  |   |
                  |   V
                 observer
</div></code></code></pre>
    <pre><code class="language-js"><div><span class="hljs-comment">// use function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Public</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">this</span>.subs = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()
  <span class="hljs-built_in">this</span>.addSub = <span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> { <span class="hljs-comment">// 添加订阅者</span>
    <span class="hljs-built_in">this</span>.subs.set(item, Simple())
  }
  <span class="hljs-built_in">this</span>.removeSub = <span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
    <span class="hljs-built_in">this</span>.subs.delete(item)
  }
  <span class="hljs-built_in">this</span>.notice = <span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">// 通知所有的订阅者，然后调用订阅者的指定方法。</span>
    <span class="hljs-built_in">this</span>.subs.keys().map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.compile())
  }
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Sub</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">this</span>.compile () {
    <span class="hljs-comment">//</span>
  }
}

<span class="hljs-comment">// use class format</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Subject</span> </span>{
  <span class="hljs-title">constructor</span> (<span class="hljs-params"></span>) {
    <span class="hljs-built_in">this</span>.observers = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>
  }
  <span class="hljs-function"><span class="hljs-title">add</span>(<span class="hljs-params">...observer</span>)</span> {
    observer.forEach(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
      <span class="hljs-built_in">this</span>.observers.set(item, Simple())
    })
  }
  <span class="hljs-function"><span class="hljs-title">remove</span>(<span class="hljs-params">observer</span>)</span> {
    <span class="hljs-built_in">this</span>.observers.delete(observer)
  }
  <span class="hljs-function"><span class="hljs-title">notify</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-built_in">this</span>.observers.forEach(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.update())
  }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Observer</span> </span>{
  <span class="hljs-title">constructor</span> (<span class="hljs-params"></span>) {
    <span class="hljs-comment">// ...</span>
  }
  update () {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;update&#x27;</span>)
  }
}
<span class="hljs-keyword">let</span> [o0, o1] = [<span class="hljs-keyword">new</span> Observer(), <span class="hljs-keyword">new</span> Observer()]
<span class="hljs-keyword">let</span> sub = <span class="hljs-keyword">new</span> Subject()
sub.add(o0, o1)
sub.notify()
</div></code></pre>
    <h2 id="迭代器模式">迭代器模式</h2>
    <p>
      实现统一遍历接口。<br />
      内部迭代器
    </p>
    <pre><code class="language-js"><div>$.each([<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>], <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">index,value</span>) </span>{
  <span class="hljs-built_in">console</span>.log(index, value)
})
</div></code></pre>
    <p>外部迭代器</p>
    <pre><code class="language-js"><div><span class="hljs-function"><span class="hljs-keyword">function</span> * <span class="hljs-title">gen</span> (<span class="hljs-params">arr</span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> [index, value] <span class="hljs-keyword">of</span> arr.entries()) {
    <span class="hljs-keyword">yield</span> <span class="hljs-built_in">console</span>.log([index, value])
  }
}
<span class="hljs-keyword">let</span> ite = gen([<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>])
ite.next()
ite.next()
ite.next()
</div></code></pre>
    <p>
      es6中Iterator接口部署在Symbol.iterator属性上。<br />
      当执行<code>[Symbol.iterator]()</code>会返回一个遍历器对象。
    </p>
    <pre><code class="language-js"><div><span class="hljs-keyword">var</span> a = [<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>]
<span class="hljs-keyword">var</span> ite = arr[<span class="hljs-built_in">Symbol</span>.iterator]()
<span class="hljs-comment">// arr[Symbol.iterator]   是遍历器生成函数</span>
<span class="hljs-comment">// arr[Symbol.iterator]() 是遍历器对象</span>
ite.next() <span class="hljs-comment">// {value: &#x27;a&#x27;, done: false}</span>
ite.next() <span class="hljs-comment">// {value: &#x27;b&#x27;, done: false}</span>
ite.next() <span class="hljs-comment">// {value: &#x27;c&#x27;, done: false}</span>
ite.next() <span class="hljs-comment">// {value: undefined, done: true}</span>
</div></code></pre>
    <h2 id="职责链模式">职责链模式</h2>
    <p>消除请求的发送者与接收者的耦合。</p>
    <ol>
      <li>发送者知道链中的第一个接收者，它向这个接收者发送该请求。</li>
      <li>每一个接收者都对请求进行分析，然后要么处理它，要么它往下传递。</li>
      <li>每一个接收者只知道它在链中的下家(successor)。</li>
      <li>如果没有任何接收者处理请求，那么请求会从链中离开。</li>
      <li>过程很像链表。</li>
    </ol>
    <pre><code class="language-js"><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">order500</span>(<span class="hljs-params">orderType,isPay,count</span>)</span>{
    <span class="hljs-keyword">if</span>(orderType == <span class="hljs-number">1</span> &amp;&amp; isPay == <span class="hljs-literal">true</span>)    {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;亲爱的用户，您中奖了100元红包了&quot;</span>);
    }<span class="hljs-keyword">else</span> {
        <span class="hljs-comment">//我不知道下一个节点是谁,反正把请求往后面传递</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;nextSuccessor&quot;</span>;
    }
};
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">order200</span>(<span class="hljs-params">orderType,isPay,count</span>) </span>{
    <span class="hljs-keyword">if</span>(orderType == <span class="hljs-number">2</span> &amp;&amp; isPay == <span class="hljs-literal">true</span>) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;亲爱的用户，您中奖了20元红包了&quot;</span>);
    }<span class="hljs-keyword">else</span> {
        <span class="hljs-comment">//我不知道下一个节点是谁,反正把请求往后面传递</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;nextSuccessor&quot;</span>;
    }
};
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">orderNormal</span>(<span class="hljs-params">orderType,isPay,count</span>)</span>{
    <span class="hljs-comment">// 普通用户来处理中奖信息</span>
    <span class="hljs-keyword">if</span>(count &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;亲爱的用户，您已抽到10元优惠卷&quot;</span>);
    }<span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;亲爱的用户，请再接再厉哦&quot;</span>);
    }
}
<span class="hljs-comment">// 下面需要编写职责链模式的封装构造函数方法</span>
<span class="hljs-keyword">var</span> Chain = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>)</span>{
    <span class="hljs-built_in">this</span>.fn = fn;
    <span class="hljs-built_in">this</span>.successor = <span class="hljs-literal">null</span>;
};
Chain.prototype.setNextSuccessor = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">successor</span>)</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.successor = successor;
}
<span class="hljs-comment">// 把请求往下传递</span>
Chain.prototype.passRequest = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> ret = <span class="hljs-built_in">this</span>.fn.apply(<span class="hljs-built_in">this</span>, <span class="hljs-built_in">arguments</span>);
    <span class="hljs-keyword">if</span>(ret === <span class="hljs-string">&#x27;nextSuccessor&#x27;</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.successor &amp;&amp; <span class="hljs-built_in">this</span>.successor.passRequest.apply(<span class="hljs-built_in">this</span>.successor, <span class="hljs-built_in">arguments</span>);
    }
    <span class="hljs-keyword">return</span> ret;
}
<span class="hljs-comment">//现在我们把3个函数分别包装成职责链节点：</span>
<span class="hljs-keyword">var</span> chainOrder500 = <span class="hljs-keyword">new</span> Chain(order500);
<span class="hljs-keyword">var</span> chainOrder200 = <span class="hljs-keyword">new</span> Chain(order200);
<span class="hljs-keyword">var</span> chainOrderNormal = <span class="hljs-keyword">new</span> Chain(orderNormal);
 
<span class="hljs-comment">// 然后指定节点在职责链中的顺序</span>
chainOrder500.setNextSuccessor(chainOrder200);
chainOrder200.setNextSuccessor(chainOrderNormal);
 
<span class="hljs-comment">//最后把请求传递给第一个节点：</span>
chainOrder500.passRequest(<span class="hljs-number">1</span>,<span class="hljs-literal">true</span>,<span class="hljs-number">500</span>);  <span class="hljs-comment">// 亲爱的用户，您中奖了100元红包了</span>
chainOrder500.passRequest(<span class="hljs-number">2</span>,<span class="hljs-literal">true</span>,<span class="hljs-number">500</span>);  <span class="hljs-comment">// 亲爱的用户，您中奖了20元红包了</span>
chainOrder500.passRequest(<span class="hljs-number">3</span>,<span class="hljs-literal">true</span>,<span class="hljs-number">500</span>);  <span class="hljs-comment">// 亲爱的用户，您已抽到10元优惠卷 </span>
chainOrder500.passRequest(<span class="hljs-number">1</span>,<span class="hljs-literal">false</span>,<span class="hljs-number">0</span>);   <span class="hljs-comment">// 亲爱的用户，请再接再厉哦</span>

<span class="hljs-comment">// 我优化过的</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Chain</span> </span>{
  <span class="hljs-title">constructor</span> (<span class="hljs-params">...fnList</span>) {
    <span class="hljs-built_in">this</span>._fnMap = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>(fnList.map(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> ([item, <span class="hljs-built_in">Symbol</span>()])))
  }
  <span class="hljs-function"><span class="hljs-title">add</span>(<span class="hljs-params">fn</span>)</span> {
    <span class="hljs-built_in">this</span>._fnMap.set(fn, <span class="hljs-built_in">Symbol</span>())
  }
  <span class="hljs-function"><span class="hljs-title">remove</span>(<span class="hljs-params">fn</span>)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>._fnMap.delete(fn) <span class="hljs-comment">// boolean</span>
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title">fnList</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.from(<span class="hljs-built_in">this</span>._fnMap.keys())
  }
  <span class="hljs-comment">// set fnList() {}</span>
  <span class="hljs-function"><span class="hljs-title">passRequest</span>(<span class="hljs-params">threshold, ...args</span>)</span> {
    <span class="hljs-keyword">let</span> res
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">this</span>.fnList.length; i++) {
      res = <span class="hljs-built_in">this</span>.fnList[i](...args)
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;sdfa&#x27;</span>, res, threshold)
      <span class="hljs-keyword">if</span> (res === threshold) {
        <span class="hljs-keyword">break</span>
      }
    }
    <span class="hljs-keyword">return</span> res
  }
}
<span class="hljs-keyword">let</span> fn0 = <span class="hljs-function">(<span class="hljs-params">a</span>) =&gt;</span> {
  clog(<span class="hljs-string">&#x27;fn0&#x27;</span>, a)
  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&#x27;</span>
}
<span class="hljs-keyword">let</span> fn1 = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> {clog(<span class="hljs-string">&#x27;fn1&#x27;</span>, a, b)}
<span class="hljs-keyword">let</span> fn2 = <span class="hljs-function">(<span class="hljs-params">a, b, c</span>) =&gt;</span> {clog(<span class="hljs-string">&#x27;fn2&#x27;</span>, a, b, c)}
<span class="hljs-keyword">let</span> c = <span class="hljs-keyword">new</span> Chain(fn0, fn1, fn2)
<span class="hljs-comment">// c.add((a, b) =&gt; {clog(&#x27;fn3&#x27;, a, b)})</span>
<span class="hljs-comment">// c.remove(fn2)</span>
c.passRequest(<span class="hljs-string">&#x27;q&#x27;</span>, <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>)

<span class="hljs-keyword">let</span> chain = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">threshold, ...fnList</span>) </span>{
  <span class="hljs-built_in">this</span>.fnList = fnList
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
    <span class="hljs-comment">// this.fnList</span>
    <span class="hljs-keyword">let</span> res = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">this</span>.fnList.length; i++) {
      res = <span class="hljs-built_in">this</span>.fnList[i](...args)
      <span class="hljs-keyword">if</span> (res === threshold) {
        <span class="hljs-comment">// go on</span>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">break</span>
      }
    }
    <span class="hljs-keyword">return</span> res
  }
}
<span class="hljs-keyword">let</span> fn0 = <span class="hljs-function">(<span class="hljs-params">a</span>) =&gt;</span> {
  clog(<span class="hljs-string">&#x27;fn0&#x27;</span>, a)
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Symbol</span>.for(<span class="hljs-string">&#x27;chain&#x27;</span>)
}
<span class="hljs-keyword">let</span> fn1 = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> {
  clog(<span class="hljs-string">&#x27;fn1&#x27;</span>, a, b)
}
<span class="hljs-keyword">let</span> fn2 = <span class="hljs-function">(<span class="hljs-params">a, b, c</span>) =&gt;</span> {
  clog(<span class="hljs-string">&#x27;fn2&#x27;</span>, a, b, c)
}
<span class="hljs-keyword">let</span> cf = chain(<span class="hljs-built_in">Symbol</span>.for(<span class="hljs-string">&#x27;chain&#x27;</span>), fn0, fn1, fn2)
cf(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>) <span class="hljs-comment">// 输出到fn2</span>

</div></code></pre>
    <pre><code><code><div>function Fn1() {
    console.log(1);
    return &quot;nextSuccessor&quot;;
}
function Fn2() {
    console.log(2);
    var self = this;
    setTimeout(function(){
        self.next();
    },1000);
}
function Fn3() {
    console.log(3);
}
// 下面需要编写职责链模式的封装构造函数方法
var Chain = function(fn){
    this.fn = fn;
    this.successor = null;
};
Chain.prototype.setNextSuccessor = function(successor){
    return this.successor = successor;
}
// 把请求往下传递
Chain.prototype.passRequest = function(){
    var ret = this.fn.apply(this,arguments);
    if(ret === 'nextSuccessor') {
        return this.successor &amp;&amp; this.successor.passRequest.apply(this.successor,arguments);
    }
    return ret;
}
Chain.prototype.next = function(){
    return this.successor &amp;&amp; this.successor.passRequest.apply(this.successor,arguments);
}
//现在我们把3个函数分别包装成职责链节点：
var chainFn1 = new Chain(Fn1);
var chainFn2 = new Chain(Fn2);
var chainFn3 = new Chain(Fn3);
 
// 然后指定节点在职责链中的顺序
chainFn1.setNextSuccessor(chainFn2);
chainFn2.setNextSuccessor(chainFn3);
 
chainFn1.passRequest();  // 打印出1，2 过1秒后 会打印出3
</div></code></code></pre>
    <h2 id="模块模式">模块模式</h2>
    <p>把方法、属性分为分开的与私有的。</p>
    <pre><code class="language-js"><div><span class="hljs-comment">// 闭包</span>
<span class="hljs-keyword">var</span> ModuleFn = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> privateVar  = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">var</span> privateFn = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;privateFn&#x27;</span>)
  }
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">publicFn0</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;publicFn0&#x27;</span>)
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;privateVar&#x27;</span>, privateVar)
    },
    <span class="hljs-attr">publicFn1</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;publicFn1&#x27;</span>)
      privateFn()
    }
  }
})()
ModuleFn.publicFn0()
ModuleFn.publicFn1()
<span class="hljs-comment">// commonjs同理</span>
<span class="hljs-comment">// esm同理</span>
</div></code></pre>
    <h2 id="命令模式">命令模式</h2>
    <p>
      执行一个执行某些特定事情的指令。像是封装了一个方法。<br />
      把需要重用的逻辑封装为一个方法，再在需要的地方调用此方法。
    </p>
    <pre><code><code><div>// 如下代码上的四个按钮 点击事件
var b1 = document.getElementById(&quot;button1&quot;),
    b2 = document.getElementById(&quot;button2&quot;),
    b3 = document.getElementById(&quot;button3&quot;),
    b4 = document.getElementById(&quot;button4&quot;);
/*
 bindEnv函数负责往按钮上面安装点击命令。点击按钮后，会调用
 函数
 */
var bindEnv = function(button,func) {
    button.onclick = function(){
        func();
    }
};
// 现在我们来编写具体处理业务逻辑代码
var Todo1 = {
    test1: function(){
        alert(&quot;我是来做第一个测试的&quot;);
    }    
};
// 实现业务中的增删改操作
var Menu = {
    add: function(){
        alert(&quot;我是来处理一些增加操作的&quot;);
    },
    del: function(){
        alert(&quot;我是来处理一些删除操作的&quot;);
    },
    update: function(){
        alert(&quot;我是来处理一些更新操作的&quot;);
    }
};
// 调用函数
bindEnv(b1,Todo1.test1);
// 增加按钮
bindEnv(b2,Menu.add);
// 删除按钮
bindEnv(b3,Menu.del);
// 更改按钮
bindEnv(b4,Menu.update);
</div></code></code></pre>
    <pre><code><code><div>var command1 = {
    execute: function(){
        console.log(1);
    }
}; 
var command2 = {
    execute: function(){
        console.log(2);
    }
};
var command3 = {
    execute: function(){
        console.log(3);
    }
};
// 定义宏命令，command.add方法把子命令添加进宏命令对象，
// 当调用宏命令对象的execute方法时，会迭代这一组命令对象，
// 并且依次执行他们的execute方法。
var command = function(){
    return {
        commandsList: [],
        add: function(command){
            this.commandsList.push(command);
        },
        execute: function(){
            for(var i = 0,commands = this.commandsList.length; i &lt; commands; i+=1) {
                this.commandsList[i].execute();
            }
        }
    }
};
// 初始化宏命令
var c = command();
c.add(command1);
c.add(command2);
c.add(command3);
</div></code></code></pre>
    <h2 id="备忘录模式">备忘录模式</h2>
    <p>
      也叫缓存模式。在一个栈中保存多个状态。当需要返回前一个状态时，从栈中弹出一状态。直到栈为空。
    </p>
    <pre><code class="language-js"><div><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Memo</span> </span>{
  <span class="hljs-title">constructor</span> (<span class="hljs-params"></span>) {
    <span class="hljs-built_in">this</span>.state = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()
    <span class="hljs-built_in">this</span>.stateKeyList = []
  }
  <span class="hljs-comment">// 保存状态</span>
  push (key, state) {
    <span class="hljs-built_in">this</span>.stateKeyList.push(key)
    <span class="hljs-keyword">let</span> KEY = <span class="hljs-built_in">Symbol</span>.for(key)
    <span class="hljs-built_in">this</span>.state.set(KEY, state)
  }
  <span class="hljs-comment">// 查看指定状态</span>
  peek (key) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.state.get(<span class="hljs-built_in">Symbol</span>.for(key))
  }
  <span class="hljs-comment">// 弹出最后一个状态</span>
  pop () {
    <span class="hljs-keyword">let</span> lastKey = <span class="hljs-built_in">this</span>.stateKeyList.pop()
    <span class="hljs-keyword">let</span> state = <span class="hljs-built_in">this</span>.peek(lastKey)
    <span class="hljs-built_in">this</span>.delState(lastKey)
    <span class="hljs-keyword">return</span> state
  }
  <span class="hljs-comment">// 删除指定的状态</span>
  delState (key) {
    <span class="hljs-keyword">let</span> index = <span class="hljs-built_in">this</span>.stateKeyList.findIndex(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item === key)
    <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
      <span class="hljs-built_in">this</span>.stateKeyList.splice(index, <span class="hljs-number">1</span>)
      <span class="hljs-built_in">this</span>.state.delete(<span class="hljs-built_in">Symbol</span>.for(key))
    }
  }
  <span class="hljs-comment">// 查看所有状态</span>
  allState () {
    <span class="hljs-comment">// [[k, v], [k0, v0], ...]</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.stateKeyList.reduce(<span class="hljs-function">(<span class="hljs-params">r, c</span>) =&gt;</span> {
      r.push([c, <span class="hljs-built_in">this</span>.state.get(<span class="hljs-built_in">Symbol</span>.for(c))])
      <span class="hljs-keyword">return</span> r
    }, [])
  }
}
</div></code></pre>
    <h2 id="状态模式">状态模式</h2>
    <p>
      定义一个对象。这个对象里定义了很多状态及对应的方法，再暴露一个改变状态的接口，再暴露一个调用的接口。
    </p>
    <pre><code><code><div>class user {
  constructor () {
    this.currentState = []
    this.states = {
      move: () =&gt; {console.log('move')},
      stop: () =&gt; {console.log('stop')},
      speak: () =&gt; {console.log('speak')}
    }
  }
  changeStatus (...state) {
    this.currentState = state
    return this
  }
  goAhead () {
    this.currentState.forEach(item =&gt; this.states[item] &amp;&amp; this.states[item]())
    return this
  }
}
</div></code></code></pre>
    <h2 id="访问者模式">访问者模式</h2>
    <p>
      在js这种弱类型语言里，很多方法里都不做对象的类型检测，而是只关心这些对象能做什么。<br />
      根据不同的访问者调用不同的方法。<br />
      把数据与操作数据的方法分开。<br />
      常用到<code>abc</code>方法。
    </p>
    <pre><code><code><div>function Chicken (name) {
  this.name = name
}
Chicken.prototype.kind = 'chicken'
Chicken.prototype.speak = function () {
  console.log(`${this.name}: ji ji`)
}
function Duck (name) {
  this.name = name
}
Duck.prototype.kind = 'duck'
Duck.prototype.speak = function () {
  console.log(`${this.name}: ga ga`)
}
var Visitor = {
  speak: function (...rest) {
    let [that, ...params] = rest
    // console.log(that, params, this)
    return Chicken.prototype.speak.apply(this, params)
  }
}
var c = new Chicken('c')
var d = new Duck('d')
// console.log(d)
d.speak = Visitor.speak
d.speak()
</div></code></code></pre>
    <h2 id="中介模式">中介模式</h2>
    <p>
      解耦对象与对象（数据与数据）之间关系。使二者间尽可能解耦。<br />
      常用于多对多的关系。
    </p>
    <pre><code><code><div>// demo0
let playerDirector = (function () {
  let players = {}, operations = {}
  operations.addPlayer = function (player) {
    var teamColor = player.teamColer
    players[teamColor] = players[teamColor] || []
    players[teamColor].push(player)
  }
  operations.removePlayer = function (player) {
    var teamColor = player.teamColer
    players[teamColor] = players[teamColor] || []
    let index = -1
    players.some((item, i) =&gt; {
      if (item.name === player.name) {
        index = i
        return true
      }
    })
    if (index !== -1) {
      players.splice(index, 1)
    }
  }
  options.playerDead = function (player) {
    let teamPlayers = players[player.teamColor]
    let allDead = teamPlayers.some(item =&gt; item.state)
    if (allDead) {
      players.forEech(item =&gt; {
        item.color === player.color ? item.win() : item.lose()
      })
    }
  }
  let reciveMessage: function () {
    let [msgType, ...rest] = arguments
    options[msgType].apply(this, rest) // 这样比`options[msgType](rest)`更安全。
  }
  return {reciveMessage}
})()
class Player () {
  constructor (name, teamColor) {
    this.name = name
    this.teamColor = teamColor
    this.state = true
  }
  win () {
    console.log('win')
  }
  lose () {
    console.log('lose')
  }
  die () {
    playerDirector.reciveMessage('playerDead', this)
  }
}

// demo1
class Game {
  constructor() {
    this.playerList = new Map()
  }
  addPlayer(...ps) {
    ps.forEach(p =&gt; {
      this.playerList.set(p.name, p)
    })
  }
  removePlayer(p) {
    this.playerList.delete(p.name)
  }
  operate(source, target, operation) {
    switch(operation) {
      case '...':
        // source.fn0()
        // target.fn1()
        break
    }
  }
}
class Player {
  constructor(name, ...rest) {
    this.name = name
  }
  fn0() {...}
  fn1() {...}
}
const game = new Game()
let p0 = new Player('p0')
let p1 = new Player('p1')
let p2 = new Player('p2')
game.addPlayer(p0, p1, p2)
// 某情况下触发了：
game.operate(p0, p1, 'xxx')
</div></code></code></pre>
    <h2 id="解释器模式">解释器模式</h2>
    <p>
      解释器模式(Interpreter) : 定义一种文法的表示,并定义一种解释器,
      通过这个解释器类解析对应的文法内容.
    </p>
    <ol>
      <li>利用解释器类解析文法中表示的想要的意图,解决并实现对应的需求.</li>
      <li>将一些特定类型的问题, 提供一种更简单的文法表示, 来解决对应的问题.</li>
      <li>将一些重复出现的问题,用一种简单的语言来进行表达.</li>
    </ol>
    <h2 id="环形模式">环形模式</h2>
    <p>
      这是我定义的模式。在读一起开源项目时发现常这么使用。<br />
      有点像环形链表。
    </p>
    <pre><code class="language-js"><div><span class="hljs-keyword">let</span> o = {
  <span class="hljs-attr">k</span>: <span class="hljs-string">&#x27;v&#x27;</span>
}
o.origin = o
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> o
</div></code></pre>
    <h2 id="回调模式">回调模式</h2>
    <p>
      把一个方法a传入另一个方法b。在某时刻是调用方法a.<br />
      在子组件改变父组件的数据时常用这种方法。
    </p>
    <pre><code class="language-js"><div><span class="hljs-keyword">let</span> fn = <span class="hljs-function">(<span class="hljs-params">cb</span>) =&gt;</span> {
  <span class="hljs-comment">// 某时刻执行</span>
  <span class="hljs-keyword">if</span> (expression) {
    cb()
  }
}
</div></code></pre>
    <h2 id="惰性模式">惰性模式</h2>
    <p>把懒函数整理为一种设计模式</p>
    <pre><code class="language-js"><div><span class="hljs-comment">// 定义</span>
<span class="hljs-keyword">let</span> fn = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// 若干环境判断</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    ...
  }
}
<span class="hljs-comment">// 使用</span>
<span class="hljs-keyword">let</span> fa = fn()
fa()
</div></code></pre>
    <h2 id="沙箱模式">沙箱模式</h2>
    <p>
      该模式提供了一个可用于模块运行的环境。yui中就使用了此模式。<br />
      从全量模块中取出指定的模块。<br />
      书上写的太繁琐了，下面我整理的简单的。
    </p>
    <pre><code class="language-js"><div><span class="hljs-comment">// es5</span>
<span class="hljs-keyword">let</span> allModules = {
  <span class="hljs-attr">a</span>: fn,
  <span class="hljs-attr">b</span>: fn,
  <span class="hljs-attr">c</span>: fn,
  <span class="hljs-attr">d</span>: fn,
}
<span class="hljs-keyword">let</span> sandbox = <span class="hljs-function">(<span class="hljs-params">modulesName</span>) =&gt;</span> {
  <span class="hljs-keyword">let</span> res = {}
  modulesName.forEach(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> {
    res[name] = allModules[name]
  })
  <span class="hljs-keyword">return</span> res
}
<span class="hljs-keyword">let</span> instance = sandbox([<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>])

<span class="hljs-comment">// es6</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> all <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./allModules&#x27;</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">a</span>: all.a
  <span class="hljs-attr">b</span>: all.b
  <span class="hljs-attr">c</span>: all.c
}
</div></code></pre>
    <h2 id="链模式">链模式</h2>
    <pre><code class="language-js"><div><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">O</span> </span>{
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> {...}
  <span class="hljs-attr">a</span>: <span class="hljs-function">() =&gt;</span> {
    ...
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>
  }
  <span class="hljs-attr">b</span>: <span class="hljs-function">() =&gt;</span> {
    ...
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>
  }
  <span class="hljs-attr">c</span>: <span class="hljs-function">() =&gt;</span> {
    ...
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>
  }
}
<span class="hljs-keyword">let</span> o = <span class="hljs-keyword">new</span> O()
o.a().b().c()
</div></code></pre>
    <h2 id="总结">总结</h2>
    <p>在实际运行中常会用于多种设计模式，也会用到设计模式的变种。</p>

    <script
      async
      src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"
    ></script>
  </body>
</html>
